{"version":3,"file":"3948.d24acee14dfd0076a35a.3948.js","mappings":"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","sources":["webpack:///./src/routes/_components/list/ListItem.html","webpack:///./src/routes/_components/list/ListLazyItem.html","webpack:///./src/routes/_components/list/listStore.js","webpack:///./src/routes/_components/list/List.html","webpack:///./src/routes/_utils/RealmStore.js"],"sourcesContent":["<style>\n  .list-item {\n    opacity: 0;\n    pointer-events: none;\n    transition: opacity 0.2s linear;\n    contain: content; /* see https://www.w3.org/TR/2018/CR-css-contain-1-20181108/#valdef-contain-content */\n  }\n\n  .list-item.shown {\n    opacity: 1;\n    pointer-events: auto;\n  }\n</style>\n<div class=\"list-item {shown && 'shown'}\"\n     id={`list-item-${key}`} >\n  <svelte:component this={component}\n              virtualProps={props}\n              virtualIndex={index}\n              virtualLength={length}\n              virtualKey={key}\n  />\n</div>\n<script>\n  import { doubleRAF } from '../../_utils/doubleRAF.js'\n\n  export default {\n    oncreate () {\n      doubleRAF(() => {\n        this.set({ shown: true }) // ensure fade-in animation happens after rAF\n      })\n    },\n    data: () => ({\n      shown: false\n    })\n  }\n</script>\n","{#if props}\n  <ListItem\n    {component}\n    {props}\n    {key}\n    {index}\n    {length}\n    on:initialized\n  />\n{/if}\n<script>\n  import ListItem from './ListItem.html'\n  import { mark, stop } from '../../_utils/marks.js'\n\n  export default {\n    async oncreate () {\n      const { makeProps, key } = this.get()\n      if (makeProps) {\n        const props = await makeProps(key)\n        mark('ListLazyItem set props')\n        this.set({ props })\n        this.fire('initialized')\n        stop('ListLazyItem set props')\n      }\n    },\n    data: () => ({\n      props: undefined\n    }),\n    components: {\n      ListItem\n    }\n  }\n</script>\n","import { RealmStore } from '../../_utils/RealmStore.js'\nimport { PAGE_HISTORY_SIZE } from '../../_static/pages.js'\n\nclass ListStore extends RealmStore {\n  constructor (state) {\n    super(state, /* maxSize */ PAGE_HISTORY_SIZE)\n  }\n}\n\nconst listStore = new ListStore()\n\nlistStore.computeForRealm('intersectionStates', {})\n\nif (process.browser) {\n  window.__listStore = listStore // for debugging\n}\n\nexport { listStore }\n","<div class=\"the-list\" on:initialized>\n  {#each safeItems as item, i (item)}\n    <ListLazyItem\n      {component}\n      index={i}\n      {length}\n      {makeProps}\n      key={item}\n      on:initialized=\"itemInitialized()\"\n    />\n  {/each}\n</div>\n<style>\n  .the-list {\n    position: relative;\n  }\n</style>\n<script>\n  import ListLazyItem from './ListLazyItem.html'\n  import { listStore } from './listStore.js'\n  import { getScrollContainer } from '../../_utils/scrollContainer.js'\n  import { observe } from 'svelte-extras'\n  import { mark, stop } from '../../_utils/marks.js'\n\n  function getScrollTopOffset () {\n    return document.getElementById('main-nav').getBoundingClientRect().height\n  }\n\n  export default {\n    oncreate () {\n      const { realm } = this.get()\n      this.store.setCurrentRealm(realm)\n\n      if (process.env.NODE_ENV !== 'production') {\n        this.observe('safeItems', safeItems => {\n          if (new Set(safeItems).size !== safeItems.length) {\n            console.error('list of items is not unique:', safeItems)\n          }\n        })\n      }\n    },\n    ondestroy () {\n      this.store.setCurrentRealm(null)\n    },\n    methods: {\n      observe,\n      itemInitialized () {\n        let { initializedCount, length } = this.get()\n        initializedCount++\n        this.set({ initializedCount })\n        if (initializedCount === length) {\n          this.initialize()\n        }\n      },\n      initialize () {\n        const { scrollToItem } = this.get()\n        if (scrollToItem) {\n          const element = document.getElementById(`list-item-${scrollToItem}`)\n          requestAnimationFrame(() => {\n            console.log('scrolling element into view')\n            mark('scrollToElement')\n            const scrollTopOffset = getScrollTopOffset()\n            element.scrollIntoView(true)\n            console.log('scrollTopOffset', scrollTopOffset)\n            getScrollContainer().scrollTop -= scrollTopOffset\n            stop('scrollToElement')\n            this.fire('initialized')\n          })\n        } else {\n          this.fire('initialized')\n        }\n      }\n    },\n    data: () => ({\n      initializedCount: 0\n    }),\n    computed: {\n      safeItems: ({ items }) => items || [],\n      length: ({ safeItems }) => safeItems.length\n    },\n    components: {\n      ListLazyItem\n    },\n    store: () => listStore\n  }\n</script>\n","// A store where you can divide data into \"realms\" that are backed with an LRU cache.\n// Each realm has self-contained data that you can set with setForRealm() and compute\n// with computeForRealm(). The maxSize determines how many realms to keep in the LRU cache.\nimport { QuickLRU } from '../_thirdparty/quick-lru/quick-lru.js'\nimport { mark, stop } from './marks.js'\nimport { requestPostAnimationFrame } from './requestPostAnimationFrame.js'\nimport * as storePackage from 'svelte/store.umd.js'\n\nconst { Store } = storePackage\n\nexport class RealmStore extends Store {\n  constructor (init, maxSize) {\n    super(init)\n    this.set({ realms: new QuickLRU({ maxSize }) })\n    this._batches = {}\n  }\n\n  setCurrentRealm (realm) {\n    this.set({ currentRealm: realm })\n  }\n\n  setForRealm (obj) {\n    const { currentRealm, realms } = this.get()\n    realms.set(currentRealm, Object.assign(realms.get(currentRealm) || {}, obj))\n    this.set({ realms })\n  }\n\n  computeForRealm (key, defaultValue) {\n    this.compute(key,\n      ['realms', 'currentRealm'],\n      (realms, currentRealm) => {\n        const realmData = realms.get(currentRealm)\n        return (realmData && realmData[key]) || defaultValue\n      })\n  }\n\n  /*\n   * Update several values at once in a realm, assuming the key points\n   * to a plain old javascript object.\n   */\n  batchUpdateForRealm (key, subKey, value) {\n    const { currentRealm } = this.get()\n    let realmBatches = this._batches[currentRealm]\n    if (!realmBatches) {\n      realmBatches = this._batches[currentRealm] = {}\n    }\n    let batch = realmBatches[key]\n    if (!batch) {\n      batch = realmBatches[key] = {}\n    }\n    batch[subKey] = value\n\n    requestPostAnimationFrame(() => {\n      const batch = this._batches[currentRealm] && this._batches[currentRealm][key]\n      if (!batch) {\n        return\n      }\n      const updatedKeys = Object.keys(batch)\n      if (!updatedKeys.length) {\n        return\n      }\n      mark('batchUpdate')\n      const obj = this.get()[key]\n      for (const otherKey of updatedKeys) {\n        obj[otherKey] = batch[otherKey]\n      }\n      delete this._batches[currentRealm][key]\n      const { realms } = this.get()\n      realms.set(currentRealm, Object.assign(realms.get(currentRealm) || {}, { [key]: obj }))\n      this.set({ realms })\n      stop('batchUpdate')\n    })\n  }\n}\n"],"names":["doubleRAF","this","set","shown","component","props","index","length","key","makeProps","get","fire","s","undefined","ListStore","RealmStore","constructor","state","super","listStore","computeForRealm","window","__listStore","observe","itemInitialized","initializedCount","initialize","scrollToItem","element","document","getElementById","requestAnimationFrame","scrollTopOffset","getBoundingClientRect","height","scrollIntoView","scrollTop","realm","store","setCurrentRealm","i","item","safeItems","items","Store","init","maxSize","realms","_batches","currentRealm","setForRealm","obj","Object","assign","defaultValue","compute","realmData","batchUpdateForRealm","subKey","value","realmBatches","batch","updatedKeys","keys","otherKey"],"sourceRoot":""}