"use strict";(this.webpackChunk=this.webpackChunk||[]).push([[5482],{8044:(t,e,o)=>{o.d(e,{Z:()=>m});var a=o(4178),s=o(8183),i=o(5524),n=o(1372),r=o(7686),l=o(658);const c=(0,r.g)(requestAnimationFrame);var u={observe:n.N7};function d(){const{lengthAsFraction:t}=this.get();this.set({lengthAsFractionDeferred:t}),this.observe("lengthAsFraction",(()=>{c((()=>{(0,s.B)("set lengthAsFractionDeferred");const{lengthAsFraction:t}=this.get();this.set({lengthAsFractionDeferred:t}),(0,s.s)("set lengthAsFractionDeferred"),requestAnimationFrame((()=>this.set({shouldAnimate:!0})))}))}),{init:!1})}function h(t){var e,o,s,n;if((0,a.S1)(this,t),this.store=i.h,this._state=(0,a.f0)((0,a.f0)(this.store._init(["reduceMotion"]),{shouldAnimate:!1,lengthAsFractionDeferred:0,style:""}),t.data),this.store._add(this,["reduceMotion"]),this._recompute({length:1,max:1,shouldAnimate:1,overLimit:1,$reduceMotion:1,style:1,lengthAsFractionDeferred:1},this._state),this._intro=!0,this._handlers.destroy=[a.iT],document.getElementById("svelte-1sgk4gg-style")||((e=(0,a.az)("style")).id="svelte-1sgk4gg-style",e.textContent=".length-gauge.svelte-1sgk4gg{height:2px}.length-gauge-inner.svelte-1sgk4gg{transform-origin:left;background:var(--main-theme-color);height:100%}.length-gauge.should-animate.svelte-1sgk4gg .length-gauge-inner.svelte-1sgk4gg{transition:transform 0.2s linear}.length-gauge.over-char-limit.svelte-1sgk4gg .length-gauge-inner.svelte-1sgk4gg{background:var(--warning-color)}",(0,a.R3)(document.head,e)),this._fragment=(o=this._state,{c(){s=(0,a.az)("div"),n=(0,a.az)("div"),this.h()},l(t){s=(0,a.d$)(t,"DIV",{class:!0,style:!0,"aria-hidden":!0},!1);var e=(0,a.pI)(s);n=(0,a.d$)(e,"DIV",{class:!0,style:!0},!1),(0,a.pI)(n).forEach(a.r2),e.forEach(a.r2),this.h()},h(){n.className="length-gauge-inner svelte-1sgk4gg",n.style.cssText=o.computedStyle,s.className=o.computedClass+" svelte-1sgk4gg",s.style.cssText=o.style,(0,a.P$)(s,"aria-hidden","true")},m(t,e){(0,a.$T)(t,s,e),(0,a.R3)(s,n)},p(t,e){t.computedStyle&&(n.style.cssText=e.computedStyle),t.computedClass&&(s.className=e.computedClass+" svelte-1sgk4gg"),t.style&&(s.style.cssText=e.style)},d(t){t&&(0,a.r2)(s)}}),this.root._oncreate.push((()=>{d.call(this),this.fire("update",{changed:(0,a.lZ)({},this._state),current:this._state})})),t.target){var r=(0,a.pI)(t.target);t.hydrate?this._fragment.l(r):this._fragment.c(),r.forEach(a.r2),this._mount(t.target,t.anchor),(0,a.yl)(this)}}(0,a.f0)(h.prototype,a.uS),(0,a.f0)(h.prototype,u),h.prototype._recompute=function(t,e){(t.length||t.max)&&this._differs(e.lengthAsFraction,e.lengthAsFraction=function({length:t,max:e}){const o=Math.round(Math.min(e,t)/e*100);return(o-o%2)/100}(e))&&(t.lengthAsFraction=!0),(t.shouldAnimate||t.overLimit||t.$reduceMotion)&&this._differs(e.computedClass,e.computedClass=function({shouldAnimate:t,overLimit:e,$reduceMotion:o}){return(0,l.q)("length-gauge",!o&&t&&"should-animate",e&&"over-char-limit")}(e))&&(t.computedClass=!0),(t.style||t.lengthAsFractionDeferred)&&this._differs(e.computedStyle,e.computedStyle=function({style:t,lengthAsFractionDeferred:e}){return`transform: scaleX(${e})`}(e))&&(t.computedStyle=!0)};const m=h},9260:(t,e,o)=>{o.d(e,{Z:()=>d});var a=o(4178),s=o(8183),i=o(5524),n=o(1372);const r=(0,o(7686).g)(requestAnimationFrame);var l={observe:n.N7};function c(){const{lengthToDisplay:t}=this.get();this.set({lengthToDisplayDeferred:t}),this.observe("lengthToDisplay",(()=>{r((()=>{(0,s.B)("set lengthToDisplayDeferred");const{lengthToDisplay:t}=this.get();this.set({lengthToDisplayDeferred:t}),(0,s.s)("set lengthToDisplayDeferred")}))}),{init:!1})}function u(t){var e,o,s,n,r;if((0,a.S1)(this,t),this.store=i.h,this._state=(0,a.f0)({lengthToDisplayDeferred:0,style:""},t.data),this._recompute({length:1,max:1,lengthToDisplayDeferred:1},this._state),this._intro=!0,document.getElementById("svelte-rucd90-style")||((e=(0,a.az)("style")).id="svelte-rucd90-style",e.textContent=".length-indicator.svelte-rucd90{color:var(--length-indicator-color);font-size:1.3em}.length-indicator.over-char-limit.svelte-rucd90{color:var(--warning-color)}",(0,a.R3)(document.head,e)),this._fragment=(o=this._state,{c(){s=(0,a.az)("span"),n=(0,a.rw)(o.lengthToDisplayDeferred),this.h()},l(t){s=(0,a.d$)(t,"SPAN",{class:!0,"aria-live":!0,"aria-atomic":!0,style:!0},!1);var e=(0,a.pI)(s);n=(0,a.M4)(e,o.lengthToDisplayDeferred),e.forEach(a.r2),this.h()},h(){s.className=r="length-indicator "+(o.overLimit?"over-char-limit":"")+" svelte-rucd90",(0,a.P$)(s,"aria-live",o.lengthVerbosity),(0,a.P$)(s,"aria-atomic","true"),s.style.cssText=o.style},m(t,e){(0,a.$T)(t,s,e),(0,a.R3)(s,n)},p(t,e){t.lengthToDisplayDeferred&&(0,a.a_)(n,e.lengthToDisplayDeferred),t.overLimit&&r!==(r="length-indicator "+(e.overLimit?"over-char-limit":"")+" svelte-rucd90")&&(s.className=r),t.lengthVerbosity&&(0,a.P$)(s,"aria-live",e.lengthVerbosity),t.style&&(s.style.cssText=e.style)},d(t){t&&(0,a.r2)(s)}}),this.root._oncreate.push((()=>{c.call(this),this.fire("update",{changed:(0,a.lZ)({},this._state),current:this._state})})),t.target){var l=(0,a.pI)(t.target);t.hydrate?this._fragment.l(l):this._fragment.c(),l.forEach(a.r2),this._mount(t.target,t.anchor),(0,a.yl)(this)}}(0,a.f0)(u.prototype,a.uS),(0,a.f0)(u.prototype,l),u.prototype._recompute=function(t,e){(t.length||t.max)&&this._differs(e.lengthToDisplay,e.lengthToDisplay=function({length:t,max:e}){return e-t}(e))&&(t.lengthToDisplay=!0),t.lengthToDisplayDeferred&&this._differs(e.lengthVerbosity,e.lengthVerbosity=function({lengthToDisplayDeferred:t}){return t>10?"off":"polite"}(e))&&(t.lengthVerbosity=!0)};const d=u},5482:(t,e,o)=>{o.r(e),o.d(e,{default:()=>Ve});var a=o(4178),s=o(4437),i=o(5524),n=o(3);var r=o(9603);var l=o(689),c=o(5981);var u=o(7376),d=o(6633),h=o(9260);function m(t){var e,o,s,n;if((0,a.S1)(this,t),this.store=i.h,this._state=(0,a.f0)(this.store._init(["maxStatusChars"]),t.data),this.store._add(this,["maxStatusChars"]),this._intro=!0,this._handlers.destroy=[a.iT],this._fragment=(e=this,o=this._state,s={length:o.length,overLimit:o.overLimit,max:o.$maxStatusChars,style:"flex-grow:1;text-align:right"},n=new h.Z({root:e.root,store:e.store,data:s}),{c(){n._fragment.c()},l(t){n._fragment.l(t)},m(t,e){n._mount(t,e)},p(t,e){var o={};t.length&&(o.length=e.length),t.overLimit&&(o.overLimit=e.overLimit),t.$maxStatusChars&&(o.max=e.$maxStatusChars),n._set(o)},d(t){n.destroy(t)}}),t.target){var r=(0,a.pI)(t.target);t.hydrate?this._fragment.l(r):this._fragment.c(),r.forEach(a.r2),this._mount(t.target,t.anchor),(0,a.yl)(this)}}(0,a.f0)(m.prototype,a.uS);const p=m;var g={async onEmojiClick(){const{realm:t}=this.get(),{currentInstance:e}=this.store.get(),[o]=await Promise.all([(0,n.n)(),(0,u.Mj)(e)]);o(t)},onMediaClick(){this.refs.input.click()},async onFileChange(t){const{files:e}=t.target,{realm:o}=this.get();for(const a of e)await(0,r.m)(o,a)},async onPostPrivacyClick(){const{realm:t}=this.get();(await Promise.all([o.e(7539),o.e(7080),o.e(9499),o.e(7807)]).then(o.bind(o,7807)).then((t=>t.default)))(t)},async onContentTypeClick(){const{realm:t}=this.get();(await Promise.all([o.e(7539),o.e(7080),o.e(9499),o.e(2180)]).then(o.bind(o,2180)).then((t=>t.default)))(t)},onContentWarningClick(){const{realm:t}=this.get();!function(t){const e=i.h.getComposeData(t,"contentWarningShown"),o=i.h.getComposeData(t,"contentWarning"),a=!e;i.h.setComposeData(t,{contentWarning:a?o:"",contentWarningShown:a,sensitive:o&&a})}(t)},onPollClick(){const{poll:t,realm:e}=this.get();t&&t.options&&t.options.length?function(t){i.h.setComposeData(t,{poll:null})}(e):function(t){i.h.setComposeData(t,{poll:{options:["",""]}})}(e)}};function f(t){var e;if((0,a.S1)(this,t),this.store=i.h,this.refs={},this._state=(0,a.f0)((0,a.f0)(this.store._init(["uploadingMedia","maxStatusMediaAttachments"]),{mediaAccept:l.ZG}),t.data),this.store._add(this,["uploadingMedia","maxStatusMediaAttachments"]),this._recompute({postPrivacy:1,localOnly:1,actualPostPrivacy:1,editId:1,contentType:1},this._state),this._intro=!0,this._handlers.destroy=[a.iT],document.getElementById("svelte-1u2nro7-style")||((e=(0,a.az)("style")).id="svelte-1u2nro7-style",e.textContent=".compose-box-toolbar.svelte-1u2nro7{grid-area:toolbar;align-self:center}.compose-box-toolbar-items.svelte-1u2nro7{display:flex;align-items:center;flex-wrap:wrap}@media(max-width: 340px){button.icon-button.compose-toolbar-button{padding-left:5px;padding-right:5px}}@media(max-width: 240px){button.icon-button.compose-toolbar-button .icon-button-svg{width:20px;height:20px}}",(0,a.R3)(document.head,e)),this._fragment=function(t,e){var o,i,n,r,l,c,u,d,h,m,g=new s.Z({root:t.root,store:t.store,data:{className:"compose-toolbar-button",label:"Insert emoji",href:"#fa-smile"}});g.on("click",(function(e){t.onEmojiClick()}));var f={className:"compose-toolbar-button",svgClassName:e.$uploadingMedia?"spin":"",label:"Add media (images, video, audio)",href:e.$uploadingMedia?"#fa-spinner":"#fa-camera",disabled:e.$uploadingMedia||e.media.length===e.$maxStatusMediaAttachments},v=new s.Z({root:t.root,store:t.store,data:f});v.on("click",(function(e){t.onMediaClick()}));var y={className:"compose-toolbar-button",label:"Add poll",pressedLabel:"Remove poll",href:"#fa-bar-chart",pressable:!0,pressed:e.poll&&e.poll.options&&e.poll.options.length},b=new s.Z({root:t.root,store:t.store,data:y});b.on("click",(function(e){t.onPollClick()}));var x={className:"compose-toolbar-button",label:e.postPrivacyLabel,href:e.actualPostPrivacy.icon,disabled:!!e.editId},_=new s.Z({root:t.root,store:t.store,data:x});_.on("click",(function(e){t.onPostPrivacyClick()}));var w={className:"compose-toolbar-button",label:"Content Type",href:e.contentTypeIcon},k=new s.Z({root:t.root,store:t.store,data:w});k.on("click",(function(e){t.onContentTypeClick()}));var S={className:"compose-toolbar-button",label:"Add content warning",pressedLabel:"Remove content warning",href:"#fa-exclamation-triangle",pressable:!0,pressed:e.contentWarningShown},I=new s.Z({root:t.root,store:t.store,data:S});I.on("click",(function(e){t.onContentWarningClick()}));var $={length:e.length,overLimit:e.overLimit},z=new p({root:t.root,store:t.store,data:$});function T(e){t.onFileChange(e)}return{c(){o=(0,a.az)("div"),i=(0,a.az)("div"),g._fragment.c(),n=(0,a.rw)("\n    "),v._fragment.c(),r=(0,a.rw)("\n    "),b._fragment.c(),l=(0,a.rw)("\n    "),_._fragment.c(),c=(0,a.rw)("\n    "),k._fragment.c(),u=(0,a.rw)("\n    "),I._fragment.c(),d=(0,a.rw)("\n    "),z._fragment.c(),h=(0,a.rw)("\n  "),m=(0,a.az)("input"),this.h()},l(t){o=(0,a.d$)(t,"DIV",{class:!0},!1);var e=(0,a.pI)(o);i=(0,a.d$)(e,"DIV",{class:!0},!1);var s=(0,a.pI)(i);g._fragment.l(s),n=(0,a.M4)(s,"\n    "),v._fragment.l(s),r=(0,a.M4)(s,"\n    "),b._fragment.l(s),l=(0,a.M4)(s,"\n    "),_._fragment.l(s),c=(0,a.M4)(s,"\n    "),k._fragment.l(s),u=(0,a.M4)(s,"\n    "),I._fragment.l(s),d=(0,a.M4)(s,"\n    "),z._fragment.l(s),s.forEach(a.r2),h=(0,a.M4)(e,"\n  "),m=(0,a.d$)(e,"INPUT",{style:!0,type:!0,multiple:!0,accept:!0},!1),(0,a.pI)(m).forEach(a.r2),e.forEach(a.r2),this.h()},h(){i.className="compose-box-toolbar-items svelte-1u2nro7",(0,a.NH)(m,"change",T),(0,a.A_)(m,"display","none"),(0,a.P$)(m,"type","file"),m.multiple=!0,m.accept=e.mediaAccept,o.className="compose-box-toolbar svelte-1u2nro7"},m(e,s){(0,a.$T)(e,o,s),(0,a.R3)(o,i),g._mount(i,null),(0,a.R3)(i,n),v._mount(i,null),(0,a.R3)(i,r),b._mount(i,null),(0,a.R3)(i,l),_._mount(i,null),(0,a.R3)(i,c),k._mount(i,null),(0,a.R3)(i,u),I._mount(i,null),(0,a.R3)(i,d),z._mount(i,null),(0,a.R3)(o,h),(0,a.R3)(o,m),t.refs.input=m},p(t,e){var o={};t.$uploadingMedia&&(o.svgClassName=e.$uploadingMedia?"spin":""),t.$uploadingMedia&&(o.href=e.$uploadingMedia?"#fa-spinner":"#fa-camera"),(t.$uploadingMedia||t.media||t.$maxStatusMediaAttachments)&&(o.disabled=e.$uploadingMedia||e.media.length===e.$maxStatusMediaAttachments),v._set(o);var a={};t.poll&&(a.pressed=e.poll&&e.poll.options&&e.poll.options.length),b._set(a);var s={};t.postPrivacyLabel&&(s.label=e.postPrivacyLabel),t.actualPostPrivacy&&(s.href=e.actualPostPrivacy.icon),t.editId&&(s.disabled=!!e.editId),_._set(s);var i={};t.contentTypeIcon&&(i.href=e.contentTypeIcon),k._set(i);var n={};t.contentWarningShown&&(n.pressed=e.contentWarningShown),I._set(n);var r={};t.length&&(r.length=e.length),t.overLimit&&(r.overLimit=e.overLimit),z._set(r),t.mediaAccept&&(m.accept=e.mediaAccept)},d(e){e&&(0,a.r2)(o),g.destroy(),v.destroy(),b.destroy(),_.destroy(),k.destroy(),I.destroy(),z.destroy(),(0,a.ys)(m,"change",T),t.refs.input===m&&(t.refs.input=null)}}}(this,this._state),t.target){var o=(0,a.pI)(t.target);t.hydrate?this._fragment.l(o):this._fragment.c(),o.forEach(a.r2),this._mount(t.target,t.anchor),(0,a.yl)(this)}}(0,a.f0)(f.prototype,a.uS),(0,a.f0)(f.prototype,g),f.prototype._recompute=function(t,e){(t.postPrivacy||t.localOnly)&&this._differs(e.actualPostPrivacy,e.actualPostPrivacy=function({postPrivacy:t,localOnly:e}){return{icon:t.icon+(e?"-home":""),label:t.label+(e?", Local only":"")}}(e))&&(t.actualPostPrivacy=!0),(t.actualPostPrivacy||t.editId)&&this._differs(e.postPrivacyLabel,e.postPrivacyLabel=function({actualPostPrivacy:t,editId:e}){return e?t.label:(0,d.A)(["Adjust privacy (currently ",["label"],")"],{label:t.label})}(e))&&(t.postPrivacyLabel=!0),t.contentType&&this._differs(e.contentTypeIcon,e.contentTypeIcon=function({contentType:t}){return(c.SQ[t]||c.SQ.default).icon}(e))&&(t.contentTypeIcon=!0)};const v=f;var y=o(8044);function b(t){var e,o,s,n;if((0,a.S1)(this,t),this.store=i.h,this._state=(0,a.f0)(this.store._init(["maxStatusChars"]),t.data),this.store._add(this,["maxStatusChars"]),this._intro=!0,this._handlers.destroy=[a.iT],this._fragment=(e=this,o=this._state,s={style:"grid-area: gauge; margin: -2px 0 5px 5px; clip-path: inset(-20px 0 0 0 round calc(var(--input-border-radius-size)));",length:o.length,overLimit:o.overLimit,max:o.$maxStatusChars},n=new y.Z({root:e.root,store:e.store,data:s}),{c(){n._fragment.c()},l(t){n._fragment.l(t)},m(t,e){n._mount(t,e)},p(t,e){var o={};t.length&&(o.length=e.length),t.overLimit&&(o.overLimit=e.overLimit),t.$maxStatusChars&&(o.max=e.$maxStatusChars),n._set(o)},d(t){n.destroy(t)}}),t.target){var r=(0,a.pI)(t.target);t.hydrate?this._fragment.l(r):this._fragment.c(),r.forEach(a.r2),this._mount(t.target,t.anchor),(0,a.yl)(this)}}(0,a.f0)(b.prototype,a.uS);const x=b;var _=o(3291),w=o(4124),k=o(4358),S=o(3999);var I={onClick(t){const{realm:e,dialogId:o,href:a}=this.get();"dialog"===e&&(t.preventDefault(),t.stopPropagation(),(0,k.j)("closeDialog",o),setTimeout((()=>{(0,S.E9)(a)})))}};function $(t){var e;if((0,a.S1)(this,t),this.store=i.h,this._state=(0,a.f0)(this.store._init(["currentVerifyCredentials","isVeryTinyMobileSize"]),t.data),this.store._add(this,["currentVerifyCredentials","isVeryTinyMobileSize"]),this._recompute({$currentVerifyCredentials:1,verifyCredentials:1,id:1,$isVeryTinyMobileSize:1},this._state),this._intro=!0,this._handlers.destroy=[a.iT],document.getElementById("svelte-12d3287-style")||((e=(0,a.az)("style")).id="svelte-12d3287-style",e.textContent=".compose-box-avatar.svelte-12d3287{grid-area:avatar;margin-right:15px}.compose-box-display-name.svelte-12d3287{color:var(--deemphasized-text-color);grid-area:name;min-width:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-size:1.1em;margin-left:5px;font-weight:600}.compose-box-display-name.svelte-12d3287,.compose-box-display-name.svelte-12d3287:hover,.compose-box-display-name.svelte-12d3287:visited{color:var(--body-text-color)}.compose-box-handle{grid-area:handle;color:var(--deemphasized-text-color);min-width:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-size:1.1em;margin-left:5px}.not-loaded.svelte-12d3287{visibility:hidden}.loaded.svelte-12d3287{visibility:visible}@media(max-width: 767px){.compose-box-avatar.svelte-12d3287{margin-right:5px}}@media(max-width: 240px){.compose-box-avatar.svelte-12d3287{margin-right:0}}",(0,a.R3)(document.head,e)),this._fragment=function(t,e){var o,s,i,n,r,l,c,u,d,h,m,p="@"+e.verifyCredentials.acct,g={account:e.verifyCredentials,size:e.avatarSize},f=new _.Z({root:t.root,store:t.store,data:g});function v(e){t.onClick(e)}var y={account:e.verifyCredentials},b=new w.Z({root:t.root,store:t.store,data:y});function x(e){t.onClick(e)}return{c(){o=(0,a.az)("a"),f._fragment.c(),i=(0,a.rw)("\n"),n=(0,a.az)("a"),b._fragment.c(),c=(0,a.rw)("\n\n"),u=(0,a.az)("span"),d=(0,a.rw)(p),this.h()},l(t){o=(0,a.d$)(t,"A",{href:!0,rel:!0,class:!0,"aria-hidden":!0,tabindex:!0},!1);var e=(0,a.pI)(o);f._fragment.l(e),e.forEach(a.r2),i=(0,a.M4)(t,"\n"),n=(0,a.d$)(t,"A",{class:!0,href:!0,"aria-busy":!0,"aria-live":!0,rel:!0},!1);var s=(0,a.pI)(n);b._fragment.l(s),s.forEach(a.r2),c=(0,a.M4)(t,"\n\n"),u=(0,a.d$)(t,"SPAN",{class:!0,"aria-busy":!0,"aria-live":!0},!1);var r=(0,a.pI)(u);d=(0,a.M4)(r,p),r.forEach(a.r2),this.h()},h(){(0,a.NH)(o,"click",v),o.href=e.href,o.rel="prefetch",o.className=s="compose-box-avatar "+(e.loaded?"loaded":"not-loaded")+" svelte-12d3287",(0,a.P$)(o,"aria-hidden","true"),o.tabIndex="-1",(0,a.NH)(n,"click",x),n.className=r="compose-box-display-name "+(e.loaded?"loaded":"not-loaded")+" svelte-12d3287",n.href=e.href,(0,a.P$)(n,"aria-busy",l=!e.loaded),(0,a.P$)(n,"aria-live","off"),n.rel="prefetch",u.className=h="compose-box-handle "+(e.loaded?"loaded":"not-loaded")+" svelte-12d3287",(0,a.P$)(u,"aria-busy",m=!e.loaded),(0,a.P$)(u,"aria-live","off")},m(t,e){(0,a.$T)(t,o,e),f._mount(o,null),(0,a.$T)(t,i,e),(0,a.$T)(t,n,e),b._mount(n,null),(0,a.$T)(t,c,e),(0,a.$T)(t,u,e),(0,a.R3)(u,d)},p(t,e){var i={};t.verifyCredentials&&(i.account=e.verifyCredentials),t.avatarSize&&(i.size=e.avatarSize),f._set(i),t.href&&(o.href=e.href),t.loaded&&s!==(s="compose-box-avatar "+(e.loaded?"loaded":"not-loaded")+" svelte-12d3287")&&(o.className=s);var c={};t.verifyCredentials&&(c.account=e.verifyCredentials),b._set(c),t.loaded&&r!==(r="compose-box-display-name "+(e.loaded?"loaded":"not-loaded")+" svelte-12d3287")&&(n.className=r),t.href&&(n.href=e.href),t.loaded&&l!==(l=!e.loaded)&&(0,a.P$)(n,"aria-busy",l),t.verifyCredentials&&p!==(p="@"+e.verifyCredentials.acct)&&(0,a.a_)(d,p),t.loaded&&h!==(h="compose-box-handle "+(e.loaded?"loaded":"not-loaded")+" svelte-12d3287")&&(u.className=h),t.loaded&&m!==(m=!e.loaded)&&(0,a.P$)(u,"aria-busy",m)},d(t){t&&(0,a.r2)(o),f.destroy(),(0,a.ys)(o,"click",v),t&&((0,a.r2)(i),(0,a.r2)(n)),b.destroy(),(0,a.ys)(n,"click",x),t&&((0,a.r2)(c),(0,a.r2)(u))}}}(this,this._state),t.target){var o=(0,a.pI)(t.target);t.hydrate?this._fragment.l(o):this._fragment.c(),o.forEach(a.r2),this._mount(t.target,t.anchor),(0,a.yl)(this)}}(0,a.f0)($.prototype,a.uS),(0,a.f0)($.prototype,I),$.prototype._recompute=function(t,e){t.$currentVerifyCredentials&&(this._differs(e.loaded,e.loaded=function({$currentVerifyCredentials:t}){return!!t}(e))&&(t.loaded=!0),this._differs(e.verifyCredentials,e.verifyCredentials=function({$currentVerifyCredentials:t}){return t||{display_name:"",acct:"",avatar:l.Pf,avatar_static:l.Pf}}(e))&&(t.verifyCredentials=!0)),t.verifyCredentials&&this._differs(e.id,e.id=function({verifyCredentials:t}){return t&&t.id}(e))&&(t.id=!0),t.id&&this._differs(e.href,e.href=function({id:t}){return t?`/accounts/${t}`:"#"}(e))&&(t.href=!0),t.$isVeryTinyMobileSize&&this._differs(e.avatarSize,e.avatarSize=function({$isVeryTinyMobileSize:t}){return t?"extra-small":"small"}(e))&&(t.avatarSize=!0)};const z=$;var T=o(4831),D=o(9970),F=o(8183),C=o(7041);const E=t=>t.unicode?t.unicode:`:${t.shortcodes[0]}:`,A=t=>`#${t.name}`,R=t=>`@${t.acct}`;async function N(t,e,o,a){const{currentInstance:s}=i.h.get(),n=i.h.getComposeData(t,"text"),r=`${n.substring(0,o)}${e} ${n.substring(a)}`;i.h.setComposeData(t,{text:r}),i.h.setForAutosuggest(s,t,{autosuggestSearchResults:[]})}async function P(t,e){const{composeSelectionStart:o,autosuggestSearchText:a,autosuggestSelected:s,autosuggestSearchResults:n}=i.h.get(),r=n[s],l=o-a.length,c=o;await N(t,e(r),l,c)}function M(t){const{currentComposeRealm:e,composeSelectionStart:o,autosuggestSearchText:a}=i.h.get(),s=o-a.length,n=o;t.acct?async function(t,e,o,a){await N(t,R(e),o,a)}(e,t,s,n):t.shortcodes?async function(t,e,o,a){await N(t,E(e),o,a)}(e,t,s,n):async function(t,e,o,a){await N(t,A(e),o,a)}(e,t,s,n)}var L=o(1372),j=o(85),B=o(101),q=o(7686);const W=(0,o(8978).I)((()=>"undefined"!=typeof webkitIndexedDB)),V=(0,q.g)(D.F);var H={observe:L.N7,setupSyncFromStore(){const t=this.refs.textarea;let e=!0;this.observe("text",(o=>{const{rawText:a}=this.get();if(a!==o){let s;if(!e){const{selectionStart:e,selectionEnd:i}=t;e>0&&e===i&&(s=o.length-a.length+e)}this.set({rawText:o}),"number"==typeof s&&s>0&&(t.selectionStart=t.selectionEnd=s),(0,F.B)("autosize.update()"),T.i.update(t),(0,F.s)("autosize.update()")}if(e){e=!1;const{autoFocus:o}=this.get();if(o){const{realm:e}=this.get();"dialog"===e?t.setAttribute("autofocus",!0):requestAnimationFrame((()=>t.focus({preventScroll:!0})))}}}))},setupSyncToStore(){const{realm:t}=this.get();this.observe("rawText",(e=>{V((()=>{(0,F.B)("updateComposeTextInStore"),this.store.setComposeData(t,{text:e}),this.store.save(),(0,F.s)("updateComposeTextInStore")}))}),{init:!1})},setupAutosize(){const t=this.refs.textarea;(0,B.b)((()=>{(0,F.B)("autosize()"),(0,T.i)(t),(0,F.s)("autosize()")}))},teardownAutosize(){(0,F.B)("autosize.destroy()"),T.i.destroy(this.refs.textarea),(0,F.s)("autosize.destroy()")},onBlur(){requestAnimationFrame((()=>{this.store.setForCurrentAutosuggest({composeFocused:!1})}))},onFocus(){(0,D.F)((()=>{const{realm:t}=this.get();this.store.set({currentComposeRealm:t}),this.store.setForCurrentAutosuggest({composeFocused:!0})}))},onSelectionChange(t){(0,D.F)((()=>{this.store.setForCurrentAutosuggest({composeSelectionStart:t})}))},onKeydown(t){const{keyCode:e}=t,o=t.getModifierState("Control")||t.getModifierState("Meta");switch(e){case 9:this.clickSelectedAutosuggestion(t);break;case 13:!this.clickSelectedAutosuggestion(t)&&o&&this.fire("postAction");break;case 38:this.incrementAutosuggestSelected(-1,t);break;case 40:this.incrementAutosuggestSelected(1,t);break;case 27:this.clearAutosuggestions(t)}},clickSelectedAutosuggestion(t){const{autosuggestShown:e,autosuggestType:o}=this.store.get();if(!e)return!1;t.preventDefault(),t.stopPropagation();return(async()=>{const{realm:t}=this.get();this.store.setForCurrentAutosuggest({autosuggestSelecting:!0}),"account"===o?await async function(t){return P(t,R)}(t):"hashtag"===o?await async function(t){return P(t,A)}(t):await async function(t){return P(t,E)}(t),this.store.setForCurrentAutosuggest({autosuggestSelecting:!1})})(),!0},incrementAutosuggestSelected(t,e){let{autosuggestShown:o,autosuggestSelected:a,autosuggestSearchResults:s}=this.store.get();o&&(a+=t,a>=0?a%=s.length:a=s.length+a,this.store.setForCurrentAutosuggest({autosuggestSelected:a}),e.preventDefault(),e.stopPropagation())},clearAutosuggestions(t){const{autosuggestShown:e}=this.store.get();e&&(this.store.setForCurrentAutosuggest({autosuggestSearchResults:[],autosuggestSelected:0}),t.preventDefault(),t.stopPropagation())},setupResize(){(0,k.on)("resizeComposeInput",this,(t=>{t===this.get().realm&&T.i.update(this.refs.textarea)}))},setCursorIfNecessary(){const{realm:t}=this.get();W()&&"dialog"!==t&&"home"!==t&&requestAnimationFrame((()=>{this.refs.textarea.selectionStart=this.refs.textarea.value.length}))}};function O(){this.setupSyncFromStore(),this.setupSyncToStore(),this.setupAutosize(),this.setupResize(),this.setCursorIfNecessary()}function Z(){this.teardownAutosize()}function U(t){var e;if((0,a.S1)(this,t),this.store=i.h,this.refs={},this._state=(0,a.f0)((0,a.f0)(this.store._init(["autosuggestData_composeFocused","currentInstance","autosuggestShown","autosuggestData_autosuggestSelected"]),{rawText:""}),t.data),this.store._add(this,["autosuggestData_composeFocused","currentInstance","autosuggestShown","autosuggestData_autosuggestSelected"]),this._recompute({$autosuggestData_composeFocused:1,$currentInstance:1,realm:1,$autosuggestShown:1,composeFocused:1,$autosuggestData_autosuggestSelected:1,autosuggestSelected:1,autosuggestShownForThisInput:1},this._state),this._intro=!0,this._handlers.destroy=[Z,a.iT],document.getElementById("svelte-jk36in-style")||((e=(0,a.az)("style")).id="svelte-jk36in-style",e.textContent=".compose-box-input.svelte-jk36in{grid-area:input;margin:10px 0 0 5px;padding:10px;border:1px solid var(--input-border);min-height:75px;resize:none;overflow:hidden;word-wrap:break-word;font-size:1.2em;width:calc(100% - 5px)}.compose-box-input-realm-dialog.svelte-jk36in{max-height:40vh;overflow-y:auto}@media(max-width: 767px){.compose-box-input-realm-dialog.svelte-jk36in{max-height:30vh}}@media(max-width: 479px){.compose-box-input-realm-dialog.svelte-jk36in{max-height:20vh}}",(0,a.R3)(document.head,e)),this._fragment=function(t,e){var o,s,i,n,r,l,c,u,d,h,m,p,g,f,v=!1;function y(){v=!0,t.set({rawText:o.value}),v=!1}function b(e){t.onFocus()}function x(e){t.onBlur()}function _(e){t.onKeydown(e)}return{c(){o=(0,a.az)("textarea"),c=(0,a.rw)("\n"),u=(0,a.az)("label"),d=(0,a.rw)("What's on your mind?"),m=(0,a.rw)("\n"),p=(0,a.az)("span"),g=(0,a.rw)("When autocomplete results are available, press up or down arrows and enter to select."),this.h()},l(t){o=(0,a.d$)(t,"TEXTAREA",{id:!0,class:!0,placeholder:!0,"aria-describedby":!0,"aria-owns":!0,"aria-expanded":!0,"aria-autocomplete":!0,"aria-activedescendant":!0},!1),(0,a.pI)(o).forEach(a.r2),c=(0,a.M4)(t,"\n"),u=(0,a.d$)(t,"LABEL",{for:!0,class:!0},!1);var e=(0,a.pI)(u);d=(0,a.M4)(e,"What's on your mind?"),e.forEach(a.r2),m=(0,a.M4)(t,"\n"),p=(0,a.d$)(t,"SPAN",{id:!0,class:!0},!1);var s=(0,a.pI)(p);g=(0,a.M4)(s,"When autocomplete results are available, press up or down arrows and enter to select."),s.forEach(a.r2),this.h()},h(){(0,a.NH)(o,"input",y),(0,a.NH)(o,"focus",b),(0,a.NH)(o,"blur",x),s=C.j3.call(t,o,(function(e){t.onSelectionChange(e)})),(0,a.NH)(o,"keydown",_),o.id=i="the-compose-box-input-"+e.realm,o.className=n="compose-box-input compose-box-input-realm-"+e.realm+" svelte-jk36in",o.placeholder="What's on your mind?",(0,a.P$)(o,"aria-describedby",r="compose-box-input-description-"+e.realm),(0,a.P$)(o,"aria-owns",l="compose-autosuggest-list-"+e.realm),(0,a.P$)(o,"aria-expanded",e.autosuggestShownForThisInput),(0,a.P$)(o,"aria-autocomplete","both"),(0,a.P$)(o,"aria-activedescendant",e.activeDescendant),u.htmlFor=h="the-compose-box-input-"+e.realm,u.className="sr-only",p.id=f="compose-box-input-description-"+e.realm,p.className="sr-only"},m(s,i){(0,a.$T)(s,o,i),t.refs.textarea=o,o.value=e.rawText,(0,a.$T)(s,c,i),(0,a.$T)(s,u,i),(0,a.R3)(u,d),(0,a.$T)(s,m,i),(0,a.$T)(s,p,i),(0,a.R3)(p,g)},p(t,e){!v&&t.rawText&&(o.value=e.rawText),t.realm&&i!==(i="the-compose-box-input-"+e.realm)&&(o.id=i),t.realm&&n!==(n="compose-box-input compose-box-input-realm-"+e.realm+" svelte-jk36in")&&(o.className=n),t.realm&&r!==(r="compose-box-input-description-"+e.realm)&&(0,a.P$)(o,"aria-describedby",r),t.realm&&l!==(l="compose-autosuggest-list-"+e.realm)&&(0,a.P$)(o,"aria-owns",l),t.autosuggestShownForThisInput&&(0,a.P$)(o,"aria-expanded",e.autosuggestShownForThisInput),t.activeDescendant&&(0,a.P$)(o,"aria-activedescendant",e.activeDescendant),t.realm&&h!==(h="the-compose-box-input-"+e.realm)&&(u.htmlFor=h),t.realm&&f!==(f="compose-box-input-description-"+e.realm)&&(p.id=f)},d(e){e&&(0,a.r2)(o),(0,a.ys)(o,"input",y),(0,a.ys)(o,"focus",b),(0,a.ys)(o,"blur",x),s.destroy(),(0,a.ys)(o,"keydown",_),t.refs.textarea===o&&(t.refs.textarea=null),e&&((0,a.r2)(c),(0,a.r2)(u),(0,a.r2)(m),(0,a.r2)(p))}}}(this,this._state),this.root._oncreate.push((()=>{O.call(this),this.fire("update",{changed:(0,a.lZ)({},this._state),current:this._state})})),t.target){var o=(0,a.pI)(t.target);t.hydrate?this._fragment.l(o):this._fragment.c(),o.forEach(a.r2),this._mount(t.target,t.anchor),(0,a.yl)(this)}}(0,a.f0)(U.prototype,a.uS),(0,a.f0)(U.prototype,H),U.prototype._recompute=function(t,e){(t.$autosuggestData_composeFocused||t.$currentInstance||t.realm)&&this._differs(e.composeFocused,e.composeFocused=function({$autosuggestData_composeFocused:t,$currentInstance:e,realm:o}){return(0,j.U2)(t,[e,o],!1)}(e))&&(t.composeFocused=!0),(t.$autosuggestShown||t.composeFocused)&&this._differs(e.autosuggestShownForThisInput,e.autosuggestShownForThisInput=function({$autosuggestShown:t,composeFocused:e}){return!(!t||!e)}(e))&&(t.autosuggestShownForThisInput=!0),(t.$autosuggestData_autosuggestSelected||t.$currentInstance||t.realm)&&this._differs(e.autosuggestSelected,e.autosuggestSelected=function({$autosuggestData_autosuggestSelected:t,$currentInstance:e,realm:o}){return(0,j.U2)(t,[e,o],0)}(e))&&(t.autosuggestSelected=!0),(t.autosuggestSelected||t.autosuggestShownForThisInput||t.realm)&&this._differs(e.activeDescendant,e.activeDescendant=function({autosuggestSelected:t,autosuggestShownForThisInput:e,realm:o}){return e?`compose-autosuggest-active-item-${o}-${t}`:void 0}(e))&&(t.activeDescendant=!0)};const K=U;var X=o(8552);function Y(t){var e;if((0,a.S1)(this,t),this.store=i.h,this._state=(0,a.f0)(this.store._init(["postingStatus"]),t.data),this.store._add(this,["postingStatus"]),this._recompute({$postingStatus:1,overLimit:1,editId:1},this._state),this._intro=!0,this._handlers.destroy=[a.iT],document.getElementById("svelte-tzlelu-style")||((e=(0,a.az)("style")).id="svelte-tzlelu-style",e.textContent=".compose-box-button-halo.svelte-tzlelu{border-radius:9px;margin:5px 15px 15px 5px;pointer-events:auto}.compose-box-button-halo-sticky.svelte-tzlelu{background-color:var(--compose-button-halo)}.compose-box-button.svelte-tzlelu{grid-area:button;justify-self:right;text-transform:uppercase;position:relative;margin:5px;pointer-events:auto}.compose-box-button-spinner.svelte-tzlelu,.compose-box-button-compose.svelte-tzlelu{position:absolute;display:flex;justify-content:center;align-items:center;z-index:10;top:0;bottom:0;left:0;right:0}.compose-box-button-svg{width:24px;height:24px;fill:var(--button-primary-text)}@media(max-width: 767px){.compose-box-button-halo.svelte-tzlelu{margin:5px}.compose-box-button.svelte-tzlelu{margin:5px}}",(0,a.R3)(document.head,e)),this._fragment=function(t,e){var o,s,i,n,r,l,c,u,d,h,m,p,g={className:"compose-box-button-svg "+(e.$postingStatus?"spin":"hidden"),href:"#fa-spinner"},f=new X.Z({root:t.root,store:t.store,data:g}),v=new X.Z({root:t.root,store:t.store,data:{className:"compose-box-button-svg",href:"#fa-pencil"}});function y(e){t.fire("click",e)}return{c(){o=(0,a.az)("div"),s=(0,a.az)("button"),i=(0,a.az)("span"),n=(0,a.rw)(e.label),l=(0,a.rw)("\n    "),c=(0,a.az)("div"),f._fragment.c(),u=(0,a.rw)("\n\n    "),d=(0,a.az)("div"),v._fragment.c(),this.h()},l(t){o=(0,a.d$)(t,"DIV",{class:!0},!1);var r=(0,a.pI)(o);s=(0,a.d$)(r,"BUTTON",{class:!0,disabled:!0,"aria-label":!0},!1);var h=(0,a.pI)(s);i=(0,a.d$)(h,"SPAN",{class:!0},!1);var m=(0,a.pI)(i);n=(0,a.M4)(m,e.label),m.forEach(a.r2),l=(0,a.M4)(h,"\n    "),c=(0,a.d$)(h,"DIV",{class:!0,"aria-hidden":!0},!1);var p=(0,a.pI)(c);f._fragment.l(p),p.forEach(a.r2),u=(0,a.M4)(h,"\n\n    "),d=(0,a.d$)(h,"DIV",{class:!0,"aria-hidden":!0},!1);var g=(0,a.pI)(d);v._fragment.l(g),g.forEach(a.r2),h.forEach(a.r2),r.forEach(a.r2),this.h()},h(){i.className=r=e.$postingStatus||e.sticky?"hidden":"",c.className="compose-box-button-spinner svelte-tzlelu",(0,a.P$)(c,"aria-hidden","true"),d.className=h="compose-box-button-compose "+(e.sticky?"":"hidden")+" svelte-tzlelu",(0,a.P$)(d,"aria-hidden","true"),(0,a.NH)(s,"click",y),s.className="primary compose-box-button svelte-tzlelu",s.disabled=e.disabled,(0,a.P$)(s,"aria-label",m=e.sticky?"Compose post":e.label),o.className=p="compose-box-button-halo "+(e.sticky?"compose-box-button-halo-sticky":"")+" svelte-tzlelu"},m(t,e){(0,a.$T)(t,o,e),(0,a.R3)(o,s),(0,a.R3)(s,i),(0,a.R3)(i,n),(0,a.R3)(s,l),(0,a.R3)(s,c),f._mount(c,null),(0,a.R3)(s,u),(0,a.R3)(s,d),v._mount(d,null)},p(t,e){t.label&&(0,a.a_)(n,e.label),(t.$postingStatus||t.sticky)&&r!==(r=e.$postingStatus||e.sticky?"hidden":"")&&(i.className=r);var l={};t.$postingStatus&&(l.className="compose-box-button-svg "+(e.$postingStatus?"spin":"hidden")),f._set(l),t.sticky&&h!==(h="compose-box-button-compose "+(e.sticky?"":"hidden")+" svelte-tzlelu")&&(d.className=h),t.disabled&&(s.disabled=e.disabled),(t.sticky||t.label)&&m!==(m=e.sticky?"Compose post":e.label)&&(0,a.P$)(s,"aria-label",m),t.sticky&&p!==(p="compose-box-button-halo "+(e.sticky?"compose-box-button-halo-sticky":"")+" svelte-tzlelu")&&(o.className=p)},d(t){t&&(0,a.r2)(o),f.destroy(),v.destroy(),(0,a.ys)(s,"click",y)}}}(this,this._state),t.target){var o=(0,a.pI)(t.target);t.hydrate?this._fragment.l(o):this._fragment.c(),o.forEach(a.r2),this._mount(t.target,t.anchor),(0,a.yl)(this)}}(0,a.f0)(Y.prototype,a.uS),Y.prototype._recompute=function(t,e){(t.$postingStatus||t.overLimit)&&this._differs(e.disabled,e.disabled=function({$postingStatus:t,overLimit:e}){return t||e}(e))&&(t.disabled=!0),t.editId&&this._differs(e.label,e.label=function({editId:t}){return t?"Edit":"Post"}(e))&&(t.label=!0)};const Q=Y;var G=o(7553),J=o(658);var tt={observe:L.N7,onClickButton(){const{sticky:t}=this.get();t?this.showDialog():this.fire("postAction")},async showDialog(){(await(0,G.B)())()},setupIntersectionObservers(){const{showSticky:t}=this.get();if(!t)return;const e=this.refs.sentinel;this.__stickyObserver=new IntersectionObserver((t=>this.onObserve(t))),this.__stickyObserver.observe(e),this.observe("timelineInitialized",(t=>{t&&!this.__oneShotObserver&&(this.__oneShotObserver=new IntersectionObserver((t=>{this.onObserve(t),this.__oneShotObserver.disconnect(),this.__oneShotObserver=null})),this.__oneShotObserver.observe(e))}),{init:!1})},onObserve(t){this.set({sticky:!t[0].isIntersecting})},teardownIntersectionObservers(){this.__stickyObserver&&(this.__stickyObserver.disconnect(),this.__stickyObserver=null),this.__oneShotObserver&&(this.__oneShotObserver.disconnect(),this.__oneShotObserver=null)}};function et(){this.setupIntersectionObservers()}function ot(){this.teardownIntersectionObservers()}function at(t){var e,o,s,n,r,l,c,u;if((0,a.S1)(this,t),this.store=i.h,this.refs={},this._state=(0,a.f0)((0,a.f0)(this.store._init(["timelineInitialized"]),{sticky:!1}),t.data),this.store._add(this,["timelineInitialized"]),this._recompute({$timelineInitialized:1,showSticky:1,hideAndFadeIn:1},this._state),this._intro=!0,this._handlers.destroy=[ot,a.iT],document.getElementById("svelte-153o6ei-style")||((e=(0,a.az)("style")).id="svelte-153o6ei-style",e.textContent=".compose-box-button-wrapper.svelte-153o6ei{width:-moz-fit-content;width:fit-content;margin-left:auto;display:flex;justify-content:flex-end}.compose-box-button-sticky.svelte-153o6ei{position:-webkit-sticky;position:sticky}.compose-box-button-sticky, .compose-box-button-fixed{z-index:5000;top:calc(var(--fab-gap-top))}",(0,a.R3)(document.head,e)),this._fragment=(o=this,s=this._state,c={overLimit:s.overLimit,sticky:s.sticky,editId:s.editId},(u=new Q({root:o.root,store:o.store,data:c})).on("click",(function(t){o.onClickButton()})),{c(){n=(0,a.az)("div"),r=(0,a.rw)("\n"),l=(0,a.az)("div"),u._fragment.c(),this.h()},l(t){n=(0,a.d$)(t,"DIV",{class:!0},!1),(0,a.pI)(n).forEach(a.r2),r=(0,a.M4)(t,"\n"),l=(0,a.d$)(t,"DIV",{class:!0},!1);var e=(0,a.pI)(l);u._fragment.l(e),e.forEach(a.r2),this.h()},h(){n.className="compose-box-button-sentinel",l.className=s.computedClass+" svelte-153o6ei"},m(t,e){(0,a.$T)(t,n,e),o.refs.sentinel=n,(0,a.$T)(t,r,e),(0,a.$T)(t,l,e),u._mount(l,null),o.refs.wrapper=l},p(t,e){var o={};t.overLimit&&(o.overLimit=e.overLimit),t.sticky&&(o.sticky=e.sticky),t.editId&&(o.editId=e.editId),u._set(o),t.computedClass&&(l.className=e.computedClass+" svelte-153o6ei")},d(t){t&&(0,a.r2)(n),o.refs.sentinel===n&&(o.refs.sentinel=null),t&&((0,a.r2)(r),(0,a.r2)(l)),u.destroy(),o.refs.wrapper===l&&(o.refs.wrapper=null)}}),this.root._oncreate.push((()=>{et.call(this),this.fire("update",{changed:(0,a.lZ)({},this._state),current:this._state})})),t.target){var d=(0,a.pI)(t.target);t.hydrate?this._fragment.l(d):this._fragment.c(),d.forEach(a.r2),this._mount(t.target,t.anchor),(0,a.yl)(this)}}(0,a.f0)(at.prototype,a.uS),(0,a.f0)(at.prototype,tt),at.prototype._recompute=function(t,e){t.$timelineInitialized&&this._differs(e.timelineInitialized,e.timelineInitialized=function({$timelineInitialized:t}){return t}(e))&&(t.timelineInitialized=!0),(t.showSticky||t.hideAndFadeIn)&&this._differs(e.computedClass,e.computedClass=function({showSticky:t,hideAndFadeIn:e}){return(0,J.q)("compose-box-button-wrapper",t&&"compose-box-button-sticky",e)}(e))&&(t.computedClass=!0)};const st=at;var it=o(2755);const nt=(0,q.g)(D.F),rt=(0,q.g)(requestAnimationFrame);var lt={observe:L.N7,setupSyncFromStore(){this.observe("media",(t=>{t=t||[];const{index:e,rawText:o}=this.get(),a=(0,j.U2)(t,[e,"description"],"");o!==a&&(this.set({rawText:a}),rt((()=>T.i.update(this.refs.textarea))));const s=(0,j.U2)(t,[e,"focusX"],0),i=(0,j.U2)(t,[e,"focusY"],0);this.set({focusX:s,focusY:i})}))},setupSyncToStore(){this.observe("rawText",(t=>{nt((()=>{const{realm:e,index:o,media:a}=this.get();a[o].description!==t&&(a[o].description=t,this.store.setComposeData(e,{media:a}),this.store.save())}))}),{init:!1})},setupAutosize(){(0,T.i)(this.refs.textarea)},teardownAutosize(){T.i.destroy(this.refs.textarea)},onDeleteMedia(){const{realm:t,index:e}=this.get();(0,r.h)(t,e)},async onEdit(){const{realm:t,index:e,type:a}=this.get();(await Promise.all([o.e(7539),o.e(7080),o.e(135)]).then(o.bind(o,135)).then((t=>t.default)))(t,e,a)}};function ct(){this.setupSyncFromStore(),this.setupSyncToStore(),this.setupAutosize()}function ut(){this.teardownAutosize()}function dt(t){var e;if((0,a.S1)(this,t),this.store=i.h,this.refs={},this._state=(0,a.f0)({rawText:"",focusX:0,focusY:0},t.data),this._recompute({mediaItem:1,type:1,realm:1,focusX:1,focusY:1},this._state),this._intro=!0,this._handlers.destroy=[ut],document.getElementById("svelte-1k3h21g-style")||((e=(0,a.az)("style")).id="svelte-1k3h21g-style",e.textContent=".compose-media.svelte-1k3h21g{margin:0;padding:0;height:200px;overflow:hidden;flex-direction:column;position:relative;display:flex;background:var(--main-bg)}.compose-media.svelte-1k3h21g img.svelte-1k3h21g{object-fit:contain;flex:1;height:100%;width:100%}.compose-media-alt.svelte-1k3h21g{z-index:10;position:absolute;bottom:0;left:0;right:0;display:flex;justify-content:center}.compose-media-alt-input.svelte-1k3h21g{width:100%;font-size:1.2em;background:var(--alt-input-bg);color:var(--body-text-color);max-height:100px;border:1px solid var(--input-border);resize:none}.compose-media-alt-input.svelte-1k3h21g:focus{background:var(--main-bg)}.compose-media-buttons.svelte-1k3h21g{position:absolute;z-index:10;top:0;right:0;left:0;display:flex;justify-content:space-between;margin:2px}.compose-media-button.svelte-1k3h21g{padding:7px 10px 5px;background:var(--floating-button-bg);border:1px solid var(--button-border)}.compose-media-button.svelte-1k3h21g:hover{background:var(--floating-button-bg-hover)}.compose-media-button.svelte-1k3h21g:active{background:var(--floating-button-bg-active)}.compose-media-button-svg{fill:var(--button-text);width:18px;height:18px}.audio-preview.svelte-1k3h21g{background:var(--audio-bg)}.compose-media-realm-dialog.svelte-1k3h21g{max-height:20vh}@media(max-width: 767px){.compose-media-realm-dialog.svelte-1k3h21g{max-height:15vh}.compose-media-alt-input.svelte-1k3h21g{max-height:7vh}}@media(max-width: 320px){.compose-media-realm-dialog.svelte-1k3h21g .compose-media-alt-input.svelte-1k3h21g{display:none}}",(0,a.R3)(document.head,e)),this._fragment=function(t,e){var o,s,i,n,r,l,c,u,d,h,m,p,g,f,v,y,b,x=!1,_=new X.Z({root:t.root,store:t.store,data:{className:"compose-media-button-svg",href:"#fa-pencil"}});function w(e){t.onEdit()}var k=new X.Z({root:t.root,store:t.store,data:{className:"compose-media-button-svg",href:"#fa-times"}});function S(e){t.onDeleteMedia()}function I(){x=!0,t.set({rawText:m.value}),x=!1}return{c(){o=(0,a.az)("li"),s=(0,a.az)("img"),n=(0,a.rw)("\n  "),r=(0,a.az)("div"),l=(0,a.az)("button"),_._fragment.c(),c=(0,a.rw)("\n    "),u=(0,a.az)("button"),k._fragment.c(),d=(0,a.rw)("\n  "),h=(0,a.az)("div"),m=(0,a.az)("textarea"),g=(0,a.rw)("\n    "),f=(0,a.az)("label"),v=(0,a.rw)("Describe for visually impaired (image, video) or auditorily impaired (audio, video) people"),this.h()},l(t){o=(0,a.d$)(t,"LI",{class:!0,"aria-label":!0},!1);var e=(0,a.pI)(o);s=(0,a.d$)(e,"IMG",{alt:!0,class:!0,style:!0,src:!0,"aria-hidden":!0},!1),(0,a.pI)(s).forEach(a.r2),n=(0,a.M4)(e,"\n  "),r=(0,a.d$)(e,"DIV",{class:!0},!1);var i=(0,a.pI)(r);l=(0,a.d$)(i,"BUTTON",{class:!0,"aria-label":!0,title:!0},!1);var p=(0,a.pI)(l);_._fragment.l(p),p.forEach(a.r2),c=(0,a.M4)(i,"\n    "),u=(0,a.d$)(i,"BUTTON",{class:!0,"aria-label":!0,title:!0},!1);var y=(0,a.pI)(u);k._fragment.l(y),y.forEach(a.r2),i.forEach(a.r2),d=(0,a.M4)(e,"\n  "),h=(0,a.d$)(e,"DIV",{class:!0},!1);var b=(0,a.pI)(h);m=(0,a.d$)(b,"TEXTAREA",{id:!0,class:!0,placeholder:!0},!1),(0,a.pI)(m).forEach(a.r2),g=(0,a.M4)(b,"\n    "),f=(0,a.d$)(b,"LABEL",{for:!0,class:!0},!1);var x=(0,a.pI)(f);v=(0,a.M4)(x,"Describe for visually impaired (image, video) or auditorily impaired (audio, video) people"),x.forEach(a.r2),b.forEach(a.r2),e.forEach(a.r2),this.h()},h(){s.alt="",s.className=i=("audio"===e.type?"audio-preview":"")+" svelte-1k3h21g",(0,a.A_)(s,"object-position",e.objectPosition),s.src=e.previewSrc,(0,a.P$)(s,"aria-hidden","true"),(0,a.NH)(l,"click",w),l.className="compose-media-button compose-media-focal-button svelte-1k3h21g",(0,a.P$)(l,"aria-label","Edit"),l.title="Edit",(0,a.NH)(u,"click",S),u.className="compose-media-button compose-media-delete-button svelte-1k3h21g",(0,a.P$)(u,"aria-label","Delete"),u.title="Delete",r.className="compose-media-buttons svelte-1k3h21g",(0,a.NH)(m,"input",I),m.id=p="compose-media-input-"+e.uuid,m.className="compose-media-alt-input svelte-1k3h21g",m.placeholder="Description",f.htmlFor=y="compose-media-input-"+e.uuid,f.className="sr-only",h.className="compose-media-alt svelte-1k3h21g",o.className=b="compose-media compose-media-realm-"+e.realm+" svelte-1k3h21g",(0,a.P$)(o,"aria-label",e.shortName)},m(i,p){(0,a.$T)(i,o,p),(0,a.R3)(o,s),(0,a.R3)(o,n),(0,a.R3)(o,r),(0,a.R3)(r,l),_._mount(l,null),(0,a.R3)(r,c),(0,a.R3)(r,u),k._mount(u,null),(0,a.R3)(o,d),(0,a.R3)(o,h),(0,a.R3)(h,m),t.refs.textarea=m,m.value=e.rawText,(0,a.R3)(h,g),(0,a.R3)(h,f),(0,a.R3)(f,v)},p(t,e){t.type&&i!==(i=("audio"===e.type?"audio-preview":"")+" svelte-1k3h21g")&&(s.className=i),t.objectPosition&&(0,a.A_)(s,"object-position",e.objectPosition),t.previewSrc&&(s.src=e.previewSrc),!x&&t.rawText&&(m.value=e.rawText),t.uuid&&p!==(p="compose-media-input-"+e.uuid)&&(m.id=p),t.uuid&&y!==(y="compose-media-input-"+e.uuid)&&(f.htmlFor=y),t.realm&&b!==(b="compose-media compose-media-realm-"+e.realm+" svelte-1k3h21g")&&(o.className=b),t.shortName&&(0,a.P$)(o,"aria-label",e.shortName)},d(e){e&&(0,a.r2)(o),_.destroy(),(0,a.ys)(l,"click",w),k.destroy(),(0,a.ys)(u,"click",S),(0,a.ys)(m,"input",I),t.refs.textarea===m&&(t.refs.textarea=null)}}}(this,this._state),this.root._oncreate.push((()=>{ct.call(this),this.fire("update",{changed:(0,a.lZ)({},this._state),current:this._state})})),t.target){var o=(0,a.pI)(t.target);t.hydrate?this._fragment.l(o):this._fragment.c(),o.forEach(a.r2),this._mount(t.target,t.anchor),(0,a.yl)(this)}}(0,a.f0)(dt.prototype,a.uS),(0,a.f0)(dt.prototype,lt),dt.prototype._recompute=function(t,e){t.mediaItem&&(this._differs(e.type,e.type=function({mediaItem:t}){return t.data.type}(e))&&(t.type=!0),this._differs(e.shortName,e.shortName=function({mediaItem:t}){return(0,j.U2)(t,["file","name"])||(0,j.U2)(t,["description"])||"media"}(e))&&(t.shortName=!0)),(t.mediaItem||t.type)&&this._differs(e.previewSrc,e.previewSrc=function({mediaItem:t,type:e}){return"audio"===e?l.Pf:t.data.preview_url}(e))&&(t.previewSrc=!0),(t.realm||t.mediaItem)&&this._differs(e.uuid,e.uuid=function({realm:t,mediaItem:e}){return`${t}-${e.data.id}`}(e))&&(t.uuid=!0),(t.focusX||t.focusY)&&this._differs(e.objectPosition,e.objectPosition=function({focusX:t,focusY:e}){return t||e?`${(0,it.i)(t)}% ${100-(0,it.i)(e)}%`:"center center"}(e))&&(t.objectPosition=!0)};const ht=dt;function mt(t,e,o){const a=Object.create(t);return a.mediaItem=e[o],a.index=o,a}function pt(t,e){for(var o,s=e.media,i=[],n=0;n<s.length;n+=1)i[n]=gt(t,mt(e,s,n));return{c(){o=(0,a.az)("ul");for(var t=0;t<i.length;t+=1)i[t].c();this.h()},l(t){o=(0,a.d$)(t,"UL",{class:!0,"aria-label":!0,style:!0},!1);for(var e=(0,a.pI)(o),s=0;s<i.length;s+=1)i[s].l(e);e.forEach(a.r2),this.h()},h(){o.className="compose-media-container svelte-vqode8",(0,a.P$)(o,"aria-label","Media uploads"),(0,a.A_)(o,"grid-template-columns","repeat("+e.Math.min(e.media.length,4)+", 1fr)")},m(t,e){(0,a.$T)(t,o,e);for(var s=0;s<i.length;s+=1)i[s].m(o,null)},p(e,n){if(e.realm||e.media){s=n.media;for(var r=0;r<s.length;r+=1){const a=mt(n,s,r);i[r]?i[r].p(e,a):(i[r]=gt(t,a),i[r].c(),i[r].m(o,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=s.length}(e.Math||e.media)&&(0,a.A_)(o,"grid-template-columns","repeat("+n.Math.min(n.media.length,4)+", 1fr)")},d(t){t&&(0,a.r2)(o),(0,a.kw)(i,t)}}}function gt(t,e){var o={realm:e.realm,mediaItem:e.mediaItem,index:e.index,media:e.media},a=new ht({root:t.root,store:t.store,data:o});return{c(){a._fragment.c()},l(t){a._fragment.l(t)},m(t,e){a._mount(t,e)},p(t,e){var o={};t.realm&&(o.realm=e.realm),t.media&&(o.mediaItem=e.mediaItem),t.media&&(o.media=e.media),a._set(o)},d(t){a.destroy(t)}}}function ft(t){var e,o,s,n,r;if((0,a.S1)(this,t),this.store=i.h,this._state=(0,a.f0)({Math},t.data),this._intro=!0,document.getElementById("svelte-vqode8-style")||((e=(0,a.az)("style")).id="svelte-vqode8-style",e.textContent=".compose-media-container.svelte-vqode8{grid-area:media;list-style:none;display:grid;grid-gap:5px;align-items:center;justify-content:center;margin:10px 0 0 0;background:var(--form-bg);padding:5px;border-radius:4px}",(0,a.R3)(document.head,e)),this._fragment=(o=this,s=this._state,r=s.media.length&&pt(o,s),{c(){r&&r.c(),n=(0,a.Yr)()},l(t){r&&r.l(t),n=(0,a.Yr)()},m(t,e){r&&r.m(t,e),(0,a.$T)(t,n,e)},p(t,e){e.media.length?r?r.p(t,e):((r=pt(o,e)).c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},d(t){r&&r.d(t),t&&(0,a.r2)(n)}}),t.target){var l=(0,a.pI)(t.target);t.hydrate?this._fragment.l(l):this._fragment.c(),l.forEach(a.r2),this._mount(t.target,t.anchor),(0,a.yl)(this)}}(0,a.f0)(ft.prototype,a.uS);const vt=ft,yt=(0,q.g)(D.F);var bt={observe:L.N7,setupSyncFromStore(){this.observe("contentWarning",(t=>{this.set({rawText:t})}))},setupSyncToStore(){const{realm:t}=this.get();this.observe("rawText",(e=>{yt((()=>{this.store.setComposeData(t,{sensitive:!!e,contentWarning:e}),this.store.save()}))}),{init:!1})}};function xt(){this.setupSyncFromStore(),this.setupSyncToStore()}function _t(t){var e;if((0,a.S1)(this,t),this.store=i.h,this._state=(0,a.f0)({rawText:""},t.data),this._intro=!0,document.getElementById("svelte-7v2gf8-style")||((e=(0,a.az)("style")).id="svelte-7v2gf8-style",e.textContent=".content-warning-input.svelte-7v2gf8{font-size:1.2em;margin:10px 0 0 5px;padding:10px;border:1px solid var(--input-border);width:calc(100% - 5px)}",(0,a.R3)(document.head,e)),this._fragment=function(t,e){var o,s=!1;function i(){s=!0,t.set({rawText:o.value}),s=!1}return{c(){o=(0,a.az)("input"),this.h()},l(t){o=(0,a.d$)(t,"INPUT",{class:!0,type:!0,placeholder:!0,"aria-label":!0},!1),(0,a.pI)(o).forEach(a.r2),this.h()},h(){(0,a.NH)(o,"input",i),o.className="content-warning-input svelte-7v2gf8",(0,a.P$)(o,"type","text"),o.placeholder="Content warning",(0,a.P$)(o,"aria-label","Content warning")},m(t,s){(0,a.$T)(t,o,s),o.value=e.rawText},p(t,e){!s&&t.rawText&&(o.value=e.rawText)},d(t){t&&(0,a.r2)(o),(0,a.ys)(o,"input",i)}}}(this,this._state),this.root._oncreate.push((()=>{xt.call(this),this.fire("update",{changed:(0,a.lZ)({},this._state),current:this._state})})),t.target){var o=(0,a.pI)(t.target);t.hydrate?this._fragment.l(o):this._fragment.c(),o.forEach(a.r2),this._mount(t.target,t.anchor),(0,a.yl)(this)}}(0,a.f0)(_t.prototype,a.uS),(0,a.f0)(_t.prototype,bt);const wt=_t;o(2984);var kt={async onFileDrop(t){const{files:e}=t,{realm:o}=this.get();for(const a of e)await(0,r.m)(o,a)}};function St(){this.onFileDrop=this.onFileDrop.bind(this),this.refs.fileDrop.addEventListener("filedrop",this.onFileDrop)}function It(){this.refs.fileDrop.removeEventListener("filedrop",this.onFileDRop)}function $t(t){var e,o,s,i,n,r,c,u,d,h,m,p,g,f,v;if((0,a.S1)(this,t),this.refs={},this._state=(0,a.f0)({mediaAccept:l.ZG},t.data),this._intro=!0,this._handlers.destroy=[It],this._slotted=t.slots||{},document.getElementById("svelte-gx8id0-style")||((e=(0,a.az)("style")).id="svelte-gx8id0-style",e.textContent=".file-drop.svelte-gx8id0{display:block;position:relative;max-width:100%;width:100%}.file-drop-info.svelte-gx8id0{display:none;pointer-events:none;position:absolute;top:0;bottom:0;left:0;right:0;z-index:6000;justify-content:center;align-items:center}.file-drop-info-text.svelte-gx8id0{font-size:1.2em;color:var(--button-text);padding:10px 20px;border:2px dashed var(--button-text);border-radius:6px}.file-drop-realm-dialog.svelte-gx8id0{max-height:100%;overflow-y:auto;overflow-x:hidden;scrollbar-width:none;-ms-overflow-style:none}.file-drop-realm-dialog.svelte-gx8id0::-webkit-scrollbar{display:none}.file-drop.drop-valid .file-drop-info, .file-drop.drop-invalid .file-drop-info{display:flex;background:var(--file-drop-mask)}.file-drop.drop-valid .file-drop-info-text-invalid, .file-drop.drop-invalid .file-drop-info-text-valid{display:none}",(0,a.R3)(document.head,e)),this._fragment=(o=this,s=this._state,v=o._slotted.default,{c(){i=(0,a.az)("file-drop"),n=(0,a.az)("div"),r=(0,a.az)("div"),c=(0,a.az)("span"),u=(0,a.rw)("Drop to upload"),d=(0,a.rw)("\n      "),h=(0,a.az)("span"),m=(0,a.rw)("Invalid file type"),p=(0,a.rw)("\n  "),this.h()},l(t){i=(0,a.d$)(t,"FILE-DROP",{multiple:!0,class:!0,accept:!0},!1);var e=(0,a.pI)(i);n=(0,a.d$)(e,"DIV",{class:!0},!1);var o=(0,a.pI)(n);r=(0,a.d$)(o,"DIV",{class:!0},!1);var s=(0,a.pI)(r);c=(0,a.d$)(s,"SPAN",{class:!0},!1);var l=(0,a.pI)(c);u=(0,a.M4)(l,"Drop to upload"),l.forEach(a.r2),d=(0,a.M4)(s,"\n      "),h=(0,a.d$)(s,"SPAN",{class:!0},!1);var g=(0,a.pI)(h);m=(0,a.M4)(g,"Invalid file type"),g.forEach(a.r2),s.forEach(a.r2),o.forEach(a.r2),p=(0,a.M4)(e,"\n  "),e.forEach(a.r2),this.h()},h(){c.className="file-drop-info-text-valid svelte-gx8id0",h.className="file-drop-info-text-invalid svelte-gx8id0",r.className="file-drop-info-text svelte-gx8id0",n.className="file-drop-info svelte-gx8id0",(0,a.E_)(i,"multiple",!0),i.className=f="file-drop file-drop-realm-"+s.realm+" svelte-gx8id0",(0,a.E_)(i,"accept",s.mediaAccept)},m(t,e){(0,a.$T)(t,i,e),(0,a.R3)(i,n),(0,a.R3)(n,r),(0,a.R3)(r,c),(0,a.R3)(c,u),(0,a.R3)(r,d),(0,a.R3)(r,h),(0,a.R3)(h,m),(0,a.R3)(i,p),v&&((0,a.R3)(i,g||(g=(0,a.Yr)())),(0,a.R3)(i,v)),o.refs.fileDrop=i},p(t,e){t.realm&&f!==(f="file-drop file-drop-realm-"+e.realm+" svelte-gx8id0")&&(i.className=f),t.mediaAccept&&(0,a.E_)(i,"accept",e.mediaAccept)},d(t){t&&(0,a.r2)(i),v&&(0,a.PD)(g,v),o.refs.fileDrop===i&&(o.refs.fileDrop=null)}}),this.root._oncreate.push((()=>{St.call(this),this.fire("update",{changed:(0,a.lZ)({},this._state),current:this._state})})),t.target){var y=(0,a.pI)(t.target);t.hydrate?this._fragment.l(y):this._fragment.c(),y.forEach(a.r2),this._mount(t.target,t.anchor),(0,a.yl)(this)}}(0,a.f0)($t.prototype,a.uS),(0,a.f0)($t.prototype,kt);const zt=$t;var Tt=o(9641);function Dt({items:t,type:e,$omitEmojiInDisplayNames:o}){return t.map(((a,s)=>function(t,e,o,a){const s=a[o];let i;if("emoji"===t)i=s.name||[s.unicode].concat(s.shortcodes).join(", ");else if("hashtag"===t)i=`#${s.name}`;else{let t=s.display_name||s.username;const o=s.emojis||[];t=e&&(0,Tt.S)(t,o)||t,i=`${t} @${s.acct}`}return i}(e,o,s,t)))}var Ft={onClick(t,e){t.preventDefault(),t.stopPropagation(),this.fire("click",e)}};function Ct(t){const{component:e,ctx:o}=this._svelte;e.onClick(t,o.item)}function Et(t,e,o){const a=Object.create(t);return a.item=e[o],a.i=o,a}function At(t,e){var o,s,i,n=e.item.shortcodes.map((t=>`:${t}:`)).join(" ");function r(t){return t.item.url?Mt:Pt}var l=r(e),c=l(t,e);return{c(){c.c(),o=(0,a.rw)("\n          "),s=(0,a.az)("span"),i=(0,a.rw)(n),this.h()},l(t){c.l(t),o=(0,a.M4)(t,"\n          "),s=(0,a.d$)(t,"SPAN",{class:!0},!1);var e=(0,a.pI)(s);i=(0,a.M4)(e,n),e.forEach(a.r2),this.h()},h(){s.className="compose-autosuggest-list-display-name compose-autosuggest-list-display-name-single svelte-16d4h1h"},m(t,e){c.m(t,e),(0,a.$T)(t,o,e),(0,a.$T)(t,s,e),(0,a.R3)(s,i)},p(e,s){l===(l=r(s))&&c?c.p(e,s):(c.d(1),(c=l(t,s)).c(),c.m(o.parentNode,o)),e.items&&n!==(n=s.item.shortcodes.map((t=>`:${t}:`)).join(" "))&&(0,a.a_)(i,n)},d(t){c.d(t),t&&((0,a.r2)(o),(0,a.r2)(s))}}}function Rt(t,e){var o,s,i,n=e.item.name,r=new X.Z({root:t.root,store:t.store,data:{href:"#fa-hashtag",ariaHidden:!0,className:"compose-autosuggest-list-item-icon"}});return{c(){r._fragment.c(),o=(0,a.rw)("\n          "),s=(0,a.az)("span"),i=(0,a.rw)(n),this.h()},l(t){r._fragment.l(t),o=(0,a.M4)(t,"\n          "),s=(0,a.d$)(t,"SPAN",{class:!0},!1);var e=(0,a.pI)(s);i=(0,a.M4)(e,n),e.forEach(a.r2),this.h()},h(){s.className="compose-autosuggest-list-display-name compose-autosuggest-list-display-name-single svelte-16d4h1h"},m(t,e){r._mount(t,e),(0,a.$T)(t,o,e),(0,a.$T)(t,s,e),(0,a.R3)(s,i)},p(t,e){t.items&&n!==(n=e.item.name)&&(0,a.a_)(i,n)},d(t){r.destroy(t),t&&((0,a.r2)(o),(0,a.r2)(s))}}}function Nt(t,e){var o,s,i,n,r,l,c="@"+e.item.acct,u={size:e.$isVeryTinyMobileSize?"extra-small":"small",account:e.item},d=new _.Z({root:t.root,store:t.store,data:u}),h={account:e.item},m=new w.Z({root:t.root,store:t.store,data:h});return{c(){o=(0,a.az)("div"),d._fragment.c(),s=(0,a.rw)("\n          "),i=(0,a.az)("span"),m._fragment.c(),n=(0,a.rw)("\n          "),r=(0,a.az)("span"),l=(0,a.rw)(c),this.h()},l(t){o=(0,a.d$)(t,"DIV",{class:!0},!1);var e=(0,a.pI)(o);d._fragment.l(e),e.forEach(a.r2),s=(0,a.M4)(t,"\n          "),i=(0,a.d$)(t,"SPAN",{class:!0},!1);var u=(0,a.pI)(i);m._fragment.l(u),u.forEach(a.r2),n=(0,a.M4)(t,"\n          "),r=(0,a.d$)(t,"SPAN",{class:!0},!1);var h=(0,a.pI)(r);l=(0,a.M4)(h,c),h.forEach(a.r2),this.h()},h(){o.className="compose-autosuggest-list-item-avatar svelte-16d4h1h",i.className="compose-autosuggest-list-display-name svelte-16d4h1h",r.className="compose-autosuggest-list-username svelte-16d4h1h"},m(t,e){(0,a.$T)(t,o,e),d._mount(o,null),(0,a.$T)(t,s,e),(0,a.$T)(t,i,e),m._mount(i,null),(0,a.$T)(t,n,e),(0,a.$T)(t,r,e),(0,a.R3)(r,l)},p(t,e){var o={};t.$isVeryTinyMobileSize&&(o.size=e.$isVeryTinyMobileSize?"extra-small":"small"),t.items&&(o.account=e.item),d._set(o);var s={};t.items&&(s.account=e.item),m._set(s),t.items&&c!==(c="@"+e.item.acct)&&(0,a.a_)(l,c)},d(t){t&&(0,a.r2)(o),d.destroy(),t&&((0,a.r2)(s),(0,a.r2)(i)),m.destroy(),t&&((0,a.r2)(n),(0,a.r2)(r))}}}function Pt(t,e){var o,s,i=e.item.unicode;return{c(){o=(0,a.az)("span"),s=(0,a.rw)(i),this.h()},l(t){o=(0,a.d$)(t,"SPAN",{class:!0},!1);var e=(0,a.pI)(o);s=(0,a.M4)(e,i),e.forEach(a.r2),this.h()},h(){o.className="compose-autosuggest-list-item-icon compose-autosuggest-list-item-native-emoji svelte-16d4h1h"},m(t,e){(0,a.$T)(t,o,e),(0,a.R3)(o,s)},p(t,e){t.items&&i!==(i=e.item.unicode)&&(0,a.a_)(s,i)},d(t){t&&(0,a.r2)(o)}}}function Mt(t,e){var o,s;return{c(){o=(0,a.az)("img"),this.h()},l(t){o=(0,a.d$)(t,"IMG",{src:!0,class:!0,alt:!0,"aria-hidden":!0},!1),(0,a.pI)(o).forEach(a.r2),this.h()},h(){o.src=s=e.item.url,o.className="compose-autosuggest-list-item-icon svelte-16d4h1h",o.alt="",(0,a.P$)(o,"aria-hidden","true")},m(t,e){(0,a.$T)(t,o,e)},p(t,e){t.items&&s!==(s=e.item.url)&&(o.src=s)},d(t){t&&(0,a.r2)(o)}}}function Lt(t,e,o){var s,i,n,r,l,c,u,d,h,m=o.ariaLabels[o.i];function p(t){return"account"===t.type?Nt:"hashtag"===t.type?Rt:At}var g=p(o),f=g(t,o);return{key:e,first:null,c(){s=(0,a.az)("li"),i=(0,a.az)("span"),n=(0,a.rw)(m),r=(0,a.rw)("\n      "),l=(0,a.az)("div"),f.c(),c=(0,a.rw)("\n  "),this.h()},l(t){s=(0,a.d$)(t,"LI",{id:!0,class:!0,role:!0,"aria-selected":!0},!1);var e=(0,a.pI)(s);i=(0,a.d$)(e,"SPAN",{class:!0},!1);var o=(0,a.pI)(i);n=(0,a.M4)(o,m),o.forEach(a.r2),r=(0,a.M4)(e,"\n      "),l=(0,a.d$)(e,"DIV",{class:!0,"aria-hidden":!0},!1);var u=(0,a.pI)(l);f.l(u),u.forEach(a.r2),c=(0,a.M4)(e,"\n  "),e.forEach(a.r2),this.h()},h(){i.className="sr-only",l.className="compose-autosuggest-list-grid svelte-16d4h1h",(0,a.P$)(l,"aria-hidden","true"),s._svelte={component:t,ctx:o},(0,a.NH)(s,"click",Ct),s.id=u="compose-autosuggest-active-item-"+o.realm+"-"+o.i,s.className=d="compose-autosuggest-list-item "+(o.i===o.selected?"selected":"")+" svelte-16d4h1h",(0,a.P$)(s,"role","option"),(0,a.P$)(s,"aria-selected",h=o.i===o.selected),this.first=s},m(t,e){(0,a.$T)(t,s,e),(0,a.R3)(s,i),(0,a.R3)(i,n),(0,a.R3)(s,r),(0,a.R3)(s,l),f.m(l,null),(0,a.R3)(s,c)},p(e,i){o=i,(e.ariaLabels||e.items)&&m!==(m=o.ariaLabels[o.i])&&(0,a.a_)(n,m),g===(g=p(o))&&f?f.p(e,o):(f.d(1),(f=g(t,o)).c(),f.m(l,null)),s._svelte.ctx=o,(e.realm||e.items)&&u!==(u="compose-autosuggest-active-item-"+o.realm+"-"+o.i)&&(s.id=u),(e.items||e.selected)&&d!==(d="compose-autosuggest-list-item "+(o.i===o.selected?"selected":"")+" svelte-16d4h1h")&&(s.className=d),(e.items||e.selected)&&h!==(h=o.i===o.selected)&&(0,a.P$)(s,"aria-selected",h)},d(t){t&&(0,a.r2)(s),f.d(),(0,a.ys)(s,"click",Ct)}}}function jt(t){var e;if((0,a.S1)(this,t),this.store=i.h,this._state=(0,a.f0)(this.store._init(["omitEmojiInDisplayNames","isVeryTinyMobileSize"]),t.data),this.store._add(this,["omitEmojiInDisplayNames","isVeryTinyMobileSize"]),this._recompute({items:1,type:1,$omitEmojiInDisplayNames:1},this._state),this._intro=!0,this._handlers.destroy=[a.iT],document.getElementById("svelte-16d4h1h-style")||((e=(0,a.az)("style")).id="svelte-16d4h1h-style",e.textContent='.compose-autosuggest-list.svelte-16d4h1h{list-style:none;width:100%;border-radius:2px;box-sizing:border-box;border:1px solid var(--compose-autosuggest-outline)}.compose-autosuggest-list-item.svelte-16d4h1h{border-bottom:1px solid var(--compose-autosuggest-outline);display:flex;padding:10px;background:var(--settings-list-item-bg);margin:0;flex:1;cursor:pointer}.compose-autosuggest-list-item.svelte-16d4h1h:last-child{border-bottom:none}.compose-autosuggest-list-grid.svelte-16d4h1h{display:grid;width:100%;grid-template-areas:"icon     display-name"\n                         "icon     username";grid-template-columns:min-content 1fr;grid-column-gap:10px;grid-row-gap:5px}.compose-autosuggest-list-item-avatar{grid-area:icon}.compose-autosuggest-list-item-icon{grid-area:icon;width:48px;height:48px;object-fit:contain;fill:var(--deemphasized-text-color)}.compose-autosuggest-list-item-native-emoji.svelte-16d4h1h{font-family:CountryFlagEmojiPolyfill, PinaforeEmoji, \'Noto Color Emoji\';font-size:32px;line-height:1;display:flex;justify-content:center;align-items:center}.compose-autosuggest-list-display-name.svelte-16d4h1h{grid-area:display-name;font-size:1.1em;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;min-width:0;text-align:left}.compose-autosuggest-list-display-name-single.svelte-16d4h1h{grid-row:1 / 3;align-self:center}.compose-autosuggest-list-username.svelte-16d4h1h{grid-area:username;font-size:1em;color:var(--deemphasized-text-color);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:left}.compose-autosuggest-list-item.svelte-16d4h1h:hover,.compose-autosuggest-list-item.selected.svelte-16d4h1h{background:var(--compose-autosuggest-item-hover)}.compose-autosuggest-list-item.svelte-16d4h1h:active{background:var(--compose-autosuggest-item-active)}@media(max-width: 320px){.compose-autosuggest-list-item.svelte-16d4h1h{padding:5px}.compose-autosuggest-list-grid.svelte-16d4h1h{grid-column-gap:5px}.compose-autosuggest-list-item-icon{width:24px;height:24px}.compose-autosuggest-list-item-native-emoji.svelte-16d4h1h{font-size:18px}}',(0,a.R3)(document.head,e)),this._fragment=function(t,e){var o,s,i=[],n=(0,a.L7)(),r=e.items;const l=t=>t.item.shortcodes?`emoji-${t.item.unicode||t.item.name}`:t.item.id?`account-${t.item.id}`:`hashtag-${t.item.name}`;for(var c=0;c<r.length;c+=1){let o=Et(e,r,c),a=l(o);i[c]=n[a]=Lt(t,a,o)}return{c(){for(o=(0,a.az)("ul"),c=0;c<i.length;c+=1)i[c].c();this.h()},l(t){o=(0,a.d$)(t,"UL",{id:!0,class:!0,role:!0},!1);var e=(0,a.pI)(o);for(c=0;c<i.length;c+=1)i[c].l(e);e.forEach(a.r2),this.h()},h(){o.id=s="compose-autosuggest-list-"+e.realm,o.className="compose-autosuggest-list svelte-16d4h1h",(0,a.P$)(o,"role","listbox")},m(t,e){for((0,a.$T)(t,o,e),c=0;c<i.length;c+=1)i[c].m(o,null)},p(e,r){const c=r.items;i=(0,a.$q)(i,t,e,l,1,r,c,n,o,a.pp,Lt,"m",null,Et),e.realm&&s!==(s="compose-autosuggest-list-"+r.realm)&&(o.id=s)},d(t){for(t&&(0,a.r2)(o),c=0;c<i.length;c+=1)i[c].d()}}}(this,this._state),t.target){var o=(0,a.pI)(t.target);t.hydrate?this._fragment.l(o):this._fragment.c(),o.forEach(a.r2),this._mount(t.target,t.anchor),(0,a.yl)(this)}}(0,a.f0)(jt.prototype,a.uS),(0,a.f0)(jt.prototype,Ft),jt.prototype._recompute=function(t,e){(t.items||t.type||t.$omitEmojiInDisplayNames)&&this._differs(e.ariaLabels,e.ariaLabels=Dt(e))&&(t.ariaLabels=!0)};const Bt=jt;var qt={observe:L.N7,once:function(t,e){const o=this.on(t,(t=>{o.cancel(),e(t)}))},onClick(t){this.store.setForCurrentAutosuggest({autosuggestSelecting:!0}),this.fire("autosuggestItemSelected"),M(t)}};function Wt(){this._promiseChain=Promise.resolve(),this.observe("shouldBeShown",(t=>{this._promiseChain=this._promiseChain.then((()=>{if(!t)return Promise.race([new Promise((t=>setTimeout(t,200))),new Promise((t=>this.once("autosuggestItemSelected",t)))])})).then((()=>{this.set({shown:t}),this.store.setForCurrentAutosuggest({autosuggestSelecting:!1})}))}))}function Vt(t){var e,o,s,n,r,l,c;if((0,a.S1)(this,t),this.store=i.h,this._state=(0,a.f0)((0,a.f0)(this.store._init(["autosuggestData_composeSelectionStart","currentInstance","autosuggestData_composeFocused","autosuggestData_autosuggestSearchResults","autosuggestData_autosuggestType","autosuggestData_autosuggestSelected","autosuggestShown"]),{shown:!1,top:0}),t.data),this.store._add(this,["autosuggestData_composeSelectionStart","currentInstance","autosuggestData_composeFocused","autosuggestData_autosuggestSearchResults","autosuggestData_autosuggestType","autosuggestData_autosuggestSelected","autosuggestShown"]),this._recompute({$autosuggestData_composeSelectionStart:1,$currentInstance:1,realm:1,$autosuggestData_composeFocused:1,$autosuggestData_autosuggestSearchResults:1,$autosuggestData_autosuggestType:1,$autosuggestData_autosuggestSelected:1,$autosuggestShown:1,composeFocused:1},this._state),this._intro=!0,this._handlers.destroy=[a.iT],document.getElementById("svelte-9dxfw1-style")||((e=(0,a.az)("style")).id="svelte-9dxfw1-style",e.textContent=".compose-autosuggest.svelte-9dxfw1{position:absolute;z-index:90;--autosuggest-input-left:0;--autosuggest-left-offset:5px;left:calc(var(--autosuggest-input-left) + var(--autosuggest-left-offset))}.compose-autosuggest.not-shown.svelte-9dxfw1{display:none}@media(min-width: 480px){.compose-autosuggest.svelte-9dxfw1{min-width:400px;max-width:calc(100% - 20px)}}@media(max-width: 479px){.compose-autosuggest.svelte-9dxfw1{--autosuggest-left-offset:10px;left:var(--autosuggest-left-offset);width:calc(100vw - (2 * var(--autosuggest-left-offset)))}}@media(max-width: 240px){.compose-autosuggest.svelte-9dxfw1{--autosuggest-left-offset:5px}.compose-autosuggest.is-dialog.svelte-9dxfw1{--autosuggest-left-offset:10px}}",(0,a.R3)(document.head,e)),this._fragment=(o=this,s=this._state,l={items:s.autosuggestSearchResults,type:s.autosuggestType,selected:s.autosuggestSelected,realm:s.realm},(c=new Bt({root:o.root,store:o.store,data:l})).on("click",(function(t){o.onClick(t)})),{c(){n=(0,a.az)("div"),c._fragment.c(),this.h()},l(t){n=(0,a.d$)(t,"DIV",{class:!0,style:!0},!1);var e=(0,a.pI)(n);c._fragment.l(e),e.forEach(a.r2),this.h()},h(){n.className=r="compose-autosuggest "+(s.shown?"":"not-shown")+" "+("dialog"===s.realm?"is-dialog":"")+" svelte-9dxfw1",(0,a.A_)(n,"top",s.top+"px"),(0,a.A_)(n,"--autosuggest-input-left",s.left+"px")},m(t,e){(0,a.$T)(t,n,e),c._mount(n,null)},p(t,e){var o={};t.autosuggestSearchResults&&(o.items=e.autosuggestSearchResults),t.autosuggestType&&(o.type=e.autosuggestType),t.autosuggestSelected&&(o.selected=e.autosuggestSelected),t.realm&&(o.realm=e.realm),c._set(o),(t.shown||t.realm)&&r!==(r="compose-autosuggest "+(e.shown?"":"not-shown")+" "+("dialog"===e.realm?"is-dialog":"")+" svelte-9dxfw1")&&(n.className=r),t.top&&(0,a.A_)(n,"top",e.top+"px"),t.left&&(0,a.A_)(n,"--autosuggest-input-left",e.left+"px")},d(t){t&&(0,a.r2)(n),c.destroy()}}),this.root._oncreate.push((()=>{Wt.call(this),this.fire("update",{changed:(0,a.lZ)({},this._state),current:this._state})})),t.target){var u=(0,a.pI)(t.target);t.hydrate?this._fragment.l(u):this._fragment.c(),u.forEach(a.r2),this._mount(t.target,t.anchor),(0,a.yl)(this)}}(0,a.f0)(Vt.prototype,a.uS),(0,a.f0)(Vt.prototype,qt),Vt.prototype._recompute=function(t,e){(t.$autosuggestData_composeSelectionStart||t.$currentInstance||t.realm)&&this._differs(e.composeSelectionStart,e.composeSelectionStart=function({$autosuggestData_composeSelectionStart:t,$currentInstance:e,realm:o}){return(0,j.U2)(t,[e,o],0)}(e))&&(t.composeSelectionStart=!0),(t.$autosuggestData_composeFocused||t.$currentInstance||t.realm)&&this._differs(e.composeFocused,e.composeFocused=function({$autosuggestData_composeFocused:t,$currentInstance:e,realm:o}){return(0,j.U2)(t,[e,o],!1)}(e))&&(t.composeFocused=!0),(t.$autosuggestData_autosuggestSearchResults||t.$currentInstance||t.realm)&&this._differs(e.autosuggestSearchResults,e.autosuggestSearchResults=function({$autosuggestData_autosuggestSearchResults:t,$currentInstance:e,realm:o}){return(0,j.U2)(t,[e,o],[])}(e))&&(t.autosuggestSearchResults=!0),(t.$autosuggestData_autosuggestType||t.$currentInstance||t.realm)&&this._differs(e.autosuggestType,e.autosuggestType=function({$autosuggestData_autosuggestType:t,$currentInstance:e,realm:o}){return(0,j.U2)(t,[e,o])}(e))&&(t.autosuggestType=!0),(t.$autosuggestData_autosuggestSelected||t.$currentInstance||t.realm)&&(this._differs(e.autosuggestSelected,e.autosuggestSelected=function({$autosuggestData_autosuggestSelected:t,$currentInstance:e,realm:o}){return(0,j.U2)(t,[e,o],0)}(e))&&(t.autosuggestSelected=!0),this._differs(e.autosuggestSearchText,e.autosuggestSearchText=function({$autosuggestData_autosuggestSelected:t,$currentInstance:e,realm:o}){return(0,j.U2)(t,[e,o])}(e))&&(t.autosuggestSearchText=!0)),(t.$autosuggestShown||t.composeFocused)&&this._differs(e.shouldBeShown,e.shouldBeShown=function({$autosuggestShown:t,composeFocused:e}){return!(!t||!e)}(e))&&(t.shouldBeShown=!0)};const Ht=Vt;var Ot=o(2213),Zt=o(900);const Ut=(0,q.g)(requestAnimationFrame);var Kt={observe:L.N7,setup(){const{realm:t,text:e,dialogId:o}=this.get();requestAnimationFrame((()=>{const a=`the-autosuggest-container-${t}`;if(this._element=document.getElementById(a),!this._element){this._element=document.createElement("div"),this._element.id=a;("dialog"===t?document.querySelector(".modal-dialog-contents"):document.body).appendChild(this._element)}(0,B.b)((()=>{const{left:a,top:s}=this.calculateLeftAndTop();this._autosuggest=new Ht({target:this._element,data:{realm:t,text:e,dialogId:o,left:a,top:s}}),this.observe("text",(t=>{this._autosuggest.set({text:t})}),{init:!1}),this.observe("shouldBeShown",(t=>{t&&this.onResize()})),(0,Zt.p)(this.onResize),(0,Ot.Sn)(this.onResize)}))}))},doResize(){const{shouldBeShown:t}=this.get();if(this._autosuggest&&t){const{left:t,top:e}=this.calculateLeftAndTop();this._autosuggest.set({left:t,top:e})}},calculateLeftAndTop(){const{anchor:t}=this.refs,{realm:e}=this.get(),{left:o,bottom:a}=t.getBoundingClientRect();return{left:o,top:a+("dialog"===e?0:(0,Ot.JX)().scrollTop)}}};function Xt(){const{dialogId:t}=this.get();this.onResize=()=>Ut((()=>this.doResize()));let e=!1;"dialog"===this.get().realm?(0,k.on)("dialogDidRender",this,(o=>{o!==t||e||(e=!0,this.setup())})):(e=!0,this.setup())}function Yt(){this._autosuggest&&(this._autosuggest.destroy(),this._autosuggest=null),this._element&&this._element.remove(),(0,Zt.D)(this.onResize),(0,Ot.KR)(this.onResize)}function Qt(t){var e,o,s;if((0,a.S1)(this,t),this.store=i.h,this.refs={},this._state=(0,a.f0)(this.store._init(["autosuggestData_composeFocused","currentInstance","autosuggestShown"]),t.data),this.store._add(this,["autosuggestData_composeFocused","currentInstance","autosuggestShown"]),this._recompute({$autosuggestData_composeFocused:1,$currentInstance:1,realm:1,$autosuggestShown:1,composeFocused:1},this._state),this._intro=!0,this._handlers.destroy=[Yt,a.iT],document.getElementById("svelte-1yc9zbr-style")||((e=(0,a.az)("style")).id="svelte-1yc9zbr-style",e.textContent=".compose-autosuggest-anchor-point.svelte-1yc9zbr{grid-area:autosuggest;width:100%;height:0}",(0,a.R3)(document.head,e)),this._fragment=(o=this,this._state,{c(){s=(0,a.az)("div"),this.h()},l(t){s=(0,a.d$)(t,"DIV",{class:!0},!1),(0,a.pI)(s).forEach(a.r2),this.h()},h(){s.className="compose-autosuggest-anchor-point svelte-1yc9zbr"},m(t,e){(0,a.$T)(t,s,e),o.refs.anchor=s},p:a.ZT,d(t){t&&(0,a.r2)(s),o.refs.anchor===s&&(o.refs.anchor=null)}}),this.root._oncreate.push((()=>{Xt.call(this),this.fire("update",{changed:(0,a.lZ)({},this._state),current:this._state})})),t.target){var n=(0,a.pI)(t.target);t.hydrate?this._fragment.l(n):this._fragment.c(),n.forEach(a.r2),this._mount(t.target,t.anchor),(0,a.yl)(this)}}(0,a.f0)(Qt.prototype,a.uS),(0,a.f0)(Qt.prototype,Kt),Qt.prototype._recompute=function(t,e){(t.$autosuggestData_composeFocused||t.$currentInstance||t.realm)&&this._differs(e.composeFocused,e.composeFocused=function({$autosuggestData_composeFocused:t,$currentInstance:e,realm:o}){return(0,j.U2)(t,[e,o],!1)}(e))&&(t.composeFocused=!0),(t.$autosuggestShown||t.composeFocused)&&this._differs(e.shouldBeShown,e.shouldBeShown=function({$autosuggestShown:t,composeFocused:e}){return!(!t||!e)}(e))&&(t.shouldBeShown=!0)};const Gt=Qt;var Jt=o(1095);const te=[{value:300,label:"5 minutes"},{value:1800,label:"30 minutes"},{value:3600,label:"1 hour"},{value:21600,label:"6 hours"},{value:86400,label:"1 day"},{value:259200,label:"3 days"},{value:604800,label:"7 days"}],ee=86400;function oe(t,e){for(let o=0;o<t.options.length;o++){document.getElementById(`poll-option-${e}-${o}`).value=t.options[o]}}var ae={onChange(t){(0,D.F)((()=>{const{realm:e}=this.get(),o=document.getElementById(`poll-option-${e}-${t}`),a=this.store.getComposeData(e,"poll");a.options[t]=o.value,this.store.setComposeData(e,{poll:a}),this.store.save()}))},onMultipleChange(){(0,D.F)((()=>{const{realm:t}=this.get(),e=document.getElementById(`poll-option-multiple-${t}`),o=this.store.getComposeData(t,"poll");o.multiple=!!e.checked,this.store.setComposeData(t,{poll:o}),this.store.save()}))},onDeleteClick(t){(0,D.F)((()=>{const{realm:e}=this.get(),o=this.store.getComposeData(e,"poll");o.options.splice(t,1),this.store.setComposeData(e,{poll:o}),this.store.save(),oe(o,e)}))},onAddClick(){(0,D.F)((()=>{const{realm:t}=this.get(),e=this.store.getComposeData(t,"poll");4!==!e.options.length&&e.options.push(""),this.store.setComposeData(t,{poll:e}),this.store.save()}))},onExpiryChange(t){(0,D.F)((()=>{const{realm:e}=this.get(),{value:o}=t.target,a=this.store.getComposeData(e,"poll");a.expiry=parseInt(o,10),this.store.setComposeData(e,{poll:a}),this.store.save()}))}};function se(){const{realm:t}=this.get(),e=this.store.getComposeData(t,"poll");oe(e,t),document.getElementById(`poll-option-multiple-${t}`).checked=!!e.multiple,this.set({pollExpiryDefaultValue:e.expiry||ee})}function ie(t,e,o){const a=Object.create(t);return a.option=e[o],a.i=o,a}function ne(t){const{component:e,ctx:o}=this._svelte;e.onChange(o.i)}function re(t,e,o){const a=Object.create(t);return a.option=e[o],a.i=o,a}function le(t,e){var o,i,n,r,l={label:(r=e.i,(0,d.A)(["Remove choice ",["index"]],{index:r+1})),href:"#fa-times",muted:!0},c=new s.Z({root:t.root,store:t.store,data:l});return c.on("click",(function(o){t.onDeleteClick(e.i)})),{c(){o=(0,a.az)("input"),n=(0,a.rw)("\n      "),c._fragment.c(),this.h()},l(t){o=(0,a.d$)(t,"INPUT",{id:!0,type:!0,maxlength:!0,placeholder:!0},!1),(0,a.pI)(o).forEach(a.r2),n=(0,a.M4)(t,"\n      "),c._fragment.l(t),this.h()},h(){o._svelte={component:t,ctx:e},(0,a.NH)(o,"change",ne),o.id=i="poll-option-"+e.realm+"-"+e.i,(0,a.P$)(o,"type","text"),o.maxLength="50",o.placeholder=function(t){return(0,d.A)(["Choice ",["index"]],{index:t+1})}(e.i)},m(t,e){(0,a.$T)(t,o,e),(0,a.$T)(t,n,e),c._mount(t,e)},p(t,a){e=a,o._svelte.ctx=e,t.realm&&i!==(i="poll-option-"+e.realm+"-"+e.i)&&(o.id=i)},d(t){t&&(0,a.r2)(o),(0,a.ys)(o,"change",ne),t&&(0,a.r2)(n),c.destroy(t)}}}function ce(t,e){var o,s,i,n,r,l,c=e.i+1;return{c(){o=(0,a.az)("label"),s=(0,a.rw)("Choice "),i=(0,a.rw)(c),n=(0,a.rw)("\n    "),this.h()},l(t){o=(0,a.d$)(t,"LABEL",{id:!0,class:!0,for:!0},!1);var e=(0,a.pI)(o);s=(0,a.M4)(e,"Choice "),i=(0,a.M4)(e,c),n=(0,a.M4)(e,"\n    "),e.forEach(a.r2),this.h()},h(){o.id=r="poll-option-label-"+e.realm+"-"+e.i,o.className="sr-only",o.htmlFor=l="poll-option-"+e.realm+"-"+e.i},m(t,e){(0,a.$T)(t,o,e),(0,a.R3)(o,s),(0,a.R3)(o,i),(0,a.R3)(o,n)},p(t,e){t.realm&&r!==(r="poll-option-label-"+e.realm+"-"+e.i)&&(o.id=r),t.realm&&l!==(l="poll-option-"+e.realm+"-"+e.i)&&(o.htmlFor=l)},d(t){t&&(0,a.r2)(o)}}}function ue(t){var e;if((0,a.S1)(this,t),this.store=i.h,this._state=(0,a.f0)({pollExpiryOptions:te,pollExpiryDefaultValue:ee},t.data),this._intro=!0,document.getElementById("svelte-1iat7bs-style")||((e=(0,a.az)("style")).id="svelte-1iat7bs-style",e.textContent=".compose-poll.svelte-1iat7bs{margin:10px 0 10px 5px;display:grid;grid-template-columns:minmax(0, max-content) max-content;grid-row-gap:10px;align-items:center}.poll-expiry-select{margin-left:10px}.multiple-choice-label.svelte-1iat7bs{margin-left:5px}@media(max-width: 767px){.poll-expiry-select{display:block;margin-left:0;margin-top:10px}.add-poll-choice-button{align-self:flex-start}}",(0,a.R3)(document.head,e)),this._fragment=function(t,e){for(var o,i,n,r,l,c,u,d,h,m,p,g,f=e.poll.options,v=[],y=0;y<f.length;y+=1)v[y]=le(t,re(e,f,y));function b(e){t.onMultipleChange()}var x={className:"poll-expiry-select",options:e.pollExpiryOptions,defaultValue:e.pollExpiryDefaultValue,label:"Poll duration"},_=new Jt.Z({root:t.root,store:t.store,data:x});_.on("change",(function(e){t.onExpiryChange(e)}));var w={className:"add-poll-choice-button",label:"Add choice",href:"#fa-plus",muted:!0,disabled:4===e.poll.options.length},k=new s.Z({root:t.root,store:t.store,data:w});k.on("click",(function(e){t.onAddClick()}));var S=e.poll.options,I=[];for(y=0;y<S.length;y+=1)I[y]=ce(0,ie(e,S,y));return{c(){o=(0,a.az)("section");for(var t=0;t<v.length;t+=1)v[t].c();for(i=(0,a.rw)("\n  "),n=(0,a.az)("div"),r=(0,a.az)("input"),c=(0,a.rw)("\n    "),u=(0,a.az)("label"),d=(0,a.rw)("Multiple choice"),m=(0,a.rw)("\n    "),_._fragment.c(),p=(0,a.rw)("\n  "),k._fragment.c(),g=(0,a.rw)("\n  "),t=0;t<I.length;t+=1)I[t].c();this.h()},l(t){o=(0,a.d$)(t,"SECTION",{class:!0,"aria-label":!0},!1);for(var e=(0,a.pI)(o),s=0;s<v.length;s+=1)v[s].l(e);i=(0,a.M4)(e,"\n  "),n=(0,a.d$)(e,"DIV",{},!1);var l=(0,a.pI)(n);r=(0,a.d$)(l,"INPUT",{type:!0,id:!0},!1),(0,a.pI)(r).forEach(a.r2),c=(0,a.M4)(l,"\n    "),u=(0,a.d$)(l,"LABEL",{class:!0,for:!0},!1);var h=(0,a.pI)(u);for(d=(0,a.M4)(h,"Multiple choice"),h.forEach(a.r2),m=(0,a.M4)(l,"\n    "),_._fragment.l(l),l.forEach(a.r2),p=(0,a.M4)(e,"\n  "),k._fragment.l(e),g=(0,a.M4)(e,"\n  "),s=0;s<I.length;s+=1)I[s].l(e);e.forEach(a.r2),this.h()},h(){(0,a.NH)(r,"change",b),(0,a.P$)(r,"type","checkbox"),r.id=l="poll-option-multiple-"+e.realm,u.className="multiple-choice-label svelte-1iat7bs",u.htmlFor=h="poll-option-multiple-"+e.realm,o.className="compose-poll svelte-1iat7bs",(0,a.P$)(o,"aria-label","Create poll")},m(t,e){(0,a.$T)(t,o,e);for(var s=0;s<v.length;s+=1)v[s].m(o,null);for((0,a.R3)(o,i),(0,a.R3)(o,n),(0,a.R3)(n,r),(0,a.R3)(n,c),(0,a.R3)(n,u),(0,a.R3)(u,d),(0,a.R3)(n,m),_._mount(n,null),(0,a.R3)(o,p),k._mount(o,null),(0,a.R3)(o,g),s=0;s<I.length;s+=1)I[s].m(o,null)},p(e,a){if(e.realm||e.poll){f=a.poll.options;for(var s=0;s<f.length;s+=1){const n=re(a,f,s);v[s]?v[s].p(e,n):(v[s]=le(t,n),v[s].c(),v[s].m(o,i))}for(;s<v.length;s+=1)v[s].d(1);v.length=f.length}e.realm&&l!==(l="poll-option-multiple-"+a.realm)&&(r.id=l),e.realm&&h!==(h="poll-option-multiple-"+a.realm)&&(u.htmlFor=h);var n={};e.pollExpiryOptions&&(n.options=a.pollExpiryOptions),e.pollExpiryDefaultValue&&(n.defaultValue=a.pollExpiryDefaultValue),_._set(n);var c={};if(e.poll&&(c.disabled=4===a.poll.options.length),k._set(c),e.realm||e.poll){for(S=a.poll.options,s=0;s<S.length;s+=1){const t=ie(a,S,s);I[s]?I[s].p(e,t):(I[s]=ce(0,t),I[s].c(),I[s].m(o,null))}for(;s<I.length;s+=1)I[s].d(1);I.length=S.length}},d(t){t&&(0,a.r2)(o),(0,a.kw)(v,t),(0,a.ys)(r,"change",b),_.destroy(),k.destroy(),(0,a.kw)(I,t)}}}(this,this._state),this.root._oncreate.push((()=>{se.call(this),this.fire("update",{changed:(0,a.lZ)({},this._state),current:this._state})})),t.target){var o=(0,a.pI)(t.target);t.hydrate?this._fragment.l(o):this._fragment.c(),o.forEach(a.r2),this._mount(t.target,t.anchor),(0,a.yl)(this)}}(0,a.f0)(ue.prototype,a.uS),(0,a.f0)(ue.prototype,ae);const de=ue;var he={observe:L.N7,setupSyncToStore(){this.observe("rawChecked",(()=>{(0,D.F)((()=>{const{realm:t}=this.get(),{rawChecked:e}=this.get();this.store.getComposeData(t,"sensitive")!==e&&(this.store.setComposeData(t,{sensitive:e}),this.store.save())}))}),{init:!1})},setupSyncFromStore(){this.observe("sensitive",(t=>{this.set({rawChecked:t})}))}};function me(){this.setupSyncToStore(),this.setupSyncFromStore()}function pe(t,e){var o,s,i,n,r,l,c;function u(){t.set({rawChecked:i.checked})}return{c(){o=(0,a.az)("div"),s=(0,a.az)("label"),i=(0,a.az)("input"),n=(0,a.rw)("\n      "),r=(0,a.az)("span"),l=(0,a.rw)("Mark media as sensitive"),this.h()},l(t){o=(0,a.d$)(t,"DIV",{class:!0},!1);var e=(0,a.pI)(o);s=(0,a.d$)(e,"LABEL",{class:!0},!1);var c=(0,a.pI)(s);i=(0,a.d$)(c,"INPUT",{type:!0,disabled:!0},!1),(0,a.pI)(i).forEach(a.r2),n=(0,a.M4)(c,"\n      "),r=(0,a.d$)(c,"SPAN",{class:!0},!1);var u=(0,a.pI)(r);l=(0,a.M4)(u,"Mark media as sensitive"),u.forEach(a.r2),c.forEach(a.r2),e.forEach(a.r2),this.h()},h(){(0,a.NH)(i,"change",u),(0,a.P$)(i,"type","checkbox"),i.disabled=e.disabled,r.className=c=(e.disabled?"compose-sensitive-span-disabled":"")+" svelte-1ppizof",s.className="svelte-1ppizof",o.className="compose-media-sensitive svelte-1ppizof"},m(t,c){(0,a.$T)(t,o,c),(0,a.R3)(o,s),(0,a.R3)(s,i),i.checked=e.rawChecked,(0,a.R3)(s,n),(0,a.R3)(s,r),(0,a.R3)(r,l)},p(t,e){t.rawChecked&&(i.checked=e.rawChecked),t.disabled&&(i.disabled=e.disabled),t.disabled&&c!==(c=(e.disabled?"compose-sensitive-span-disabled":"")+" svelte-1ppizof")&&(r.className=c)},d(t){t&&(0,a.r2)(o),(0,a.ys)(i,"change",u)}}}function ge(t){var e,o,s,i,n;if((0,a.S1)(this,t),this._state=(0,a.f0)({rawChecked:!1},t.data),this._recompute({contentWarning:1,contentWarningShown:1},this._state),this._intro=!0,document.getElementById("svelte-1ppizof-style")||((e=(0,a.az)("style")).id="svelte-1ppizof-style",e.textContent=".compose-media-sensitive.svelte-1ppizof{grid-area:sensitive;margin-top:10px}label.svelte-1ppizof{padding:5px;display:flex;align-items:center;justify-content:flex-start}span.svelte-1ppizof{margin-left:5px}.compose-sensitive-span-disabled.svelte-1ppizof{color:var(--deemphasized-text-color)}@media(max-width: 767px){.compose-media-sensitive.svelte-1ppizof{margin-top:0}}@media(max-width: 320px){span.svelte-1ppizof{font-size:0.9em}}",(0,a.R3)(document.head,e)),this._fragment=(o=this,s=this._state,n=s.media.length&&pe(o,s),{c(){n&&n.c(),i=(0,a.Yr)()},l(t){n&&n.l(t),i=(0,a.Yr)()},m(t,e){n&&n.m(t,e),(0,a.$T)(t,i,e)},p(t,e){e.media.length?n?n.p(t,e):((n=pe(o,e)).c(),n.m(i.parentNode,i)):n&&(n.d(1),n=null)},d(t){n&&n.d(t),t&&(0,a.r2)(i)}}),this.root._oncreate.push((()=>{me.call(this),this.fire("update",{changed:(0,a.lZ)({},this._state),current:this._state})})),t.target){var r=(0,a.pI)(t.target);t.hydrate?this._fragment.l(r):this._fragment.c(),r.forEach(a.r2),this._mount(t.target,t.anchor),(0,a.yl)(this)}}(0,a.f0)(ge.prototype,a.uS),(0,a.f0)(ge.prototype,he),ge.prototype._recompute=function(t,e){(t.contentWarning||t.contentWarningShown)&&this._differs(e.disabled,e.disabled=function({contentWarning:t,contentWarningShown:e}){return t&&e}(e))&&(t.disabled=!0)};const fe=ge;var ve=o(1793),ye=o(2595);function be(t,e){const{reduceMotion:o}=i.h.get();return o?{delay:0,duration:1,easing:t=>t,css:j.ZT}:(0,ye.Z)(t,e)}var xe=o(7031),_e=o(2502),we=o(1505),ke=o(1162),Se=o(5358),Ie=o(4285),$e=o(5889);const ze={direct:1,private:2,unlisted:3,public:4};var Te={async doPostStatus(){const{aboutToPostStatus:t}=this.get(),{postingStatus:e}=this.store.get();t||e||(this.set({aboutToPostStatus:!0}),(0,D.F)((()=>{this.set({aboutToPostStatus:!1}),this.doPostStatusAfterDelay()})))},doPostStatusAfterDelay(){const{text:t,media:e,postPrivacyKey:o,contentWarning:a,realm:s,overLimit:n,inReplyToUuid:r,inReplyToId:l,quoteId:c,poll:u,sensitive:h,contentType:m,editId:p,localOnly:g}=this.get(),f=e.map((t=>t.data.id)),v=e.map((t=>t.description)),y=e.map((t=>[t.focusX,t.focusY])),b=l||("home"===s||"dialog"===s?null:s);if(n||!t&&!e.length)return;const x=u&&u.options&&u.options.length;if(x&&(u.options.length<2||!u.options.every(Boolean)))return;!async function(t,e,o,a,s,n,r,l,c,u,h,m,p,g,f){const{currentInstance:v,accessToken:y,online:b}=i.h.get();if(!b)return void xe.A.say("You cannot post while offline");e=e||"";const x=(a||[]).map(((t,e)=>({description:l&&l[e],focalPoint:h&&h[e]})));i.h.set({postingStatus:!0});try{if(await Promise.all(x.map((async({description:t,focalPoint:e},o)=>{if(t=t||"",(e=e||[0,0])[0]=e[0]||0,e[1]=e[1]||0,t||e[0]||e[1])return(0,Se._)(v,y,a[o],t,e)}))),f){(0,$e.BZ)();const i=await(0,_e.WN)(v,y,f,e,o,a,s,n,r,u,m,p,g);await ke.F.insertStatus(v,i),await(0,$e.FG)({status:i}),(0,k.j)("statusUpdated",i),(0,k.j)("postedStatus",t,c)}else{const i=await(0,_e.cf)(v,y,e,o,a,s,n,r,u,m,p,g);(0,we.I)(v,"home",i),(0,k.j)("postedStatus",t,c)}i.h.clearComposeData(t),(0,D.F)((()=>(a||[]).forEach((t=>ke.F.deleteCachedMediaFile(t)))))}catch(_){console.error(_),xe.A.say((0,d.A)(["Unable to post: ",["error"]],{error:_.message||""}))}finally{i.h.set({postingStatus:!1})}}(s,t,b,f,h,a,o,v,r,x&&{expires_in:(u.expiry||ee).toString(),multiple:!!u.multiple,options:u.options},y,m,c,g,p)},onDontReplyClick(){const{realm:t}=this.get();i.h.setComposeData(t,{inReplyToId:null})},onDontQuoteClick(){const{realm:t}=this.get();i.h.setComposeData(t,{quoteId:null})},onDontEditClick(){const{realm:t}=this.get();i.h.setComposeData(t,{editId:null})}};function De(){const{realm:t,replySpoiler:e,replyVisibility:o}=this.get();"home"!==t&&"dialog"!==t&&async function(t){const{currentInstance:e}=i.h.get(),o=await ke.F.getStatus(e,t),{currentVerifyCredentials:a}=i.h.get(),s=o.reblog||o;let n=[s.account].concat(s.mentions||[]).filter((t=>t.id!==a.id));n=(0,Ie.mN)(n,(t=>t.id)),!i.h.getComposeData(t,"text")&&n.length&&i.h.setComposeData(t,{text:n.map((t=>`@${t.acct} `)).join("")})}(t),e&&function(t,e){const o=i.h.getComposeData(t,"contentWarning");void 0!==i.h.getComposeData(t,"contentWarningShown")||o||i.h.setComposeData(t,{contentWarning:e,contentWarningShown:!0})}(t,e),o&&function(t,e){if(void 0!==i.h.getComposeData(t,"postPrivacy"))return;const{currentVerifyCredentials:o}=i.h.get(),a=o.source.privacy,s=ze[e]<ze[a]?e:a;i.h.setComposeData(t,{postPrivacy:s})}(t,o)}function Fe(t,e){var o,s;return{c(){o=(0,a.az)("h2"),s=(0,a.rw)("Compose post"),this.h()},l(t){o=(0,a.d$)(t,"H2",{class:!0},!1);var e=(0,a.pI)(o);s=(0,a.M4)(e,"Compose post"),e.forEach(a.r2),this.h()},h(){o.className="sr-only"},m(t,e){(0,a.$T)(t,o,e),(0,a.R3)(o,s)},d(t){t&&(0,a.r2)(o)}}}function Ce(t,e){var o,i,n,r,l,c,u,d,h,m,p=new s.Z({root:t.root,store:t.store,data:{label:"Don't edit",href:"#fa-times"}});return p.on("click",(function(e){t.onDontEditClick()})),{c(){o=(0,a.az)("div"),i=(0,a.az)("div"),n=(0,a.az)("div"),r=(0,a.rw)("Editing "),l=(0,a.az)("a"),c=(0,a.rw)("a post"),d=(0,a.rw)("\n          "),p._fragment.c(),this.h()},l(t){o=(0,a.d$)(t,"DIV",{class:!0},!1);var e=(0,a.pI)(o);i=(0,a.d$)(e,"DIV",{class:!0},!1);var s=(0,a.pI)(i);n=(0,a.d$)(s,"DIV",{class:!0},!1);var u=(0,a.pI)(n);r=(0,a.M4)(u,"Editing "),l=(0,a.d$)(u,"A",{href:!0},!1);var h=(0,a.pI)(l);c=(0,a.M4)(h,"a post"),h.forEach(a.r2),u.forEach(a.r2),d=(0,a.M4)(s,"\n          "),p._fragment.l(s),s.forEach(a.r2),e.forEach(a.r2),this.h()},h(){l.href=u="/statuses/"+e.editId,n.className="compose-edit-toolbar-label svelte-147kcc5",i.className="compose-edit-toolbar svelte-147kcc5",o.className="compose-edit-wrapper svelte-147kcc5"},m(t,e){(0,a.$T)(t,o,e),(0,a.R3)(o,i),(0,a.R3)(i,n),(0,a.R3)(n,r),(0,a.R3)(n,l),(0,a.R3)(l,c),(0,a.R3)(i,d),p._mount(i,null),m=!0},p(t,e){m&&!t.editId||u===(u="/statuses/"+e.editId)||(l.href=u)},i(e,s){m||(t.root._intro&&(h&&h.invalidate(),t.root._aftercreate.push((()=>{h||(h=(0,a.HS)(t,o,be,{duration:333},!0)),h.run(1)}))),this.m(e,s))},o(e){m&&(h||(h=(0,a.HS)(t,o,be,{duration:333},!1)),h.run(0,(()=>{e(),h=null})),m=!1)},d(t){t&&(0,a.r2)(o),p.destroy(),t&&h&&h.abort()}}}function Ee(t,e){var o,s,i,n,r,l,c,u,d,h,m=e.inReplyToHandle&&Ae(t,e);function p(t){return t.editId?Ne:Re}var g=p(e),f=g(t,e);return{c(){o=(0,a.az)("div"),s=(0,a.az)("div"),i=(0,a.az)("div"),n=(0,a.rw)("Replying to "),r=(0,a.az)("a"),l=(0,a.rw)("a post"),m&&m.c(),u=(0,a.rw)("\n          "),f.c(),this.h()},l(t){o=(0,a.d$)(t,"DIV",{class:!0},!1);var e=(0,a.pI)(o);s=(0,a.d$)(e,"DIV",{class:!0},!1);var c=(0,a.pI)(s);i=(0,a.d$)(c,"DIV",{class:!0},!1);var d=(0,a.pI)(i);n=(0,a.M4)(d,"Replying to "),r=(0,a.d$)(d,"A",{href:!0},!1);var h=(0,a.pI)(r);l=(0,a.M4)(h,"a post"),m&&m.l(h),h.forEach(a.r2),d.forEach(a.r2),u=(0,a.M4)(c,"\n          "),f.l(c),c.forEach(a.r2),e.forEach(a.r2),this.h()},h(){r.href=c="/statuses/"+e.inReplyToId,i.className="compose-in-reply-to-toolbar-label svelte-147kcc5",s.className="compose-in-reply-to-toolbar svelte-147kcc5",o.className="compose-in-reply-to-wrapper svelte-147kcc5"},m(t,e){(0,a.$T)(t,o,e),(0,a.R3)(o,s),(0,a.R3)(s,i),(0,a.R3)(i,n),(0,a.R3)(i,r),(0,a.R3)(r,l),m&&m.m(r,null),(0,a.R3)(s,u),f.m(s,null),h=!0},p(e,o){o.inReplyToHandle?m?m.p(e,o):((m=Ae(t,o)).c(),m.m(r,null)):m&&(m.d(1),m=null),h&&!e.inReplyToId||c===(c="/statuses/"+o.inReplyToId)||(r.href=c),g!==(g=p(o))&&(f.d(1),(f=g(t,o)).c(),f.m(s,null))},i(e,s){h||(t.root._intro&&(d&&d.invalidate(),t.root._aftercreate.push((()=>{d||(d=(0,a.HS)(t,o,be,{duration:333},!0)),d.run(1)}))),this.m(e,s))},o(e){h&&(d||(d=(0,a.HS)(t,o,be,{duration:333},!1)),d.run(0,(()=>{e(),d=null})),h=!1)},d(t){t&&(0,a.r2)(o),m&&m.d(),f.d(),t&&d&&d.abort()}}}function Ae(t,e){var o,s;return{c(){o=(0,a.rw)("by "),s=(0,a.rw)(e.inReplyToHandle)},l(t){o=(0,a.M4)(t,"by "),s=(0,a.M4)(t,e.inReplyToHandle)},m(t,e){(0,a.$T)(t,o,e),(0,a.$T)(t,s,e)},p(t,e){t.inReplyToHandle&&(0,a.a_)(s,e.inReplyToHandle)},d(t){t&&((0,a.r2)(o),(0,a.r2)(s))}}}function Re(t,e){var o=new s.Z({root:t.root,store:t.store,data:{label:"Don't reply",href:"#fa-times"}});return o.on("click",(function(e){t.onDontReplyClick()})),{c(){o._fragment.c()},l(t){o._fragment.l(t)},m(t,e){o._mount(t,e)},d(t){o.destroy(t)}}}function Ne(t,e){var o;return{c(){o=(0,a.az)("div"),this.h()},l(t){o=(0,a.d$)(t,"DIV",{style:!0},!1),(0,a.pI)(o).forEach(a.r2),this.h()},h(){(0,a.A_)(o,"height","36px")},m(t,e){(0,a.$T)(t,o,e)},d(t){t&&(0,a.r2)(o)}}}function Pe(t,e){var o,i,n,r,l,c,u,d,h,m,p=e.quoteHandle&&Me(t,e),g=new s.Z({root:t.root,store:t.store,data:{label:"Don't quote",href:"#fa-times"}});return g.on("click",(function(e){t.onDontQuoteClick()})),{c(){o=(0,a.az)("div"),i=(0,a.az)("div"),n=(0,a.az)("div"),r=(0,a.rw)("Quoting "),l=(0,a.az)("a"),c=(0,a.rw)("a post"),p&&p.c(),d=(0,a.rw)("\n          "),g._fragment.c(),this.h()},l(t){o=(0,a.d$)(t,"DIV",{class:!0},!1);var e=(0,a.pI)(o);i=(0,a.d$)(e,"DIV",{class:!0},!1);var s=(0,a.pI)(i);n=(0,a.d$)(s,"DIV",{class:!0},!1);var u=(0,a.pI)(n);r=(0,a.M4)(u,"Quoting "),l=(0,a.d$)(u,"A",{href:!0},!1);var h=(0,a.pI)(l);c=(0,a.M4)(h,"a post"),p&&p.l(h),h.forEach(a.r2),u.forEach(a.r2),d=(0,a.M4)(s,"\n          "),g._fragment.l(s),s.forEach(a.r2),e.forEach(a.r2),this.h()},h(){l.href=u="/statuses/"+e.quoteId,n.className="compose-quote-toolbar-label svelte-147kcc5",i.className="compose-quote-toolbar svelte-147kcc5",o.className="compose-quote-wrapper svelte-147kcc5"},m(t,e){(0,a.$T)(t,o,e),(0,a.R3)(o,i),(0,a.R3)(i,n),(0,a.R3)(n,r),(0,a.R3)(n,l),(0,a.R3)(l,c),p&&p.m(l,null),(0,a.R3)(i,d),g._mount(i,null),m=!0},p(e,o){o.quoteHandle?p?p.p(e,o):((p=Me(t,o)).c(),p.m(l,null)):p&&(p.d(1),p=null),m&&!e.quoteId||u===(u="/statuses/"+o.quoteId)||(l.href=u)},i(e,s){m||(t.root._intro&&(h&&h.invalidate(),t.root._aftercreate.push((()=>{h||(h=(0,a.HS)(t,o,be,{duration:333},!0)),h.run(1)}))),this.m(e,s))},o(e){m&&(h||(h=(0,a.HS)(t,o,be,{duration:333},!1)),h.run(0,(()=>{e(),h=null})),m=!1)},d(t){t&&(0,a.r2)(o),p&&p.d(),g.destroy(),t&&h&&h.abort()}}}function Me(t,e){var o,s;return{c(){o=(0,a.rw)("by "),s=(0,a.rw)(e.quoteHandle)},l(t){o=(0,a.M4)(t,"by "),s=(0,a.M4)(t,e.quoteHandle)},m(t,e){(0,a.$T)(t,o,e),(0,a.$T)(t,s,e)},p(t,e){t.quoteHandle&&(0,a.a_)(s,e.quoteHandle)},d(t){t&&((0,a.r2)(o),(0,a.r2)(s))}}}function Le(t,e){var o,s,i,n={realm:e.realm,contentWarning:e.contentWarning},r=new wt({root:t.root,store:t.store,data:n});return{c(){o=(0,a.az)("div"),r._fragment.c(),this.h()},l(t){o=(0,a.d$)(t,"DIV",{class:!0},!1);var e=(0,a.pI)(o);r._fragment.l(e),e.forEach(a.r2),this.h()},h(){o.className="compose-content-warning-wrapper svelte-147kcc5"},m(t,e){(0,a.$T)(t,o,e),r._mount(o,null),i=!0},p(t,e){var o={};t.realm&&(o.realm=e.realm),t.contentWarning&&(o.contentWarning=e.contentWarning),r._set(o)},i(e,n){i||(t.root._intro&&(s&&s.invalidate(),t.root._aftercreate.push((()=>{s||(s=(0,a.HS)(t,o,be,{duration:333},!0)),s.run(1)}))),this.m(e,n))},o(e){i&&(s||(s=(0,a.HS)(t,o,be,{duration:333},!1)),s.run(0,(()=>{e(),s=null})),i=!1)},d(t){t&&(0,a.r2)(o),r.destroy(),t&&s&&s.abort()}}}function je(t,e){var o,s,i,n={realm:e.realm,poll:e.poll},r=new de({root:t.root,store:t.store,data:n});return{c(){o=(0,a.az)("div"),r._fragment.c(),this.h()},l(t){o=(0,a.d$)(t,"DIV",{class:!0},!1);var e=(0,a.pI)(o);r._fragment.l(e),e.forEach(a.r2),this.h()},h(){o.className="compose-poll-wrapper svelte-147kcc5"},m(t,e){(0,a.$T)(t,o,e),r._mount(o,null),i=!0},p(t,e){var o={};t.realm&&(o.realm=e.realm),t.poll&&(o.poll=e.poll),r._set(o)},i(e,n){i||(t.root._intro&&(s&&s.invalidate(),t.root._aftercreate.push((()=>{s||(s=(0,a.HS)(t,o,be,{duration:333},!0)),s.run(1)}))),this.m(e,n))},o(e){i&&(s||(s=(0,a.HS)(t,o,be,{duration:333},!1)),s.run(0,(()=>{e(),s=null})),i=!1)},d(t){t&&(0,a.r2)(o),r.destroy(),t&&s&&s.abort()}}}function Be(t,e){var o={realm:e.realm,media:e.media,sensitive:e.sensitive,contentWarning:e.contentWarning,contentWarningShown:e.contentWarningShown},a=new fe({root:t.root,store:t.store,data:o});return{c(){a._fragment.c()},l(t){a._fragment.l(t)},m(t,e){a._mount(t,e)},p(t,e){var o={};t.realm&&(o.realm=e.realm),t.media&&(o.media=e.media),t.sensitive&&(o.sensitive=e.sensitive),t.contentWarning&&(o.contentWarning=e.contentWarning),t.contentWarningShown&&(o.contentWarningShown=e.contentWarningShown),a._set(o)},d(t){a.destroy(t)}}}function qe(t,e){var o,s;return{c(){o=(0,a.az)("div"),this.h()},l(t){o=(0,a.d$)(t,"DIV",{class:!0},!1),(0,a.pI)(o).forEach(a.r2),this.h()},h(){o.className=s="compose-box-border-bottom "+e.hideAndFadeIn+" svelte-147kcc5"},m(t,e){(0,a.$T)(t,o,e)},p(t,e){t.hideAndFadeIn&&s!==(s="compose-box-border-bottom "+e.hideAndFadeIn+" svelte-147kcc5")&&(o.className=s)},d(t){t&&(0,a.r2)(o)}}}function We(t){var e;if((0,a.S1)(this,t),this.store=i.h,this._state=(0,a.f0)((0,a.f0)(this.store._init(["currentComposeData","currentVerifyCredentials","maxStatusChars","currentSupportedToggles"]),{size:void 0,isReply:!1,autoFocus:!1,hideBottomBorder:!1,hidden:!1,dialogId:void 0,aboutToPostStatus:!1}),t.data),this.store._add(this,["currentComposeData","currentVerifyCredentials","maxStatusChars","currentSupportedToggles"]),this._recompute({$currentComposeData:1,realm:1,composeData:1,text:1,contentWarning:1,textLength:1,contentWarningLength:1,contentWarningShown:1,length:1,$maxStatusChars:1,$currentVerifyCredentials:1,defaultPostPrivacyKey:1,overLimit:1,size:1,postPrivacyKey:1,isReply:1,hidden:1,$currentSupportedToggles:1},this._state),this._intro=!0,this._handlers.destroy=[a.iT],document.getElementById("svelte-147kcc5-style")||((e=(0,a.az)("style")).id="svelte-147kcc5-style",e.textContent='.compose-box.svelte-147kcc5{border-radius:4px;padding:20px 20px 0 20px;display:grid;align-items:flex-start;grid-template-areas:"avatar name        handle      handle"\n      "avatar edit        edit        edit"\n      "avatar inReplyTo   inReplyTo   inReplyTo"\n      "avatar quote       quote       quote"\n      "avatar cw          cw          cw"\n      "avatar input       input       input"\n      "avatar gauge       gauge       gauge"\n      "avatar autosuggest autosuggest autosuggest"\n      "avatar poll        poll        poll"\n      "avatar toolbar     toolbar     toolbar"\n      "avatar media       media       media"\n      "avatar sensitive   sensitive   sensitive";grid-template-columns:min-content minmax(0, max-content) 1fr 1fr;position:relative}.compose-box.direct-reply.svelte-147kcc5{background-color:var(--status-direct-background)}.compose-box-fade-in{transition:opacity 0.2s linear}.compose-box-border-bottom.svelte-147kcc5{height:1px;background:var(--main-border);width:100%}.compose-content-warning-wrapper.svelte-147kcc5{grid-area:cw}.compose-in-reply-to-wrapper.svelte-147kcc5{grid-area:inReplyTo}.compose-quote-wrapper.svelte-147kcc5{grid-area:quote}.compose-edit-wrapper.svelte-147kcc5{grid-area:edit}.compose-poll-wrapper.svelte-147kcc5{grid-area:poll}.compose-in-reply-to-toolbar.svelte-147kcc5,.compose-quote-toolbar.svelte-147kcc5,.compose-edit-toolbar.svelte-147kcc5{font-size:1.17em;margin:10px 0 0 5px;border-radius:3px;padding:0.25rem 1rem;padding-right:1rem;background:var(--toast-bg);color:var(--toast-text);border:1px solid var(--toast-border);display:flex;align-items:center;padding-right:0}.compose-in-reply-to-toolbar-label.svelte-147kcc5,.compose-quote-toolbar-label.svelte-147kcc5,.compose-edit-toolbar-label.svelte-147kcc5{flex-grow:1;word-wrap:break-word;width:0}@media(max-width: 767px){.compose-box.svelte-147kcc5{padding:10px 10px 0 10px}.compose-box-realm-dialog.svelte-147kcc5{overflow-x:hidden}}@media(max-width: 240px){.compose-box.svelte-147kcc5{padding:10px 5px 0 5px}}',(0,a.R3)(document.head,e)),this._fragment=function(t,e){var o,s,i,n,r,l,c,u,d,h,m,p,g,f,y,b,_,w="home"===e.realm&&Fe(),k={realm:e.realm,dialogId:e.dialogId},S=new z({root:t.root,store:t.store,data:k}),I=e.editId&&Ce(t,e),$=e.inReplyToId&&Ee(t,e),T=e.quoteId&&Pe(t,e),D=e.contentWarningShown&&Le(t,e),F={realm:e.realm,text:e.text,autoFocus:e.autoFocus},C=new K({root:t.root,store:t.store,data:F});C.on("postAction",(function(e){t.doPostStatus()}));var E={length:e.length,overLimit:e.overLimit},A=new x({root:t.root,store:t.store,data:E}),R={realm:e.realm,text:e.text,dialogId:e.dialogId},N=new Gt({root:t.root,store:t.store,data:R}),P=e.poll&&e.poll.options&&e.poll.options.length&&je(t,e),M={realm:e.realm,postPrivacy:e.postPrivacy,media:e.media,contentWarningShown:e.contentWarningShown,text:e.text,poll:e.poll,contentType:e.contentType,editId:e.editId,length:e.length,overLimit:e.overLimit,localOnly:e.localOnly},L=new v({root:t.root,store:t.store,data:M}),j={realm:e.realm,media:e.media},B=new vt({root:t.root,store:t.store,data:j}),q=e.showSensitive&&Be(t,e),W={realm:e.realm},V=new zt({root:t.root,store:t.store,slots:{default:(0,a.xJ)()},data:W}),H={showSticky:e.showSticky,overLimit:e.overLimit,hideAndFadeIn:e.hideAndFadeIn,editId:e.editId},O=new st({root:t.root,store:t.store,data:H});O.on("postAction",(function(e){t.doPostStatus()}));var Z=!e.hideBottomBorder&&qe(0,e);return{c(){w&&w.c(),o=(0,a.rw)("\n"),s=(0,a.az)("div"),S._fragment.c(),i=(0,a.rw)("\n    "),I&&I.c(),n=(0,a.rw)("\n    "),$&&$.c(),r=(0,a.rw)("\n    "),T&&T.c(),l=(0,a.rw)("\n    "),D&&D.c(),c=(0,a.rw)("\n    "),C._fragment.c(),u=(0,a.rw)("\n    "),A._fragment.c(),d=(0,a.rw)("\n    "),N._fragment.c(),h=(0,a.rw)("\n    "),P&&P.c(),m=(0,a.rw)("\n    "),L._fragment.c(),p=(0,a.rw)("\n    "),B._fragment.c(),g=(0,a.rw)("\n    "),q&&q.c(),V._fragment.c(),y=(0,a.rw)("\n"),O._fragment.c(),b=(0,a.rw)("\n"),Z&&Z.c(),_=(0,a.Yr)(),this.h()},l(t){w&&w.l(t),o=(0,a.M4)(t,"\n"),s=(0,a.d$)(t,"DIV",{class:!0},!1);var e=(0,a.pI)(s);S._fragment.l(e),i=(0,a.M4)(e,"\n    "),I&&I.l(e),n=(0,a.M4)(e,"\n    "),$&&$.l(e),r=(0,a.M4)(e,"\n    "),T&&T.l(e),l=(0,a.M4)(e,"\n    "),D&&D.l(e),c=(0,a.M4)(e,"\n    "),C._fragment.l(e),u=(0,a.M4)(e,"\n    "),A._fragment.l(e),d=(0,a.M4)(e,"\n    "),N._fragment.l(e),h=(0,a.M4)(e,"\n    "),P&&P.l(e),m=(0,a.M4)(e,"\n    "),L._fragment.l(e),p=(0,a.M4)(e,"\n    "),B._fragment.l(e),g=(0,a.M4)(e,"\n    "),q&&q.l(e),e.forEach(a.r2),V._fragment.l(t),y=(0,a.M4)(t,"\n"),O._fragment.l(t),b=(0,a.M4)(t,"\n"),Z&&Z.l(t),_=(0,a.Yr)(),this.h()},h(){s.className=f=e.computedClassName+" "+e.hideAndFadeIn+" svelte-147kcc5"},m(t,e){w&&w.m(t,e),(0,a.$T)(t,o,e),(0,a.R3)(V._slotted.default,s),S._mount(s,null),(0,a.R3)(s,i),I&&I.i(s,null),(0,a.R3)(s,n),$&&$.i(s,null),(0,a.R3)(s,r),T&&T.i(s,null),(0,a.R3)(s,l),D&&D.i(s,null),(0,a.R3)(s,c),C._mount(s,null),(0,a.R3)(s,u),A._mount(s,null),(0,a.R3)(s,d),N._mount(s,null),(0,a.R3)(s,h),P&&P.i(s,null),(0,a.R3)(s,m),L._mount(s,null),(0,a.R3)(s,p),B._mount(s,null),(0,a.R3)(s,g),q&&q.m(s,null),V._mount(t,e),(0,a.$T)(t,y,e),O._mount(t,e),(0,a.$T)(t,b,e),Z&&Z.m(t,e),(0,a.$T)(t,_,e)},p(e,i){"home"===i.realm?w||((w=Fe()).c(),w.m(o.parentNode,o)):w&&(w.d(1),w=null);var u={};e.realm&&(u.realm=i.realm),e.dialogId&&(u.dialogId=i.dialogId),S._set(u),i.editId?(I?I.p(e,i):(I=Ce(t,i))&&I.c(),I.i(s,n)):I&&((0,a.d8)(),I.o((function(){I.d(1),I=null}))),i.inReplyToId?($?$.p(e,i):($=Ee(t,i))&&$.c(),$.i(s,r)):$&&((0,a.d8)(),$.o((function(){$.d(1),$=null}))),i.quoteId?(T?T.p(e,i):(T=Pe(t,i))&&T.c(),T.i(s,l)):T&&((0,a.d8)(),T.o((function(){T.d(1),T=null}))),i.contentWarningShown?(D?D.p(e,i):(D=Le(t,i))&&D.c(),D.i(s,c)):D&&((0,a.d8)(),D.o((function(){D.d(1),D=null})));var d={};e.realm&&(d.realm=i.realm),e.text&&(d.text=i.text),e.autoFocus&&(d.autoFocus=i.autoFocus),C._set(d);var h={};e.length&&(h.length=i.length),e.overLimit&&(h.overLimit=i.overLimit),A._set(h);var p={};e.realm&&(p.realm=i.realm),e.text&&(p.text=i.text),e.dialogId&&(p.dialogId=i.dialogId),N._set(p),i.poll&&i.poll.options&&i.poll.options.length?(P?P.p(e,i):(P=je(t,i))&&P.c(),P.i(s,m)):P&&((0,a.d8)(),P.o((function(){P.d(1),P=null})));var g={};e.realm&&(g.realm=i.realm),e.postPrivacy&&(g.postPrivacy=i.postPrivacy),e.media&&(g.media=i.media),e.contentWarningShown&&(g.contentWarningShown=i.contentWarningShown),e.text&&(g.text=i.text),e.poll&&(g.poll=i.poll),e.contentType&&(g.contentType=i.contentType),e.editId&&(g.editId=i.editId),e.length&&(g.length=i.length),e.overLimit&&(g.overLimit=i.overLimit),e.localOnly&&(g.localOnly=i.localOnly),L._set(g);var v={};e.realm&&(v.realm=i.realm),e.media&&(v.media=i.media),B._set(v),i.showSensitive?q?q.p(e,i):((q=Be(t,i)).c(),q.m(s,null)):q&&(q.d(1),q=null),(e.computedClassName||e.hideAndFadeIn)&&f!==(f=i.computedClassName+" "+i.hideAndFadeIn+" svelte-147kcc5")&&(s.className=f);var y={};e.realm&&(y.realm=i.realm),V._set(y);var b={};e.showSticky&&(b.showSticky=i.showSticky),e.overLimit&&(b.overLimit=i.overLimit),e.hideAndFadeIn&&(b.hideAndFadeIn=i.hideAndFadeIn),e.editId&&(b.editId=i.editId),O._set(b),i.hideBottomBorder?Z&&(Z.d(1),Z=null):Z?Z.p(e,i):((Z=qe(0,i)).c(),Z.m(_.parentNode,_))},d(t){w&&w.d(t),t&&(0,a.r2)(o),S.destroy(),I&&I.d(),$&&$.d(),T&&T.d(),D&&D.d(),C.destroy(),A.destroy(),N.destroy(),P&&P.d(),L.destroy(),B.destroy(),q&&q.d(),V.destroy(t),t&&(0,a.r2)(y),O.destroy(t),t&&(0,a.r2)(b),Z&&Z.d(t),t&&(0,a.r2)(_)}}}(this,this._state),this.root._oncreate.push((()=>{De.call(this),this.fire("update",{changed:(0,a.lZ)({},this._state),current:this._state})})),t.target){var o=(0,a.pI)(t.target);t.hydrate?this._fragment.l(o):this._fragment.c(),o.forEach(a.r2),this._mount(t.target,t.anchor),(0,a.yl)(this)}}(0,a.f0)(We.prototype,a.uS),(0,a.f0)(We.prototype,Te),We.prototype._recompute=function(t,e){(t.$currentComposeData||t.realm)&&this._differs(e.composeData,e.composeData=function({$currentComposeData:t,realm:e}){return t[e]||{}}(e))&&(t.composeData=!0),t.composeData&&this._differs(e.text,e.text=function({composeData:t}){return t.text||""}(e))&&(t.text=!0),t.text&&this._differs(e.textLength,e.textLength=function({text:t}){return(0,ve.X)(t)}(e))&&(t.textLength=!0),t.composeData&&this._differs(e.contentWarning,e.contentWarning=function({composeData:t}){return t.contentWarning||""}(e))&&(t.contentWarning=!0),t.contentWarning&&this._differs(e.contentWarningLength,e.contentWarningLength=function({contentWarning:t}){return(0,ve.X)(t)}(e))&&(t.contentWarningLength=!0),t.composeData&&this._differs(e.contentWarningShown,e.contentWarningShown=function({composeData:t}){return t.contentWarningShown}(e))&&(t.contentWarningShown=!0),(t.textLength||t.contentWarningLength||t.contentWarningShown)&&this._differs(e.length,e.length=function({textLength:t,contentWarningLength:e,contentWarningShown:o}){return t+(o?e:0)}(e))&&(t.length=!0),(t.length||t.$maxStatusChars)&&this._differs(e.overLimit,e.overLimit=function({length:t,$maxStatusChars:e}){return t>e}(e))&&(t.overLimit=!0),t.$currentVerifyCredentials&&this._differs(e.defaultPostPrivacyKey,e.defaultPostPrivacyKey=function({$currentVerifyCredentials:t}){return t&&t.source.privacy||"public"}(e))&&(t.defaultPostPrivacyKey=!0),(t.composeData||t.defaultPostPrivacyKey)&&this._differs(e.postPrivacyKey,e.postPrivacyKey=function({composeData:t,defaultPostPrivacyKey:e}){return t.postPrivacy||e}(e))&&(t.postPrivacyKey=!0),(t.overLimit||t.realm||t.size||t.postPrivacyKey||t.isReply)&&this._differs(e.computedClassName,e.computedClassName=function({overLimit:t,realm:e,size:o,postPrivacyKey:a,isReply:s}){return(0,J.q)("compose-box",`compose-box-realm-${e}`,t&&"over-char-limit",s&&"direct"===a&&"direct-reply")}(e))&&(t.computedClassName=!0),t.hidden&&this._differs(e.hideAndFadeIn,e.hideAndFadeIn=function({hidden:t}){return(0,J.q)("compose-box-fade-in",t&&"hidden")}(e))&&(t.hideAndFadeIn=!0),t.realm&&this._differs(e.showSticky,e.showSticky=function({realm:t}){return"home"===t}(e))&&(t.showSticky=!0),t.composeData&&(this._differs(e.localOnly,e.localOnly=function({composeData:t}){return t.localOnly||!1}(e))&&(t.localOnly=!0),this._differs(e.media,e.media=function({composeData:t}){return t.media||[]}(e))&&(t.media=!0),this._differs(e.poll,e.poll=function({composeData:t}){return t.poll}(e))&&(t.poll=!0),this._differs(e.inReplyToId,e.inReplyToId=function({composeData:t}){return t.inReplyToId}(e))&&(t.inReplyToId=!0)),t.postPrivacyKey&&this._differs(e.postPrivacy,e.postPrivacy=function({postPrivacyKey:t}){return c.K5.find((e=>e.key===t))}(e))&&(t.postPrivacy=!0),t.composeData&&(this._differs(e.sensitive,e.sensitive=function({composeData:t}){return!!t.sensitive}(e))&&(t.sensitive=!0),this._differs(e.contentType,e.contentType=function({composeData:t}){return t.contentType}(e))&&(t.contentType=!0),this._differs(e.inReplyToHandle,e.inReplyToHandle=function({composeData:t}){return t.inReplyToHandle}(e))&&(t.inReplyToHandle=!0),this._differs(e.quoteId,e.quoteId=function({composeData:t}){return t.quoteId}(e))&&(t.quoteId=!0),this._differs(e.quoteHandle,e.quoteHandle=function({composeData:t}){return t.quoteHandle}(e))&&(t.quoteHandle=!0),this._differs(e.editId,e.editId=function({composeData:t}){return t.editId}(e))&&(t.editId=!0)),t.$currentSupportedToggles&&this._differs(e.showSensitive,e.showSensitive=function({$currentSupportedToggles:t}){return!t||t.sensitive}(e))&&(t.showSensitive=!0)};const Ve=We},5889:(t,e,o)=>{o.d(e,{BZ:()=>k,FG:()=>D,UZ:()=>$});var a=o(85),s=o(8183);function i(){return new Worker(o.p+"blurhash.ee398501b782c72327f7.blurhash.js")}var n=o(9905);const r=32;const l=new(o(4698).c)({maxSize:150});let c,u,d;function h(){c=c||new n(new i)}async function m(t){return u||(u=document.createElement("canvas"),u.height=r,u.width=r,d=u.getContext("2d")),d.putImageData(t,0,0),await new Promise(((t,e)=>{const o=new window.FileReader;o.addEventListener("error",(()=>{e(o.error)})),o.addEventListener("load",(()=>{t(o.result)})),u.toBlob((t=>{o.readAsDataURL(t)}))}))}async function p(t){let e=l.get(t);return e||(e=await async function(t){h();const{decoded:e,imageData:o}=await c.postMessage(t);return e||m(o)}(t),l.set(t,e)),e}var g=o(9970),f=o(9006);function v(t){return(t&&t.startsWith("#")?t.slice(1):t).normalize("NFKC")}function y(t){return"A"===t.tagName&&("#"===t.textContent?.[0]||"#"===t.previousSibling?.textContent?.[t.previousSibling.textContent.length-1])}function b(t){const e=t.reduce(((t,e)=>{const o=e.normalize("NFKD").toLowerCase();return(t[o]=t[o]||[]).push(e),t}),{});return Object.values(e).map((t=>t[0]))}const x=new Intl.Collator(void 0,{sensitivity:"base"});function _(t,e){const o=e.normalize("NFKC");return!!t.find((t=>0===x.compare(t.normalize("NFKC"),o)))}function w(t){return(0,a.U2)(t,["status"])||(0,a.U2)(t,["notification","status"])}function k(){try{h()}catch(t){console.error("could not start blurhash worker",t)}}async function S(t){const e=w(t);if(!e)return;const o=(0,a.U2)(e,["media_attachments"],[]).concat((0,a.U2)(e,["reblog","media_attachments"],[])).filter((t=>t.blurhash));o.length&&((0,s.B)(`decodeBlurhash-${e.id}`),await Promise.all(o.map((async t=>{try{t.decodedBlurhash=await p(t.blurhash)}catch(e){console.warn("Could not decode blurhash, ignoring",e)}}))),(0,s.s)(`decodeBlurhash-${e.id}`))}async function I(t){const e=w(t);if(!e)return;const o=e.reblog?e.reblog:e,a=o.content||"",s=o.mentions||[];await new Promise((t=>{(0,g.F)((()=>{o.plainTextContent=(0,f.g)(a,s),t()}))}))}const $=Symbol("rehydrated");function z(t){const e=w(t);if(!e)return;const o=e.reblog?e.reblog:e;return o.quote?D({status:o.quote}):void 0}function T(t){const e=w(t);if(!e)return;const o=e.reblog?e.reblog:e;try{const{statusContent:t,hashtagsInBar:e}=function(t){let e=t.content;const o=t.tags.map((t=>t.name)),a={statusContent:e,hashtagsInBar:[]};if(0===o.length)return a;const s=document.createElement("template");s.innerHTML=e.trimEnd();const i=o.map((t=>t.normalize("NFKC"))),n=t=>{if(!t)return!1;if(y(t)&&t.textContent){const e=v(t.textContent);return!!_(i,e)&&e}return 3===t.nodeType&&!t.nodeValue?.trim()};let r=s.content.lastChild;if(n(r)){const t=document.createElement("template");for(;r&&n(r);){const e=r.previousSibling;t.appendChild(r),r=e}r&&"BR"===r.tagName&&r.remove(),r=t}if(!r)return a;if(r.remove(),!r.firstElementChild){const t=document.createElement("template");t.appendChild(r),r=t}const l=s,c=Array.from(l.content.querySelectorAll("a[href]")).reduce(((t,e)=>(y(e)&&e.textContent&&t.push(v(e.textContent)),t)),[]),u=[];let d=!0;for(const f of r.childNodes){const t=n(f);"string"==typeof t?u.push(t):t||(d=!1)}const h=o.filter((t=>{const e=t.normalize("NFKC");return!_(c,e)&&!_(u,e)})),m=0===l.content.childElementCount,p=t.media_attachments&&t.media_attachments.length>0,g=!!t.spoiler_text;return d&&(p&&!g||!m)&&(e=l.innerHTML,h.push(...u)),{statusContent:e,hashtagsInBar:b(h)}}(o);o.content=t,o.hashtagsInBar=e}catch(a){console.warn("failed to computeHashtagBarForStatus",o,a)}}async function D(t){T(t),await Promise.all([S(t),I(t),z(t)]),function(t){const e=w(t);if(!e)return;(e.reblog?e.reblog:e)[$]=!0}(t)}},2502:(t,e,o)=>{o.d(e,{WN:()=>r,cf:()=>n,j7:()=>l,l5:()=>u,lR:()=>c});var a=o(4886),s=o(385);async function i(t,e,o,i,n,r,l,c,u,d,h,m,p){const g={status:i,media_ids:r,sensitive:l,spoiler_text:c,content_type:h,quote_id:m,local_only:p,visibility:u,poll:d,..."post"===o&&{in_reply_to_id:n,visibility:u}};for(const a of Object.keys(g)){const t=g[a];"status"===a||"local_only"===a||t&&(!Array.isArray(t)||t.length)||delete g[a]}return("post"===o?s.v_:s.gz)(t,g,(0,a.I)(e),{timeout:s.$Q})}async function n(t,e,o,s,n,r,l,c,u,d,h,m){return i(`${(0,a.E)(t)}/api/v1/statuses`,e,"post",o,s,n,r,l,c,u,d,h,m)}async function r(t,e,o,s,n,r,l,c,u,d,h,m,p){return i(`${(0,a.E)(t)}/api/v1/statuses/${o}`,e,"put",s,n,r,l,c,u,d,h,m,p)}async function l(t,e,o){const i=`${(0,a.E)(t)}/api/v1/statuses/${o}/context`;return(0,s.U2)(i,(0,a.I)(e),{timeout:s.EH})}async function c(t,e,o){const i=`${(0,a.E)(t)}/api/v1/statuses/${o}`;return(0,s.U2)(i,(0,a.I)(e),{timeout:s.EH})}async function u(t,e,o){const i=`${(0,a.E)(t)}/api/v1/statuses/${o}/source`;return(0,s.U2)(i,(0,a.I)(e),{timeout:s.EH})}},3:(t,e,o)=>{o.d(e,{n:()=>a});const a=()=>Promise.all([o.e(8289),o.e(3274),o.e(7539),o.e(7080),o.e(9418)]).then(o.bind(o,9418)).then((t=>t.default))},4831:(t,e,o)=>{o.d(e,{i:()=>d});var a=o(8183),s=o(6373),i=o(2213);const n=(0,o(7686).g)(requestAnimationFrame),r=new Map;function l(t){if(!t||!t.nodeName||"TEXTAREA"!==t.nodeName||r.has(t))return;const e=(0,i.JX)();let o=null;function l(){(0,a.B)("autosize:resize()"),function(){const a=t.style.height,s=e.scrollTop;t.style.height="";const i=t.scrollHeight+o;0===t.scrollHeight?t.style.height=a:(t.style.height=`${i}px`,e.scrollTop=s)}(),(0,a.s)("autosize:resize()")}const c=()=>n(u);function u(){(0,a.B)("autosize:update()"),l(),(0,a.s)("autosize:update()")}const d=(0,s.D)((()=>requestAnimationFrame(u)),1e3);window.addEventListener("resize",d,!1),t.addEventListener("input",c,!1),r.set(t,{destroy:()=>{window.removeEventListener("resize",d,!1),t.removeEventListener("input",c,!1),r.delete(t)},update:u}),function(){const e=window.getComputedStyle(t,null);o="content-box"===e.boxSizing?-(parseFloat(e.paddingTop)+parseFloat(e.paddingBottom)):parseFloat(e.borderTopWidth)+parseFloat(e.borderBottomWidth),u()}()}function c(t){const e=r.get(t);e&&e.destroy()}function u(t){const e=r.get(t);e&&e.update()}const d=(t,e)=>(t&&Array.prototype.forEach.call(t.length?t:[t],(t=>l(t))),t);d.destroy=t=>(t&&Array.prototype.forEach.call(t.length?t:[t],c),t),d.update=t=>(t&&Array.prototype.forEach.call(t.length?t:[t],u),t)},1793:(t,e,o)=>{o.d(e,{X:()=>c});var a=o(8978);const s=(0,a.I)((()=>/((https?:\/\/)((?:(?:(?:[^/\!'#%&'\(\)*\+,\\\-\.\/:;<=>\?@\[\]\^_{|}~\$//\x09-\x0D\x20\x85\xA0\u1680\u180E\u2000-\u200A\u2028\u2029\u202F\u205F\u3000//\uFFFE\uFEFF\uFFFF\u202A-\u202E/](?:[_-]|[^/\!'#%&'\(\)*\+,\\\-\.\/:;<=>\?@\[\]\^_{|}~\$//\x09-\x0D\x20\x85\xA0\u1680\u180E\u2000-\u200A\u2028\u2029\u202F\u205F\u3000//\uFFFE\uFEFF\uFFFF\u202A-\u202E/])*)?[^/\!'#%&'\(\)*\+,\\\-\.\/:;<=>\?@\[\]\^_{|}~\$//\x09-\x0D\x20\x85\xA0\u1680\u180E\u2000-\u200A\u2028\u2029\u202F\u205F\u3000//\uFFFE\uFEFF\uFFFF\u202A-\u202E/]\.)*(?:(?:[^/\!'#%&'\(\)*\+,\\\-\.\/:;<=>\?@\[\]\^_{|}~\$//\x09-\x0D\x20\x85\xA0\u1680\u180E\u2000-\u200A\u2028\u2029\u202F\u205F\u3000//\uFFFE\uFEFF\uFFFF\u202A-\u202E/](?:-|[^/\!'#%&'\(\)*\+,\\\-\.\/:;<=>\?@\[\]\^_{|}~\$//\x09-\x0D\x20\x85\xA0\u1680\u180E\u2000-\u200A\u2028\u2029\u202F\u205F\u3000//\uFFFE\uFEFF\uFFFF\u202A-\u202E/])*)?[^/\!'#%&'\(\)*\+,\\\-\.\/:;<=>\?@\[\]\^_{|}~\$//\x09-\x0D\x20\x85\xA0\u1680\u180E\u2000-\u200A\u2028\u2029\u202F\u205F\u3000//\uFFFE\uFEFF\uFFFF\u202A-\u202E/]\.)(?:(?:(?:||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||zuerich|zone|zippo|zip|zero|zara|zappos|yun|youtube|you|yokohama|yoga|yodobashi|yandex|yamaxun|yahoo|yachts|xyz|xxx|xperia|xin|xihuan|xfinity|xerox|xbox|wtf|wtc|wow|world|works|work|woodside|wolterskluwer|wme|winners|wine|windows|win|williamhill|wiki|wien|whoswho|weir|weibo|wedding|wed|website|weber|webcam|weatherchannel|weather|watches|watch|warman|wanggou|wang|walter|walmart|wales|vuelos|voyage|voto|voting|vote|volvo|volkswagen|vodka|vlaanderen|vivo|viva|vistaprint|vista|vision|visa|virgin|vip|vin|villas|viking|vig|video|viajes|vet|versicherung|vermgensberatung|vermgensberater|verisign|ventures|vegas|vanguard|vana|vacations|ups|uol|uno|university|unicom|uconnect|ubs|ubank|tvs|tushu|tunes|tui|tube|trv|trust|travelersinsurance|travelers|travelchannel|travel|training|trading|trade|toys|toyota|town|tours|total|toshiba|toray|top|tools|tokyo|today|tmall|tkmaxx|tjx|tjmaxx|tirol|tires|tips|tiffany|tienda|tickets|tiaa|theatre|theater|thd|teva|tennis|temasek|telefonica|telecity|tel|technology|tech|team|tdk|tci|taxi|tax|tattoo|tatar|tatamotors|target|taobao|talk|taipei|tab|systems|symantec|sydney|swiss|swiftcover|swatch|suzuki|surgery|surf|support|supply|supplies|sucks|style|study|studio|stream|store|storage|stockholm|stcgroup|stc|statoil|statefarm|statebank|starhub|star|staples|stada|srt|srl|spreadbetting|spot|spiegel|space|soy|sony|song|solutions|solar|sohu|software|softbank|social|soccer|sncf|smile|smart|sling|skype|sky|skin|ski|site|singles|sina|silk|shriram|showtime|show|shouji|shopping|shop|shoes|shiksha|shia|shell|shaw|sharp|shangrila|sfr|sexy|sex|sew|seven|ses|services|sener|select|seek|security|secure|seat|search|scot|scor|scjohnson|science|schwarz|schule|school|scholarships|schmidt|schaeffler|scb|sca|sbs|sbi|saxo|save|sas|sarl|sapo|sap|sanofi|sandvikcoromant|sandvik|samsung|samsclub|salon|sale|sakura|safety|safe|saarland|ryukyu|rwe|run|ruhr|rugby|rsvp|room|rogers|rodeo|rocks|rocher|rmit|rip|rio|ril|rightathome|ricoh|richardli|rich|rexroth|reviews|review|restaurant|rest|republican|report|repair|rentals|rent|ren|reliance|reit|reisen|reise|rehab|redumbrella|redstone|red|recipes|realty|realtor|realestate|read|raid|radio|racing|qvc|quest|quebec|qpon|pwc|pub|prudential|pru|protection|property|properties|promo|progressive|prof|productions|prod|pro|prime|press|praxi|pramerica|post|porn|politie|poker|pohl|pnc|plus|plumbing|playstation|play|place|pizza|pioneer|pink|ping|pin|pid|pictures|pictet|pics|piaget|physio|photos|photography|photo|phone|philips|phd|pharmacy|pfizer|pet|pccw|pay|passagens|party|parts|partners|pars|paris|panerai|panasonic|pamperedchef|page|ovh|ott|otsuka|osaka|origins|orientexpress|organic|org|orange|oracle|open|ooo|onyourside|online|onl|ong|one|omega|ollo|oldnavy|olayangroup|olayan|okinawa|office|off|observer|obi|nyc|ntt|nrw|nra|nowtv|nowruz|now|norton|northwesternmutual|nokia|nissay|nissan|ninja|nikon|nike|nico|nhk|ngo|nfl|nexus|nextdirect|next|news|newholland|new|neustar|network|netflix|netbank|net|nec|nba|navy|natura|nationwide|name|nagoya|nadex|nab|mutuelle|mutual|museum|mtr|mtpc|mtn|msd|movistar|movie|mov|motorcycles|moto|moscow|mortgage|mormon|mopar|montblanc|monster|money|monash|mom|moi|moe|moda|mobily|mobile|mobi|mma|mls|mlb|mitsubishi|mit|mint|mini|mil|microsoft|miami|metlife|merckmsd|meo|menu|men|memorial|meme|melbourne|meet|media|med|mckinsey|mcdonalds|mcd|mba|mattel|maserati|marshalls|marriott|markets|marketing|market|map|mango|management|man|makeup|maison|maif|madrid|macys|luxury|luxe|lupin|lundbeck|ltda|ltd|lplfinancial|lpl|love|lotto|lotte|london|lol|loft|locus|locker|loans|loan|lixil|living|live|lipsy|link|linde|lincoln|limo|limited|lilly|like|lighting|lifestyle|lifeinsurance|life|lidl|liaison|lgbt|lexus|lego|legal|lefrak|leclerc|lease|lds|lawyer|law|latrobe|latino|lat|lasalle|lanxess|landrover|land|lancome|lancia|lancaster|lamer|lamborghini|ladbrokes|lacaixa|kyoto|kuokgroup|kred|krd|kpn|kpmg|kosher|komatsu|koeln|kiwi|kitchen|kindle|kinder|kim|kia|kfh|kerryproperties|kerrylogistics|kerryhotels|kddi|kaufen|juniper|juegos|jprs|jpmorgan|joy|jot|joburg|jobs|jnj|jmp|jll|jlc|jio|jewelry|jetzt|jeep|jcp|jcb|java|jaguar|iwc|iveco|itv|itau|istanbul|ist|ismaili|iselect|irish|ipiranga|investments|intuit|international|intel|int|insure|insurance|institute|ink|ing|info|infiniti|industries|immobilien|immo|imdb|imamat|ikano|iinet|ifm|ieee|icu|ice|icbc|ibm|hyundai|hyatt|hughes|htc|hsbc|how|house|hotmail|hotels|hoteles|hot|hosting|host|hospital|horse|honeywell|honda|homesense|homes|homegoods|homedepot|holiday|holdings|hockey|hkt|hiv|hitachi|hisamitsu|hiphop|hgtv|hermes|here|helsinki|help|healthcare|health|hdfcbank|hdfc|hbo|haus|hangout|hamburg|hair|guru|guitars|guide|guge|gucci|guardian|group|grocery|gripe|green|gratis|graphics|grainger|gov|got|gop|google|goog|goodyear|goodhands|goo|golf|goldpoint|gold|godaddy|gmx|gmo|gmbh|gmail|globo|global|gle|glass|glade|giving|gives|gifts|gift|ggee|george|genting|gent|gea|gdn|gbiz|garden|gap|games|game|gallup|gallo|gallery|gal|fyi|futbol|furniture|fund|fun|fujixerox|fujitsu|ftr|frontier|frontdoor|frogans|frl|fresenius|free|fox|foundation|forum|forsale|forex|ford|football|foodnetwork|food|foo|fly|flsmidth|flowers|florist|flir|flights|flickr|fitness|fit|fishing|fish|firmdale|firestone|fire|financial|finance|final|film|fido|fidelity|fiat|ferrero|ferrari|feedback|fedex|fast|fashion|farmers|farm|fans|fan|family|faith|fairwinds|fail|fage|extraspace|express|exposed|expert|exchange|everbank|events|eus|eurovision|etisalat|esurance|estate|esq|erni|ericsson|equipment|epson|epost|enterprises|engineering|engineer|energy|emerck|email|education|edu|edeka|eco|eat|earth|dvr|dvag|durban|dupont|duns|dunlop|duck|dubai|dtv|drive|download|dot|doosan|domains|doha|dog|dodge|doctor|docs|dnp|diy|dish|discover|discount|directory|direct|digital|diet|diamonds|dhl|dev|design|desi|dentist|dental|democrat|delta|deloitte|dell|delivery|degree|deals|dealer|deal|dds|dclk|day|datsun|dating|date|data|dance|dad|dabur|cyou|cymru|cuisinella|csc|cruises|cruise|crs|crown|cricket|creditunion|creditcard|credit|courses|coupons|coupon|country|corsica|coop|cool|cookingchannel|cooking|contractors|contact|consulting|construction|condos|comsec|computer|compare|company|community|commbank|comcast|com|cologne|college|coffee|codes|coach|clubmed|club|cloud|clothing|clinique|clinic|click|cleaning|claims|cityeats|city|citic|citi|citadel|cisco|circle|cipriani|church|chrysler|chrome|christmas|chloe|chintai|cheap|chat|chase|channel|chanel|cfd|cfa|cern|ceo|center|ceb|cbs|cbre|cbn|cba|catholic|catering|cat|casino|cash|caseih|case|casa|cartier|cars|careers|career|care|cards|caravan|car|capitalone|capital|capetown|canon|cancerresearch|camp|camera|cam|calvinklein|call|cal|cafe|cab|bzh|buzz|buy|business|builders|build|bugatti|budapest|brussels|brother|broker|broadway|bridgestone|bradesco|box|boutique|bot|boston|bostik|bosch|boots|booking|book|boo|bond|bom|bofa|boehringer|boats|bnpparibas|bnl|bmw|bms|blue|bloomberg|blog|blockbuster|blanco|blackfriday|black|biz|bio|bingo|bing|bike|bid|bible|bharti|bet|bestbuy|best|berlin|bentley|beer|beauty|beats|bcn|bcg|bbva|bbt|bbc|bayern|bauhaus|basketball|baseball|bargains|barefoot|barclays|barclaycard|barcelona|bar|bank|band|bananarepublic|banamex|baidu|baby|azure|axa|aws|avianca|autos|auto|author|auspost|audio|audible|audi|auction|attorney|athleta|associates|asia|asda|arte|art|arpa|army|archi|aramco|arab|aquarelle|apple|app|apartments|aol|anz|anquan|android|analytics|amsterdam|amica|amfam|amex|americanfamily|americanexpress|alstom|alsace|ally|allstate|allfinanz|alipay|alibaba|alfaromeo|akdn|airtel|airforce|airbus|aigo|aig|agency|agakhan|africa|afl|afamilycompany|aetna|aero|aeg|adult|ads|adac|actor|active|aco|accountants|accountant|accenture|academy|abudhabi|abogado|able|abc|abbvie|abbott|abb|abarth|aarp|aaa|onion)(?=[^0-9a-zA-Z@]|$))|(?:(?:||||||||||||||||||||||||||||||||||||||||||||||||||||||||zw|zm|za|yt|ye|ws|wf|vu|vn|vi|vg|ve|vc|va|uz|uy|us|um|uk|ug|ua|tz|tw|tv|tt|tr|tp|to|tn|tm|tl|tk|tj|th|tg|tf|td|tc|sz|sy|sx|sv|su|st|ss|sr|so|sn|sm|sl|sk|sj|si|sh|sg|se|sd|sc|sb|sa|rw|ru|rs|ro|re|qa|py|pw|pt|ps|pr|pn|pm|pl|pk|ph|pg|pf|pe|pa|om|nz|nu|nr|np|no|nl|ni|ng|nf|ne|nc|na|mz|my|mx|mw|mv|mu|mt|ms|mr|mq|mp|mo|mn|mm|ml|mk|mh|mg|mf|me|md|mc|ma|ly|lv|lu|lt|ls|lr|lk|li|lc|lb|la|kz|ky|kw|kr|kp|kn|km|ki|kh|kg|ke|jp|jo|jm|je|it|is|ir|iq|io|in|im|il|ie|id|hu|ht|hr|hn|hm|hk|gy|gw|gu|gt|gs|gr|gq|gp|gn|gm|gl|gi|gh|gg|gf|ge|gd|gb|ga|fr|fo|fm|fk|fj|fi|eu|et|es|er|eh|eg|ee|ec|dz|do|dm|dk|dj|de|cz|cy|cx|cw|cv|cu|cr|co|cn|cm|cl|ck|ci|ch|cg|cf|cd|cc|ca|bz|by|bw|bv|bt|bs|br|bq|bo|bn|bm|bl|bj|bi|bh|bg|bf|be|bd|bb|ba|az|ax|aw|au|at|as|ar|aq|ao|an|am|al|ai|ag|af|ae|ad|ac)(?=[^0-9a-zA-Z@]|$))|(?:xn--[0-9a-z]+))))(?::([0-9]+))?(\/(?:(?:[^\x09-\x0D\x20\x85\xA0\u1680\u180E\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\(\)\?]*(?:\((?:[^\x09-\x0D\x20\x85\xA0\u1680\u180E\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\(\)\?]+|(?:[^\x09-\x0D\x20\x85\xA0\u1680\u180E\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\(\)\?]*\([^\x09-\x0D\x20\x85\xA0\u1680\u180E\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\(\)\?]+\)[^\x09-\x0D\x20\x85\xA0\u1680\u180E\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\(\)\?]*))\)[^\x09-\x0D\x20\x85\xA0\u1680\u180E\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\(\)\?]*)*[^\x09-\x0D\x20\x85\xA0\u1680\u180E\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\(\)\?!\*';:=\,\.\$%\[\]\u002d\u058a\u05be\u1400\u1806\u2010-\u2015\u2e17\u2e1a\u2e3a\u2e40\u301c\u3030\u30a0\ufe31\ufe58\ufe63\uff0d~&\|@]|(?:\((?:[^\x09-\x0D\x20\x85\xA0\u1680\u180E\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\(\)\?]+|(?:[^\x09-\x0D\x20\x85\xA0\u1680\u180E\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\(\)\?]*\([^\x09-\x0D\x20\x85\xA0\u1680\u180E\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\(\)\?]+\)[^\x09-\x0D\x20\x85\xA0\u1680\u180E\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\(\)\?]*))\)))|(?:@[^\x09-\x0D\x20\x85\xA0\u1680\u180E\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\(\)\?]+\/))*)?(\?[a-z0-9!?\*'@\(\);:&=\+\$\/%#\[\]\-_\.,~|]*[a-z0-9_&=#\/])?)/gi)),i=(0,a.I)((()=>/(^|[^\/\w])@(([a-z0-9_]+)@[a-z0-9\.\-]+[a-z0-9]+)/gi));var n=o(8183),r=o(641);const l="xxxxxxxxxxxxxxxxxxxxxxx";function c(t){if(!t)return 0;(0,n.B)("measureText()");const e=t.replace(s(),l).replace(i(),"$1@$3"),o=(0,r.length)(e);return(0,n.s)("measureText()"),o}},101:(t,e,o)=>{o.d(e,{b:()=>r});const a=new MessageChannel,s=[];function i(t){try{t()}catch(e){console.error(e)}}function n(){a.port2.postMessage(void 0)}a.port1.onmessage=function(){for(const t of s)i(t);s.length=0};const r=t=>{1===s.push(t)&&requestAnimationFrame(n)}},9006:(t,e,o)=>{o.d(e,{g:()=>i});var a=o(8183);const s=new DOMParser;function i(t,e){if(!t)return"";(0,a.B)("statusHtmlToPlainText");const o=s.parseFromString(t,"text/html");!function(t,e){const o=t.querySelectorAll("a.mention");for(let a=0;a<o.length;a++){const t=o[a],s=t.getAttribute("href"),i=e.find((t=>t.url===s));i&&(t.innerText=`@${i.acct}`)}}(o,e);const i=function(t){let e="";const o=t.querySelectorAll("p");for(let a=0;a<o.length;a++){const s=o[a],i=s.querySelectorAll("br");for(let e=0;e<i.length;e++){const o=i[e];o.parentNode.replaceChild(t.createTextNode("\n"),o)}e+=(a>0?"\n\n":"")+s.textContent}return e}(o);return(0,a.s)("statusHtmlToPlainText"),i}},7686:(t,e,o)=>{o.d(e,{g:()=>a});const a=t=>{let e;const o=()=>{const t=e;e=null,t()};return a=>{e||t(o),e=a}}}}]);
//# sourceMappingURL=5482.002932cfd15c3e5fe1e6.5482.js.map