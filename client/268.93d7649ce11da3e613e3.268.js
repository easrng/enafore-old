"use strict";(this.webpackChunk=this.webpackChunk||[]).push([[268],{268:(e,r,t)=>{t.r(r),t.d(r,{default:()=>g});var l=t(4178),a=t(5291),i=t(1095),o=t(9065),s=t(2771),n=t(6288),c=t(5524),d=t(2650),h=t(6677);var f={show:o.$,close:s.x,onWordOrPhraseChange(e){this.computeConfirmationButtonDisabled()},onExpiryChange(e){},onContextChange(e){this.computeConfirmationButtonDisabled()},async save(){const e=this.syncDomToFilter(),{instanceName:r}=this.get();await(0,h.re)(r,e)},computeConfirmationButtonDisabled(){const e=!(this.refs.wordInput.value.replace(/\s+/g,"")&&[...this.refs.contextCheckboxes.querySelectorAll("input")].some((e=>e.checked)));this.set({confirmationButtonDisabled:e})},syncFilterToDom(e){e||(e={phrase:"",expires_at:d._s,context:[...d.j6],irreversible:!1,whole_word:!0}),this.refs.wordInput.value=e.phrase;let r=0;if(e.expires_at){const t=Date.now();r=d.lG.filter((e=>e.value)).sort(((r,l)=>{const a=t+1e3*r.value,i=t+1e3*l.value;return Math.abs(new Date(e.expires_at).getTime()-a)<Math.abs(new Date(e.expires_at).getTime()-i)?-1:1}))[0].value}this.refs.expireSelectWrapper.querySelector("select").value=r;for(const t of[...this.refs.contextCheckboxes.querySelectorAll("input")])t.checked=e.context.includes(t.value);this.refs.irreversibleCheckbox.checked=!!e.irreversible,this.refs.wholeWordCheckbox.checked=!!e.whole_word},syncDomToFilter(){const e=this.get().filter,r={id:e&&e.id};r.phrase=this.refs.wordInput.value;const t=this.refs.expireSelectWrapper.querySelector("select"),l=parseInt(t.value,10);return r.expires_in=l||null,r.context=[...this.refs.contextCheckboxes.querySelectorAll("input")].filter((e=>e.checked)).map((e=>e.value)),r.irreversible=this.refs.irreversibleCheckbox.checked,r.whole_word=this.refs.wholeWordCheckbox.checked,r}};async function p(){n.U.call(this),this.syncFilterToDom(this.get().filter),this.computeConfirmationButtonDisabled()}function u(e){const{component:r}=this._svelte;r.onContextChange(e)}function v(e,r,t){const l=Object.create(e);return l.context=r[t],l}function w(e,r){var t,a,i,o,s,n,c,d,h=r.context.label;return{c(){t=(0,l.az)("li"),a=(0,l.az)("input"),s=(0,l.rw)("\n          "),n=(0,l.az)("label"),c=(0,l.rw)(h),this.h()},l(e){t=(0,l.d$)(e,"LI",{},!1);var r=(0,l.pI)(t);a=(0,l.d$)(r,"INPUT",{type:!0,name:!0,value:!0,id:!0},!1),(0,l.pI)(a).forEach(l.r2),s=(0,l.M4)(r,"\n          "),n=(0,l.d$)(r,"LABEL",{for:!0},!1);var i=(0,l.pI)(n);c=(0,l.M4)(i,h),i.forEach(l.r2),r.forEach(l.r2),this.h()},h(){a._svelte={component:e},(0,l.NH)(a,"change",u),(0,l.P$)(a,"type","checkbox"),a.name="where-to-filter",a.value=i=r.context.value,a.id=o="where-to-filter-"+r.context.value,n.htmlFor=d="where-to-filter-"+r.context.value},m(e,r){(0,l.$T)(e,t,r),(0,l.R3)(t,a),(0,l.R3)(t,s),(0,l.R3)(t,n),(0,l.R3)(n,c)},p(e,r){e.filterContexts&&i!==(i=r.context.value)&&(a.value=i),e.filterContexts&&o!==(o="where-to-filter-"+r.context.value)&&(a.id=o),e.filterContexts&&h!==(h=r.context.label)&&(0,l.a_)(c,h),e.filterContexts&&d!==(d="where-to-filter-"+r.context.value)&&(n.htmlFor=d)},d(e){e&&(0,l.r2)(t),(0,l.ys)(a,"change",u)}}}function m(e){var r;if((0,l.S1)(this,e),this.store=c.h,this.refs={},this._state=(0,l.f0)({filter:void 0,instanceName:void 0,positiveText:"Save",expiryOptions:d.lG,expiryDefaultValue:d._s,filterContexts:[{label:"Home and lists",value:d.Ny},{label:"Notifications",value:d.zW},{label:"Public timelines",value:d.wM},{label:"Conversations",value:d.IO},{label:"Profiles",value:d.aO}],confirmationButtonDisabled:!1},e.data),this._intro=!0,document.getElementById("svelte-cq5mjj-style")||((r=(0,l.az)("style")).id="svelte-cq5mjj-style",r.textContent='.word-filter-dialog.svelte-cq5mjj{padding:20px 40px;overflow-y:auto;display:grid;grid-template-areas:"keyword      expire"\n                       "context      context"\n                       "irreversible whole";grid-row-gap:20px;grid-column-gap:10px}.word-filter-label-like.svelte-cq5mjj{font-size:1.3em}.word-filter-radio-list.svelte-cq5mjj{list-style:none;margin-top:5px}.word-filter-keyword.svelte-cq5mjj{grid-area:keyword}.word-filter-expire-after.svelte-cq5mjj{grid-area:expire}.word-filter-where-to-filter.svelte-cq5mjj{grid-area:context}.word-filter-irreversible.svelte-cq5mjj{grid-area:irreversible}.word-filter-whole.svelte-cq5mjj{grid-area:whole}.word-filter-keyword-label.svelte-cq5mjj,.word-filter-expire-label.svelte-cq5mjj{margin-right:10px}.required.svelte-cq5mjj{color:var(--warn-color)}@media(max-width: 479px){.word-filter-dialog.svelte-cq5mjj{grid-template-areas:"keyword"\n                         "expire"\n                         "context"\n                         "irreversible"\n                         "whole";grid-column-gap:5px;grid-row-gap:10px}}@media(max-width: 320px){.word-filter-dialog.svelte-cq5mjj{grid-row-gap:5px}}',(0,l.R3)(document.head,r)),this._fragment=function(e,r){var t,o,s,n,c,d,h,f,p,u,m,x,b,g,y,j,I,R,k,C,q,E,N,_,$,z,D,M,P,W,S,T,B,A,V,O,L;function F(r){e.onWordOrPhraseChange(r)}var U={className:"word-filter-expiry-select",options:r.expiryOptions,defaultValue:r.expiryDefaultValue,label:"Expire after"},G=new i.Z({root:e.root,store:e.store,data:U});G.on("change",(function(r){e.onExpiryChange(r)}));for(var H=r.filterContexts,Z=[],J=0;J<H.length;J+=1)Z[J]=w(e,v(r,H,J));var K={id:r.id,label:r.label,title:r.title,positiveText:r.positiveText,confirmationButtonDisabled:r.confirmationButtonDisabled},Q=new a.Z({root:e.root,store:e.store,slots:{default:(0,l.xJ)()},data:K});return Q.on("positive",(function(r){e.save()})),{c(){t=(0,l.az)("div"),o=(0,l.az)("div"),s=(0,l.az)("label"),n=(0,l.az)("span"),c=(0,l.rw)("Word or phrase"),d=(0,l.rw)("\n        \n        "),h=(0,l.az)("span"),f=(0,l.rw)("*"),p=(0,l.rw)("\n      "),u=(0,l.az)("input"),m=(0,l.rw)("\n    "),x=(0,l.az)("div"),b=(0,l.az)("span"),g=(0,l.rw)("Expire after"),y=(0,l.rw)("\n      "),G._fragment.c(),j=(0,l.rw)("\n    "),I=(0,l.az)("div"),R=(0,l.az)("span"),k=(0,l.az)("span"),C=(0,l.rw)("Where to filter"),q=(0,l.rw)("\n        "),E=(0,l.az)("span"),N=(0,l.rw)("*"),_=(0,l.rw)("\n      "),$=(0,l.az)("ul");for(var e=0;e<Z.length;e+=1)Z[e].c();z=(0,l.rw)("\n    "),D=(0,l.az)("div"),M=(0,l.az)("input"),P=(0,l.rw)("\n      "),W=(0,l.az)("label"),S=(0,l.rw)("Irreversible"),T=(0,l.rw)("\n    "),B=(0,l.az)("div"),A=(0,l.az)("input"),V=(0,l.rw)("\n      "),O=(0,l.az)("label"),L=(0,l.rw)("Whole word"),Q._fragment.c(),this.h()},l(e){t=(0,l.d$)(e,"DIV",{class:!0},!1);var r=(0,l.pI)(t);o=(0,l.d$)(r,"DIV",{class:!0},!1);var a=(0,l.pI)(o);s=(0,l.d$)(a,"LABEL",{for:!0,class:!0},!1);var i=(0,l.pI)(s);n=(0,l.d$)(i,"SPAN",{},!1);var v=(0,l.pI)(n);c=(0,l.M4)(v,"Word or phrase"),v.forEach(l.r2),d=(0,l.M4)(i,"\n        \n        "),h=(0,l.d$)(i,"SPAN",{"aria-hidden":!0,class:!0},!1);var w=(0,l.pI)(h);f=(0,l.M4)(w,"*"),w.forEach(l.r2),i.forEach(l.r2),p=(0,l.M4)(a,"\n      "),u=(0,l.d$)(a,"INPUT",{type:!0,required:!0,autocomplete:!0,autocapitalize:!0,id:!0},!1),(0,l.pI)(u).forEach(l.r2),a.forEach(l.r2),m=(0,l.M4)(r,"\n    "),x=(0,l.d$)(r,"DIV",{class:!0},!1);var F=(0,l.pI)(x);b=(0,l.d$)(F,"SPAN",{class:!0},!1);var U=(0,l.pI)(b);g=(0,l.M4)(U,"Expire after"),U.forEach(l.r2),y=(0,l.M4)(F,"\n      "),G._fragment.l(F),F.forEach(l.r2),j=(0,l.M4)(r,"\n    "),I=(0,l.d$)(r,"DIV",{class:!0},!1);var H=(0,l.pI)(I);R=(0,l.d$)(H,"SPAN",{class:!0,id:!0},!1);var J=(0,l.pI)(R);k=(0,l.d$)(J,"SPAN",{},!1);var K=(0,l.pI)(k);C=(0,l.M4)(K,"Where to filter"),K.forEach(l.r2),q=(0,l.M4)(J,"\n        "),E=(0,l.d$)(J,"SPAN",{"aria-label":!0,class:!0},!1);var X=(0,l.pI)(E);N=(0,l.M4)(X,"*"),X.forEach(l.r2),J.forEach(l.r2),_=(0,l.M4)(H,"\n      "),$=(0,l.d$)(H,"UL",{class:!0,"aria-describedby":!0},!1);for(var Y=(0,l.pI)($),ee=0;ee<Z.length;ee+=1)Z[ee].l(Y);Y.forEach(l.r2),H.forEach(l.r2),z=(0,l.M4)(r,"\n    "),D=(0,l.d$)(r,"DIV",{class:!0},!1);var re=(0,l.pI)(D);M=(0,l.d$)(re,"INPUT",{type:!0,name:!0,id:!0},!1),(0,l.pI)(M).forEach(l.r2),P=(0,l.M4)(re,"\n      "),W=(0,l.d$)(re,"LABEL",{for:!0},!1);var te=(0,l.pI)(W);S=(0,l.M4)(te,"Irreversible"),te.forEach(l.r2),re.forEach(l.r2),T=(0,l.M4)(r,"\n    "),B=(0,l.d$)(r,"DIV",{class:!0},!1);var le=(0,l.pI)(B);A=(0,l.d$)(le,"INPUT",{type:!0,name:!0,id:!0},!1),(0,l.pI)(A).forEach(l.r2),V=(0,l.M4)(le,"\n      "),O=(0,l.d$)(le,"LABEL",{for:!0},!1);var ae=(0,l.pI)(O);L=(0,l.M4)(ae,"Whole word"),ae.forEach(l.r2),le.forEach(l.r2),r.forEach(l.r2),Q._fragment.l(e),this.h()},h(){(0,l.P$)(h,"aria-hidden","true"),h.className="required svelte-cq5mjj",s.htmlFor="word-filter-word-or-phrase",s.className="word-filter-keyword-label svelte-cq5mjj",(0,l.NH)(u,"input",F),(0,l.P$)(u,"type","text"),u.required=!0,u.autocomplete="off",(0,l.P$)(u,"autocapitalize","off"),u.id="word-filter-word-or-phrase",o.className="word-filter-keyword svelte-cq5mjj",b.className="word-filter-label-like word-filter-expire-label svelte-cq5mjj",x.className="word-filter-expire-after svelte-cq5mjj",(0,l.P$)(E,"aria-label","Required"),E.className="required svelte-cq5mjj",R.className="word-filter-label-like svelte-cq5mjj",R.id="word-filter-where-to-filter-label",$.className="word-filter-radio-list svelte-cq5mjj",(0,l.P$)($,"aria-describedby","word-filter-where-to-filter-label"),I.className="word-filter-where-to-filter svelte-cq5mjj",(0,l.P$)(M,"type","checkbox"),M.name="irreversible",M.id="word-filter-irreversible",W.htmlFor="word-filter-irreversible",D.className="word-filter-irreversible svelte-cq5mjj",(0,l.P$)(A,"type","checkbox"),A.name="irreversible",A.id="word-filter-whole",O.htmlFor="word-filter-whole",B.className="word-filter-whole svelte-cq5mjj",t.className="word-filter-dialog svelte-cq5mjj"},m(r,a){(0,l.R3)(Q._slotted.default,t),(0,l.R3)(t,o),(0,l.R3)(o,s),(0,l.R3)(s,n),(0,l.R3)(n,c),(0,l.R3)(s,d),(0,l.R3)(s,h),(0,l.R3)(h,f),(0,l.R3)(o,p),(0,l.R3)(o,u),e.refs.wordInput=u,(0,l.R3)(t,m),(0,l.R3)(t,x),(0,l.R3)(x,b),(0,l.R3)(b,g),(0,l.R3)(x,y),G._mount(x,null),e.refs.expireSelectWrapper=x,(0,l.R3)(t,j),(0,l.R3)(t,I),(0,l.R3)(I,R),(0,l.R3)(R,k),(0,l.R3)(k,C),(0,l.R3)(R,q),(0,l.R3)(R,E),(0,l.R3)(E,N),(0,l.R3)(I,_),(0,l.R3)(I,$);for(var i=0;i<Z.length;i+=1)Z[i].m($,null);e.refs.contextCheckboxes=$,(0,l.R3)(t,z),(0,l.R3)(t,D),(0,l.R3)(D,M),e.refs.irreversibleCheckbox=M,(0,l.R3)(D,P),(0,l.R3)(D,W),(0,l.R3)(W,S),(0,l.R3)(t,T),(0,l.R3)(t,B),(0,l.R3)(B,A),e.refs.wholeWordCheckbox=A,(0,l.R3)(B,V),(0,l.R3)(B,O),(0,l.R3)(O,L),Q._mount(r,a)},p(r,t){var l={};if(r.expiryOptions&&(l.options=t.expiryOptions),r.expiryDefaultValue&&(l.defaultValue=t.expiryDefaultValue),G._set(l),r.filterContexts){H=t.filterContexts;for(var a=0;a<H.length;a+=1){const l=v(t,H,a);Z[a]?Z[a].p(r,l):(Z[a]=w(e,l),Z[a].c(),Z[a].m($,null))}for(;a<Z.length;a+=1)Z[a].d(1);Z.length=H.length}var i={};r.id&&(i.id=t.id),r.label&&(i.label=t.label),r.title&&(i.title=t.title),r.positiveText&&(i.positiveText=t.positiveText),r.confirmationButtonDisabled&&(i.confirmationButtonDisabled=t.confirmationButtonDisabled),Q._set(i)},d(r){(0,l.ys)(u,"input",F),e.refs.wordInput===u&&(e.refs.wordInput=null),G.destroy(),e.refs.expireSelectWrapper===x&&(e.refs.expireSelectWrapper=null),(0,l.kw)(Z,r),e.refs.contextCheckboxes===$&&(e.refs.contextCheckboxes=null),e.refs.irreversibleCheckbox===M&&(e.refs.irreversibleCheckbox=null),e.refs.wholeWordCheckbox===A&&(e.refs.wholeWordCheckbox=null),Q.destroy(r)}}}(this,this._state),this.root._oncreate.push((()=>{p.call(this),this.fire("update",{changed:(0,l.lZ)({},this._state),current:this._state})})),e.target){var t=(0,l.pI)(e.target);e.hydrate?this._fragment.l(t):this._fragment.c(),t.forEach(l.r2),this._mount(e.target,e.anchor),(0,l.yl)(this)}}(0,l.f0)(m.prototype,l.uS),(0,l.f0)(m.prototype,f);const x=m;var b=t(3634);function g({filter:e,instanceName:r}){const t=e?"Edit filter":"Add filter";return(0,b.v)(x,{label:t,title:t,filter:e,instanceName:r})}},2650:(e,r,t)=>{t.d(r,{IO:()=>o,Ny:()=>l,_s:()=>d,aO:()=>s,j6:()=>n,lG:()=>c,wM:()=>i,zW:()=>a});const l="home",a="notifications",i="public",o="thread",s="account",n=[l,a,i,o,s],c=[{value:0,label:"Never"},{value:1800,label:"30 minutes"},{value:3600,label:"1 hour"},{value:21600,label:"6 hours"},{value:43200,label:"12 hours"},{value:86400,label:"1 day"},{value:604800,label:"7 days"}],d=0}}]);
//# sourceMappingURL=268.93d7649ce11da3e613e3.268.js.map