{"version":3,"file":"5840.a7fb3fb8b7cf08c94bae.5840.js","mappings":"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","sources":["webpack:///./src/routes/_components/NonAutoplayImg.html","webpack:///./src/routes/_components/Avatar.html","webpack:///./src/routes/_components/IconButton.html","webpack:///./src/routes/_components/LazyImage.html","webpack:///./src/routes/_components/profile/AccountDisplayName.html","webpack:///./src/routes/_utils/userAgent/isIOS.js","webpack:///./src/routes/_utils/userAgent/isIOSPre13.js","webpack:///./src/routes/_static/media.js","webpack:///./src/routes/_utils/classname.js","webpack:///./src/routes/_utils/coordsToPercent.js","webpack:///./src/routes/_utils/decodeImage.js","webpack:///./src/routes/_utils/emojifyText.js","webpack:///./src/routes/_utils/events.js","webpack:///./src/routes/_utils/removeEmoji.js","webpack:///./src/routes/_utils/emojiRegex.js","webpack:///./src/routes/_utils/replaceEmoji.js","webpack:///./src/routes/_utils/strings.js"],"sourcesContent":["<img\n  class={computedClass}\n  aria-hidden={ariaHidden}\n  {alt}\n  {title}\n  {width}\n  {height}\n  src={displaySrc}\n  on:mouseover=\"onMouseOver(event)\"\n  ref:node\n/>\n<style>\n  .non-autoplay-zoom-in {\n    cursor: zoom-in;\n  }\n  .non-autoplay-zoom-in.is-link {\n    cursor: pointer;\n  }\n</style>\n<script>\n  import { mouseover } from '../_utils/events.js'\n  import { decodeImage } from '../_utils/decodeImage.js'\n  import { classname } from '../_utils/classname.js'\n  import { ONE_TRANSPARENT_PIXEL } from '../_static/media.js'\n\n  export default {\n    async oncreate () {\n      const { currentSrc } = this.get()\n      try {\n        const image = new Image()\n        image.src = currentSrc\n        await decodeImage(image)\n        this.set({ loaded: true })\n        this.fire('imgLoad')\n      } catch (e) {\n        this.fire('imgLoadError', e)\n      }\n    },\n    methods: {\n      onMouseOver (mouseOver) {\n        this.set({ mouseOver })\n      }\n    },\n    events: {\n      mouseover\n    },\n    data: () => ({\n      alt: '',\n      title: '',\n      mouseOver: false,\n      loaded: false,\n      ariaHidden: false\n    }),\n    computed: {\n      computedClass: ({ className, src, staticSrc, isLink }) => (classname(\n        className,\n        src !== staticSrc && 'non-autoplay-zoom-in',\n        isLink && 'is-link'\n      )),\n      currentSrc: ({ mouseOver, src, staticSrc }) => mouseOver ? src : staticSrc,\n      // using a transparent pixel as placeholder ensures broken images don't have wrong sizes\n      displaySrc: ({ loaded, currentSrc }) => loaded ? currentSrc : ONE_TRANSPARENT_PIXEL\n    }\n  }\n</script>\n","{#if error}\n<SvgIcon className={computedClass} style={svgStyle} href=\"#fa-user\" />\n{:elseif $autoplayGifs}\n  <LazyImage\n    className={computedClass}\n    ariaHidden=\"true\"\n    forceSize=true\n    alt=\"\"\n    src={account.avatar}\n    {width}\n    {height}\n    on:imgLoad=\"set({loaded: true})\"\n    on:imgLoadError=\"set({error: true})\" />\n{:else}\n  <NonAutoplayImg\n    className={computedClass}\n    ariaHidden=\"true\"\n    alt=\"\"\n    src={account.avatar}\n    staticSrc={account.avatar_static}\n    {width}\n    {height}\n    {isLink}\n    on:imgLoad=\"set({loaded: true})\"\n    on:imgLoadError=\"set({error: true})\"\n  />\n{/if}\n<style>\n  :global(.avatar) {\n    border-radius: 4px;\n    background: var(--loading-bg);\n  }\n\n  :global(.avatar.loaded) {\n    background: none;\n  }\n\n  :global(svg.avatar) {\n    fill: var(--deemphasized-text-color);\n  }\n</style>\n<script>\n  import { store } from '../_store/store.js'\n  import NonAutoplayImg from './NonAutoplayImg.html'\n  import { classname } from '../_utils/classname.js'\n  import LazyImage from './LazyImage.html'\n  import SvgIcon from './SvgIcon.html'\n\n  export default {\n    data: () => ({\n      className: undefined,\n      loaded: false,\n      error: undefined,\n      isLink: false,\n      size: 'medium'\n    }),\n    store: () => store,\n    computed: {\n      computedClass: ({ className, loaded }) => (classname(\n        'avatar',\n        className,\n        loaded && 'loaded'\n      )),\n      width: ({ size, $isMobileSize }) => {\n        switch (size) {\n          case 'extra-small':\n            return 24\n          case 'small':\n            return 48\n          case 'big':\n            return $isMobileSize ? 80 : 100\n          case 'medium':\n          default:\n            return 64\n        }\n      },\n      height: ({ width }) => width,\n      svgStyle: ({ width, height }) => `width: ${width}px; height: ${height}px;`\n    },\n    components: {\n      NonAutoplayImg,\n      LazyImage,\n      SvgIcon\n    }\n  }\n</script>\n","<!-- Normally \"pressable\" icons would be toggle buttons, but to avoid having the titles and labels mismatched\n     due to guidelines from http://w3c.github.io/aria-practices/#button , we just use normal buttons and change\n     the aria-label instead. -->\n<button id={elementId}\n        type=\"button\"\n        title={ariaLabel}\n        aria-label={ariaLabel}\n        aria-hidden={ariaHidden ? 'true' : undefined}\n        tabindex={ariaHidden ? '-1' : '0'}\n        class={computedClass}\n        {disabled}\n        ref:node\n>\n  <SvgIcon className=\"icon-button-svg {svgClassName || ''}\" ref:svg {href} />\n  {#if checked}\n    <SvgIcon className=\"icon-button-svg icon-button-check\" ref:check href=\"#fa-check\" />\n  {/if}\n</button>\n<style>\n  .icon-button {\n    position: relative;\n    padding: 6px 10px;\n    background: none;\n    border: none;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    pointer-events: auto;\n  }\n\n  :global(.icon-button-svg) {\n    width: 24px;\n    height: 24px;\n    fill: var(--action-button-fill-color);\n    pointer-events: none; /* hack for Edge */\n  }\n\n  :global(.icon-button-check) {\n    position: absolute;\n    top: 1px;\n    right: 2px;\n    height: 12px;\n    width: 12px;\n  }\n\n  :global(.icon-button.big-icon .icon-button-svg) {\n    width: 32px;\n    height: 32px;\n  }\n\n  /*\n   * regular styles\n   */\n\n  :global(.icon-button:hover .icon-button-svg) {\n    fill: var(--action-button-fill-color-hover);\n  }\n\n  :global(.icon-button.not-pressable:active .icon-button-svg,\n  .icon-button.same-pressed:active .icon-button-svg) {\n    fill: var(--action-button-fill-color-active);\n  }\n\n  :global(.icon-button.pressed.not-same-pressed .icon-button-svg) {\n    fill: var(--action-button-fill-color-pressed);\n  }\n\n  :global(.icon-button.pressed.not-same-pressed:hover .icon-button-svg) {\n    fill: var(--action-button-fill-color-pressed-hover);\n  }\n\n  :global(.icon-button.pressed.not-same-pressed:active .icon-button-svg) {\n    fill: var(--action-button-fill-color-pressed-active);\n  }\n\n  /*\n   * muted\n   */\n\n  :global(.icon-button.muted-style .icon-button-svg) {\n    fill: var(--action-button-deemphasized-fill-color);\n  }\n\n  :global(.icon-button.muted-style:hover .icon-button-svg) {\n    fill: var(--action-button-deemphasized-fill-color-hover);\n  }\n\n  :global(.icon-button.muted-style.not-pressable:active .icon-button-svg,\n  .icon-button.muted-style.same-pressed:active .icon-button-svg) {\n    fill: var(--action-button-deemphasized-fill-color-active);\n  }\n\n  :global(.icon-button.muted-style.pressed.not-same-pressed .icon-button-svg) {\n    fill: var(--action-button-deemphasized-fill-color-pressed);\n  }\n\n  :global(.icon-button.muted-style.pressed.not-same-pressed:hover .icon-button-svg) {\n    fill: var(--action-button-deemphasized-fill-color-pressed-hover);\n  }\n\n  :global(.icon-button.muted-style.pressed.not-same-pressed:active .icon-button-svg) {\n    fill: var(--action-button-deemphasized-fill-color-pressed-active);\n  }\n\n</style>\n<script>\n  import { classname } from '../_utils/classname.js'\n  import { store } from '../_store/store.js'\n  import SvgIcon from './SvgIcon.html'\n\n  export default {\n    oncreate () {\n      const { clickListener, rightClickListener } = this.get()\n      if (clickListener) {\n        this.onClick = this.onClick.bind(this)\n        this.refs.node.addEventListener('click', this.onClick)\n      }\n      if (rightClickListener) {\n        this.onRightClick = this.onRightClick.bind(this)\n        this.refs.node.addEventListener('contextmenu', this.onRightClick)\n      }\n      if (process.env.NODE_ENV !== 'production') {\n        const { pressable, pressedLabel, label } = this.get()\n        if (pressable && ((!pressedLabel || !label) || pressedLabel === label)) {\n          throw new Error('pressable buttons should have a label and a pressedLabel different from each other')\n        }\n      }\n    },\n    ondestroy () {\n      const { clickListener, rightClickListener } = this.get()\n      if (clickListener) {\n        this.refs.node.removeEventListener('click', this.onClick)\n      }\n      if (rightClickListener) {\n        this.refs.node.removeEventListener('contextmenu', this.onRightClick)\n      }\n    },\n    data: () => ({\n      big: false,\n      muted: false,\n      disabled: false,\n      svgClassName: undefined,\n      elementId: '',\n      pressable: false,\n      pressed: false,\n      pressedLabel: undefined,\n      className: undefined,\n      sameColorWhenPressed: false,\n      ariaHidden: false,\n      clickListener: true,\n      checked: false\n    }),\n    store: () => store,\n    computed: {\n      computedClass: ({ pressable, pressed, big, muted, sameColorWhenPressed, className }) => (classname(\n        'icon-button',\n        !pressable && 'not-pressable',\n        pressed && 'pressed',\n        big && 'big-icon',\n        muted && 'muted-style',\n        sameColorWhenPressed ? 'same-pressed' : 'not-same-pressed',\n        className\n      )),\n      ariaLabel: ({ pressable, pressed, label, pressedLabel }) => ((pressable && pressed) ? pressedLabel : label)\n    },\n    methods: {\n      animate (animation, checkmarkAnimation) {\n        this.refs.svg.animate(animation)\n        if (checkmarkAnimation && this.get().checked) {\n          this.refs.check.animate(checkmarkAnimation)\n        }\n      },\n      onClick (e) {\n        this.fire('click', e)\n      },\n      onRightClick (e) {\n        e.preventDefault()\n        this.fire('rightClick', e)\n      }\n    },\n    components: {\n      SvgIcon\n    }\n  }\n</script>\n","<div class=\"lazy-image {className ? ' ' + className: ''}\" style={computedStyle} >\n  <img\n    aria-hidden={ariaHidden}\n    {alt}\n    {title}\n    {width}\n    {height}\n    src={displaySrc}\n    style={focusStyle}\n    ref:node\n  />\n</div>\n<style>\n  .lazy-image {\n    margin: 0;\n    padding: 0;\n    overflow: hidden;\n    display: flex;\n    width: 100%;\n    height: 100%;\n  }\n</style>\n<script>\n  import { decodeImage } from '../_utils/decodeImage.js'\n  import { coordsToPercent } from '../_utils/coordsToPercent.js'\n\n  export default {\n    async oncreate () {\n      const { node } = this.refs\n      try {\n        await decodeImage(node)\n      } catch (e) {\n        console.error('Image decode error', node && node.src, e)\n        this.set({ error: true })\n      }\n    },\n    data: () => ({\n      error: false,\n      forceSize: false,\n      fallback: undefined,\n      focus: undefined,\n      background: '',\n      width: undefined,\n      height: undefined,\n      ariaHidden: false,\n      alt: '',\n      title: '',\n      blurhash: undefined,\n      className: ''\n    }),\n    computed: {\n      computedStyle: ({ background }) => {\n        return [\n          background && `background: ${background};`\n        ].filter(Boolean).join('')\n      },\n      focusStyle: ({ focus }) => {\n        // Here we do a pure css version instead of using\n        // https://github.com/jonom/jquery-focuspoint#1-calculate-your-images-focus-point\n\n        if (!focus) {\n          return 'background-position: center;'\n        }\n        return `object-position: ${coordsToPercent(focus.x)}% ${100 - coordsToPercent(focus.y)}%;`\n      },\n      displaySrc: ({ blurhash, error, src, fallback }) => (blurhash || (error && fallback) || src)\n    }\n  }\n</script>\n","<span class=\"account-display-name\" title={accountName}>{@html massagedAccountName }</span>\n<style>\n  .account-display-name {\n    flex-grow: 1;\n    flex-shrink: 1;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    max-width: max-content;\n  }\n</style>\n<script>\n  import { emojifyText } from '../../_utils/emojifyText.js'\n  import { store } from '../../_store/store.js'\n  import escapeHtml from 'escape-html'\n  import { removeEmoji } from '../../_utils/removeEmoji.js'\n\n  export default {\n    store: () => store,\n    computed: {\n      emojis: ({ account }) => (account.emojis || []),\n      accountName: ({ account }) => (account.display_name || account.username),\n      massagedAccountName: ({ accountName, emojis, $autoplayGifs, $omitEmojiInDisplayNames, $disableDecomojiConverter }) => {\n        accountName = escapeHtml(accountName)\n\n        if ($omitEmojiInDisplayNames) { // display name emoji are annoying to some screenreader users\n          const emojiFreeDisplayName = removeEmoji(accountName, emojis)\n          if (emojiFreeDisplayName) {\n            return emojiFreeDisplayName\n          }\n        }\n\n        return emojifyText(accountName, emojis, $autoplayGifs, $disableDecomojiConverter)\n      }\n    }\n  }\n</script>\n","import { thunk } from '../thunk.js'\n\nexport const isIOS = thunk(() => process.browser && /iP(?:hone|ad|od)/.test(navigator.userAgent))\n","// PointerEvent introduced in iOS 13 https://caniuse.com/#feat=pointer\nimport { thunk } from '../thunk.js'\nimport { isIOS } from '../userAgent/isIOS.js'\n\nexport const isIOSPre13 = thunk(() => process.browser && isIOS() &&\n  !(typeof PointerEvent === 'function' &&\n    PointerEvent.toString().includes('[native code]')))\n","import { isIOSPre13 } from '../_utils/userAgent/isIOSPre13.js'\n\nexport const DEFAULT_MEDIA_WIDTH = 300\nexport const DEFAULT_MEDIA_HEIGHT = 250\n\nexport const ONE_TRANSPARENT_PIXEL =\n  'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII='\n\nexport const MEDIA_ALT_CHAR_LIMIT = 420\n\nconst acceptedFileTypes = [\n  '.3gp',\n  '.aac',\n  '.flac',\n  '.gif',\n  '.jpeg',\n  '.jpg',\n  '.m4a',\n  '.m4v',\n  '.mov',\n  '.mp3',\n  '.mp4',\n  '.oga',\n  '.ogg',\n  '.opus',\n  '.png',\n  '.wav',\n  '.webm',\n  '.wma',\n  'audio/3gpp',\n  'audio/aac',\n  'audio/flac',\n  'audio/m4a',\n  'audio/mp3',\n  'audio/mp4',\n  'audio/mpeg',\n  'audio/ogg',\n  'audio/wav',\n  'audio/wave',\n  'audio/webm',\n  'audio/x-aac',\n  'audio/x-m4a',\n  'audio/x-mp4',\n  'audio/x-pn-wave',\n  'audio/x-wav',\n  'image/gif',\n  'image/jpeg',\n  'image/png',\n  'video/mp4',\n  'video/ogg',\n  'video/quicktime',\n  'video/webm',\n  'video/x-ms-asf'\n]\n\n// TODO: iOS has a bug where it does not allow audio uploads unless you either *only* accept audio, or\n// you accept everything. Since this is not a great user experience (e.g. it could lead someone trying\n// to upload a PDF, which is not allowed), then we only use the */* for iOS.\n// WebKit bug: https://bugs.webkit.org/show_bug.cgi?id=190982#c2\nexport const mediaAccept = isIOSPre13() ? '*/*' : acceptedFileTypes.join(',')\n","export function classname () {\n  let res = ''\n  const len = arguments.length\n  let i = -1\n  while (++i < len) {\n    const item = arguments[i]\n    if (item) {\n      if (res) {\n        res += ' '\n      }\n      res += item\n    }\n  }\n  return res\n}\n","export const coordsToPercent = coord => ((1 + coord) / 2) * 100\n\nexport const percentToCoords = percent => ((percent / 100) * 2) - 1\n","export function decodeImage (img) {\n  if (typeof img.decode === 'function' && !img.src.startsWith('data:image/png;base64,')) {\n    return img.decode()\n  }\n\n  return new Promise((resolve, reject) => {\n    img.onload = resolve\n    img.onerror = reject\n  })\n}\n","import { replaceAll } from './strings.js'\nimport { replaceEmoji } from './replaceEmoji.js'\n\nconst decomojiMap = {\n  a: 'あ',\n  i: 'い',\n  u: 'う',\n  e: 'え',\n  o: 'お',\n  ka: 'か',\n  ki: 'き',\n  ku: 'く',\n  ke: 'け',\n  ko: 'こ',\n  sa: 'さ',\n  shi: 'し',\n  su: 'す',\n  se: 'せ',\n  so: 'そ',\n  ta: 'た',\n  ti: 'ち',\n  tsu: 'つ',\n  te: 'て',\n  to: 'と',\n  na: 'な',\n  ni: 'に',\n  nu: 'ぬ',\n  ne: 'ね',\n  no: 'の',\n  ha: 'は',\n  hi: 'ひ',\n  fu: 'ふ',\n  he: 'へ',\n  ho: 'ほ',\n  ma: 'ま',\n  mi: 'み',\n  mu: 'む',\n  me: 'め',\n  mo: 'も',\n  ya: 'や',\n  yu: 'ゆ',\n  yo: 'よ',\n  ra: 'ら',\n  ri: 'り',\n  ru: 'る',\n  re: 'れ',\n  ro: 'ろ',\n  wa: 'わ',\n  wo: 'を',\n  n: 'ん',\n  ga: 'が',\n  gi: 'ぎ',\n  gu: 'ぐ',\n  ge: 'げ',\n  go: 'ご',\n  za: 'ざ',\n  zi: 'じ',\n  zu: 'ず',\n  ze: 'ぜ',\n  zo: 'ぞ',\n  da: 'だ',\n  di: 'ぢ',\n  du: 'づ',\n  de: 'で',\n  do: 'ど',\n  ba: 'ば',\n  bi: 'び',\n  bu: 'ぶ',\n  be: 'べ',\n  bo: 'ぼ',\n  pa: 'ぱ',\n  pi: 'ぴ',\n  pu: 'ぷ',\n  pe: 'ぺ',\n  po: 'ぽ',\n  la: 'ぁ',\n  li: 'ぃ',\n  lu: 'ぅ',\n  le: 'ぇ',\n  lo: 'ぉ',\n  lya: 'ゃ',\n  lyu: 'ゅ',\n  lyo: 'ょ',\n  ltsu: 'っ',\n  ten: '、',\n  maru: '。',\n  kkb: '（',\n  kka: '）',\n  wave: '～'\n}\nconst decomojiRegex = new RegExp(\n  String.raw`(?::_(?:${Object.keys(decomojiMap).join('|')}):[\\s\\u200b]*)+`,\n  'g'\n)\n\nexport function emojifyText (\n  text,\n  emojis,\n  autoplayGifs,\n  disableDecomojiConverter\n) {\n  // replace native emoji with wrapped spans so we can give them the proper font-family\n  // as well as show tooltips\n  text = replaceEmoji(text, substring => {\n    return `<span class=\"inline-emoji\">${substring}</span>`\n  })\n\n  // replace custom emoji\n  if (emojis) {\n    if (!disableDecomojiConverter) {\n      text = text.replace(decomojiRegex, s => {\n        for (const k in decomojiMap) {\n          const shortcodeWithColons = `:_${k}:`\n          s = replaceAll(s, shortcodeWithColons, decomojiMap[k])\n        }\n        return `<span class=\"decomoji\">${s}</span>`\n      })\n    }\n    for (const emoji of emojis) {\n      const urlToUse = autoplayGifs ? emoji.url : emoji.static_url\n      const shortcodeWithColons = `:${emoji.shortcode}:`\n      text = replaceAll(\n        text,\n        shortcodeWithColons,\n        `<img class=\"inline-custom-emoji\" draggable=\"false\" src=\"${urlToUse}\"\n                    alt=\"${shortcodeWithColons}\" title=\"${shortcodeWithColons}\" />`\n      )\n    }\n  }\n\n  return text\n}\n","import { registerResizeListener, unregisterResizeListener } from './resize.js'\n\nexport function mouseover (node, callback) {\n  function onMouseEnter () {\n    callback(true) // eslint-disable-line\n  }\n  function onMouseLeave () {\n    callback(false) // eslint-disable-line\n  }\n  node.addEventListener('mouseenter', onMouseEnter)\n  node.addEventListener('mouseleave', onMouseLeave)\n  return {\n    destroy () {\n      node.removeEventListener('mouseenter', onMouseEnter)\n      node.removeEventListener('mouseleave', onMouseLeave)\n    }\n  }\n}\n\nexport function selectionChange (node, callback) {\n  const events = ['keyup', 'click', 'focus', 'blur']\n  const listener = () => {\n    callback(node.selectionStart)\n  }\n  for (const event of events) {\n    node.addEventListener(event, listener)\n  }\n  return {\n    destroy () {\n      for (const event of events) {\n        node.removeEventListener(event, listener)\n      }\n    }\n  }\n}\n\nexport function resize (node, callback) {\n  registerResizeListener(callback)\n\n  return {\n    destroy () {\n      unregisterResizeListener(callback)\n    }\n  }\n}\n\nexport function documentKeydown (node, callback) {\n  document.addEventListener('keydown', callback)\n  return {\n    destroy () {\n      document.removeEventListener('keydown', callback)\n    }\n  }\n}\n","import { replaceAll } from './strings.js'\nimport { replaceEmoji } from './replaceEmoji.js'\n\nexport function removeEmoji (text, emojis) {\n  // remove custom emoji\n  if (emojis) {\n    for (const emoji of emojis) {\n      const shortcodeWithColons = `:${emoji.shortcode}:`\n      text = replaceAll(text, shortcodeWithColons, '')\n    }\n  }\n  // remove native emoji\n  return replaceEmoji(text, () => '').trim()\n}\n","import emojiRegex from 'emoji-regex'\nimport { thunk } from './thunk.js'\n\nexport const getEmojiRegex = thunk(emojiRegex)\n","import { getEmojiRegex } from './emojiRegex.js'\n\n// \\ufe0f is a variation selector, which seems to appear for some reason in e.g. ™\nconst NON_EMOJI_REGEX = /^(?:[0-9#*]|™|®|©|\\ufe0f)+$/\n\n// replace emoji in HTML with something else, safely skipping HTML tags\nexport function replaceEmoji (string, replacer) {\n  let output = ''\n  let leftAngleBracketIdx = string.indexOf('<')\n  let currentIdx = 0\n  const emojiRegex = getEmojiRegex()\n\n  function safeReplacer (substring) {\n    // emoji regex matches digits and pound sign https://github.com/mathiasbynens/emoji-regex/issues/33#issuecomment-373674579\n    if (substring.match(NON_EMOJI_REGEX)) {\n      return substring\n    }\n    return replacer(substring)\n  }\n\n  while (leftAngleBracketIdx !== -1) {\n    const substring = string.substring(currentIdx, leftAngleBracketIdx)\n\n    output += substring.replace(emojiRegex, safeReplacer)\n\n    const rightAngleBracketIdx = string.indexOf('>', leftAngleBracketIdx + 1)\n    if (rightAngleBracketIdx === -1) { // broken HTML, abort\n      output += string.substring(leftAngleBracketIdx, string.length)\n      return output\n    }\n    output += string.substring(leftAngleBracketIdx, rightAngleBracketIdx) + '>'\n    currentIdx = rightAngleBracketIdx + 1\n    leftAngleBracketIdx = string.indexOf('<', currentIdx)\n  }\n\n  output += string.substring(currentIdx, string.length).replace(emojiRegex, safeReplacer)\n\n  return output\n}\n","export function replaceAll (string, replacee, replacement) {\n  if (!string.length || !replacee.length) {\n    return string\n  }\n  let idx\n  let pos = 0\n  while (true) {\n    idx = string.indexOf(replacee, pos)\n    if (idx === -1) {\n      break\n    }\n    string = string.substring(0, idx) + replacement + string.substring(idx + replacee.length)\n    pos = idx + replacement.length\n  }\n  return string\n}\n"],"names":["onMouseOver","mouseOver","this","set","currentSrc","get","image","Image","src","decodeImage","loaded","fire","e","alt","title","ariaHidden","event","computedClass","width","height","displaySrc","className","staticSrc","isLink","classname","account","avatar","avatar_static","error","svgStyle","store","undefined","size","$autoplayGifs","$isMobileSize","animate","animation","checkmarkAnimation","refs","svg","checked","check","onClick","onRightClick","preventDefault","clickListener","rightClickListener","bind","node","addEventListener","removeEventListener","big","muted","disabled","svgClassName","elementId","pressable","pressed","pressedLabel","sameColorWhenPressed","href","ariaLabel","label","console","forceSize","fallback","focus","background","blurhash","focusStyle","computedStyle","filter","Boolean","join","x","y","accountName","massagedAccountName","emojis","display_name","username","$omitEmojiInDisplayNames","$disableDecomojiConverter","emojiFreeDisplayName","isIOS","thunk","test","navigator","userAgent","isIOSPre13","PointerEvent","toString","includes","DEFAULT_MEDIA_WIDTH","DEFAULT_MEDIA_HEIGHT","ONE_TRANSPARENT_PIXEL","MEDIA_ALT_CHAR_LIMIT","mediaAccept","res","len","arguments","length","i","item","coordsToPercent","coord","percentToCoords","percent","img","decode","startsWith","Promise","resolve","reject","onload","onerror","decomojiMap","a","u","o","ka","ki","ku","ke","ko","sa","shi","su","se","so","ta","ti","tsu","te","to","na","ni","nu","ne","no","ha","hi","fu","he","ho","ma","mi","mu","me","mo","ya","yu","yo","ra","ri","ru","re","ro","wa","wo","n","ga","gi","gu","ge","go","za","zi","zu","ze","zo","da","di","du","de","do","ba","bi","bu","be","bo","pa","pi","pu","pe","po","la","li","lu","le","lo","lya","lyu","lyo","ltsu","ten","maru","kkb","kka","wave","decomojiRegex","RegExp","String","raw","Object","keys","emojifyText","text","autoplayGifs","disableDecomojiConverter","substring","replace","s","k","shortcodeWithColons","emoji","urlToUse","url","static_url","shortcode","mouseover","callback","onMouseEnter","onMouseLeave","destroy","selectionChange","events","listener","selectionStart","resize","documentKeydown","document","removeEmoji","trim","getEmojiRegex","NON_EMOJI_REGEX","replaceEmoji","string","replacer","output","leftAngleBracketIdx","indexOf","currentIdx","emojiRegex","safeReplacer","match","rightAngleBracketIdx","replaceAll","replacee","replacement","idx","pos"],"sourceRoot":""}